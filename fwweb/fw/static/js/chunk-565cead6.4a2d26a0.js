(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-565cead6"],{"045f":function(e,t,a){"use strict";var i=a("eba4"),s=a.n(i);s.a},"0602":function(e,t,a){},"0ff9":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.detailDialogVisible,expression:"!detailDialogVisible"}],staticClass:"list-contenter"},[a("div",{staticClass:"filter-container"},[a("span",{staticClass:"seachname"},[e._v("模具编号:")]),a("el-input",{staticClass:"filter-item",attrs:{size:"small",placeholder:"输入模具编号"},model:{value:e.listQuery.code,callback:function(t){e.$set(e.listQuery,"code",t)},expression:"listQuery.code"}}),a("span",{staticClass:"seachname"},[e._v("模具名称:")]),a("el-input",{staticClass:"filter-item",attrs:{size:"small",placeholder:"输入模具名称"},model:{value:e.listQuery.mouldName,callback:function(t){e.$set(e.listQuery,"mouldName",t)},expression:"listQuery.mouldName"}}),a("span",{staticClass:"seachname"},[e._v("阶段状态:")]),a("el-select",{attrs:{clearable:"",size:"small",placeholder:"选择阶段状态"},model:{value:e.listQuery.turnStatus,callback:function(t){e.$set(e.listQuery,"turnStatus",t)},expression:"listQuery.turnStatus"}},e._l(e.turnStatusList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})})),1),a("span",{staticClass:"seachname"},[e._v("模具状态:")]),a("el-select",{attrs:{clearable:"",size:"small",placeholder:"选择模具状态"},model:{value:e.listQuery.mouldStatus,callback:function(t){e.$set(e.listQuery,"mouldStatus",t)},expression:"listQuery.mouldStatus"}},e._l(e.mouldStatusList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.value,value:e.id}})})),1),a("el-button",{staticClass:"primaryBtn",attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v("查询")]),a("el-button",{staticClass:"resetBtn",attrs:{type:"default",size:"mini",icon:"el-icon-refresh-right"},on:{click:e.handleReset}},[e._v("重置")])],1),a("div",{staticClass:"opt-container"},[e.hasPermission("resumeMould/add")?a("el-button",{staticClass:"addBtn",attrs:{type:"default",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增模具")]):e._e()],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],key:e.tableKey,ref:"tableRef",attrs:{stripe:"",data:e.resumeListFilter,border:"",fit:"","highlight-current-row":"",height:e.tableHeight,"header-cell-style":e.headerClassName},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",align:"center",width:"55",fixed:""}}),a("el-table-column",{attrs:{label:"序号",type:"index",align:"center",width:"55"}}),a("el-table-column",{attrs:{label:"模具编号",prop:"code",width:"180px",align:"center"}}),a("el-table-column",{attrs:{label:"模具名称",prop:"name","min-width":"200px",align:"center"}}),a("el-table-column",{attrs:{label:"模具状态",prop:"turnStatus",width:"150px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[0===i.type?a("span",[e._v("主体")]):1===i.type?a("span",[e._v("镶件")]):2===i.type?a("span",[e._v("嵌件")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"阶段状态",prop:"turnStatus",width:"150px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[0===i.turnStatus?a("span",[e._v("试制阶段")]):1===i.turnStatus?a("span",[e._v("量产阶段")]):2===i.turnStatus?a("span",[e._v("项目EOP")]):3===i.turnStatus?a("span",[e._v("报废")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"状态",prop:"status",width:"150px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[0===i.status?a("span",[e._v("正常")]):1===i.status?a("span",[e._v("使用中")]):2===i.status?a("span",[e._v("EOP")]):3===i.status?a("span",[e._v("待出库")]):4===i.status?a("span",[e._v("已出库")]):5===i.status?a("span",[e._v("待入库")]):6===i.status?a("span",[e._v("已入库")]):7===i.status?a("span",[e._v("待移库")]):8===i.status?a("span",[e._v("报废")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"转段申请状态",prop:"auditStatus",width:"150px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[0===i.auditStatus?a("span",[e._v("未申请")]):1===i.auditStatus?a("span",[e._v("已申请")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"模具库位",prop:"nowLocationId",width:"150px",align:"center"}}),a("el-table-column",{attrs:{label:"成型周期",prop:"molding",width:"150px",align:"center"}}),a("el-table-column",{attrs:{label:"型腔数",prop:"cavity",width:"100px",align:"center"}}),a("el-table-column",{attrs:{label:"产品",prop:"product","min-width":"200px",align:"center"}}),a("el-table-column",{attrs:{label:"模具寿命",prop:"lifeTime",width:"150px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-progress",{attrs:{"text-inside":!0,"stroke-width":15,percentage:1*i.usePercentage,"show-text":!1,status:1===i.useStatus?"success":"exception"}}),a("span",[e._v(e._s(i.process)+" / "+e._s(null===i.lifeTime?0:i.lifeTime))])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"200px",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[e.hasPermission("resumeMould/find")?a("el-button",{staticClass:"defaultTextBtn",attrs:{type:"text"},on:{click:function(t){return e.handleDetail(i)}}},[a("svg-icon",{attrs:{"icon-class":"search"}}),e._v(" 查看 ")],1):e._e(),e.hasPermission("resumeMould/edit")?a("el-button",{staticClass:"addTextBtn",attrs:{type:"text"},on:{click:function(t){return e.handleEdit(i)}}},[a("svg-icon",{attrs:{"icon-class":"edit"}}),e._v(" 编辑 ")],1):e._e(),e.hasPermission("resumeMould/transition")?a("el-button",{staticClass:"otherTextBtn",attrs:{type:"text"},on:{click:function(t){return e.handleStageChange(i)}}},[a("svg-icon",{attrs:{"icon-class":"stage-change"}}),e._v(" 转段 ")],1):e._e()]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.listQuery.pageNum,limit:e.listQuery.pageSize},on:{"update:page":function(t){return e.$set(e.listQuery,"pageNum",t)},"update:limit":function(t){return e.$set(e.listQuery,"pageSize",t)},pagination:e.getResumeList}}),e.editDialogVisible?a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],staticClass:"dialogs",attrs:{title:e.dialogTitleEdit,visible:e.editDialogVisible,"close-on-click-modal":!1,width:"960px"},on:{"update:visible":function(t){e.editDialogVisible=t}}},[a("resume-edit",{attrs:{"resume-obj":e.oResume},on:{ResumeEditCall:e.scrapsApplyCall}})],1):e._e(),e.stageChangeDialogVisible?a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],staticClass:"dialogs",attrs:{title:"转段",visible:e.stageChangeDialogVisible,"close-on-click-modal":!1,width:"480px"},on:{"update:visible":function(t){e.stageChangeDialogVisible=t}}},[a("StageChangeApply",{attrs:{"resume-obj":e.oResume},on:{StageChangeApplyCall:e.scrapsApplyCall}})],1):e._e()],1),e.detailDialogVisible?a("resume-detail",{attrs:{"resume-obj":e.oResume},on:{ResumeDetailCall:e.resumeDetailCall}}):e._e()],1)},s=[],l=(a("d81d"),a("b680"),a("d3b7"),a("5530")),n=a("2909"),o=a("20cc"),r=a("333d"),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"turnApplyForm",attrs:{model:e.applyForm,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"模具编号"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.applyForm.code,callback:function(t){e.$set(e.applyForm,"code",t)},expression:"applyForm.code"}})],1),a("el-form-item",{attrs:{label:"模具名称"}},[a("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.applyForm.name,callback:function(t){e.$set(e.applyForm,"name",t)},expression:"applyForm.name"}})],1),a("el-form-item",{attrs:{label:"阶段",prop:"turnStatus"}},[a("el-select",{attrs:{clearable:"",size:"mini",placeholder:"请选择阶段"},model:{value:e.applyForm.turnStatus,callback:function(t){e.$set(e.applyForm,"turnStatus",t)},expression:"applyForm.turnStatus"}},e._l(e.turnStatusList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"转段原因",prop:"turnReason"}},[a("el-input",{attrs:{type:"textarea",size:"mini",maxlength:"100","show-word-limit":"",placeholder:"请输入转段原因"},model:{value:e.applyForm.turnReason,callback:function(t){e.$set(e.applyForm,"turnReason",t)},expression:"applyForm.turnReason"}})],1),a("el-form-item",{attrs:{label:"上传附件",prop:"fileList"}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"",limit:"3","on-remove":e.handleRemove,"before-upload":e.beforeFile,"http-request":e.uploadImage,"file-list":e.applyForm.fileList,"auto-upload":!0}},[a("el-button",{attrs:{slot:"trigger",size:"mini",type:"primary"},slot:"trigger"},[e._v("选取文件")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("文件大小不超过200M")])],1)],1)],1),a("div",{staticClass:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:e.handleCancel}},[e._v("取消")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.handleSubmit}},[e._v("保存")])],1)],1)},c=[],d=(a("4160"),a("b0c0"),a("498a"),a("159b"),a("6ace")),m={name:"StageChangeApply",props:{resumeObj:{type:Object,required:!0}},data:function(){return{applyForm:{id:"",code:"",turnStatus:"",preStatus:"",fileList:[],name:"",dataId:"",turnReason:""},turnStatusList:[{id:0,value:"试制阶段"},{id:1,value:"量产阶段"},{id:2,value:"项目EOP"},{id:3,value:"报废"}],rules:{turnReason:[{required:!0,message:"请输入转段原因",trigger:"blur"},{validator:function(e,t,a){var i=t.trim();i.length<1||i.length>100?a(new Error("转段原因必须是1~50个字符")):a()},trigger:"blur"}],turnStatus:[{required:!0,message:"请选择阶段",trigger:"blur"}],fileList:[{required:!0,message:"请选择上传的文件",trigger:"change"}]}}},created:function(){this.applyForm.id=this.resumeObj.id,this.applyForm.name=this.resumeObj.name,this.applyForm.code=this.resumeObj.code,this.applyForm.preStatus=this.resumeObj.turnStatus,this.applyForm.turnStatus=this.resumeObj.turnStatus},methods:{handleCancel:function(){this.$emit("StageChangeApplyCall",!1)},handleSubmit:function(){var e=this;this.$refs.turnApplyForm.validate((function(t){if(!t)return!1;e.addScrapRequest()}))},addScrapRequest:function(){var e=this,t=[];this.applyForm.fileList.forEach((function(e){t.push(e.dataId)}));var a={dataId:t.toString(),preStatus:this.applyForm.preStatus,stage:this.applyForm.turnStatus,mouldDevicesId:this.applyForm.id,reason:this.applyForm.turnReason};Object(o["a"])(a).then((function(t){0===t.code?(e.$message({type:"success",message:"转段申请成功！"}),e.$emit("StageChangeApplyCall",!0)):1e3===t.code&&e.$message({type:"warning",message:"转段申请失败:"+t.msg})}))},handleRemove:function(e,t){this.applyForm.fileList=Object(n["a"])(t)},uploadImage:function(e){var t=this,a=new FormData;a.append("file",e.file),a.append("isAdd",!0),Object(d["c"])(a).then((function(e){0===e.code&&(t.applyForm.fileList.push(e.data),t.$message({type:"success",message:"上传成功！"}))}))},beforeFile:function(e){var t=e.size/1024/1024<200;return t?this.applyForm.fileList.length>3?(this.$message.error("仅能上传3个文件!"),!1):void 0:(this.$message.error("上传文件大小不能超过200MB!"),!1)}}},p=m,g=(a("6b8d"),a("2877")),h=Object(g["a"])(p,u,c,!1,null,"40945d8b",null),f=h.exports,b=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("el-form",{ref:"resumeEditForm",attrs:{model:e.resumeEditForm,rules:e.rules,"label-width":"85px"}},[i("el-row",{attrs:{gutter:30}},[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"模具编号",prop:"code"}},[i("el-input",{attrs:{size:"mini",placeholder:"请输入模具编号"},on:{input:function(t){e.resumeEditForm.code=e.inputRule(e.resumeEditForm.code)}},model:{value:e.resumeEditForm.code,callback:function(t){e.$set(e.resumeEditForm,"code",t)},expression:"resumeEditForm.code"}})],1)],1),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"模具名称",prop:"name"}},[i("el-input",{attrs:{size:"mini",placeholder:"请输入模具名称"},on:{input:function(t){e.resumeEditForm.name=e.inputRule(e.resumeEditForm.name)}},model:{value:e.resumeEditForm.name,callback:function(t){e.$set(e.resumeEditForm,"name",t)},expression:"resumeEditForm.name"}})],1)],1),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"入厂时间",prop:"createTime","label-width":"110px"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"yyyy-MM-dd hh:mm",size:"mini",type:"date",placeholder:"选择入厂日期"},model:{value:e.resumeEditForm.createTime,callback:function(t){e.$set(e.resumeEditForm,"createTime",t)},expression:"resumeEditForm.createTime"}})],1)],1)],1),i("el-row",{attrs:{gutter:30}},[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"模具库位"}},[i("el-input",{staticStyle:{width:"110px","margin-right":"8px"},attrs:{size:"mini",readonly:""},model:{value:e.resumeEditForm.nowLocationId,callback:function(t){e.$set(e.resumeEditForm,"nowLocationId",t)},expression:"resumeEditForm.nowLocationId"}}),i("el-button",{attrs:{size:"mini"},on:{click:e.handleSelectedStorage}},[e._v("选择库位")])],1)],1),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"尺寸",prop:"sizes"}},[i("el-input",{attrs:{size:"mini",placeholder:"请输入尺寸(L x W x H)"},on:{input:function(t){e.resumeEditForm.sizes=e.inputRule(e.resumeEditForm.sizes)}},model:{value:e.resumeEditForm.sizes,callback:function(t){e.$set(e.resumeEditForm,"sizes",t)},expression:"resumeEditForm.sizes"}})],1)],1),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"重量(Kg)",prop:"weight","label-width":"110px"}},[i("el-input-number",{attrs:{size:"mini",step:1,min:0},model:{value:e.resumeEditForm.weight,callback:function(t){e.$set(e.resumeEditForm,"weight",t)},expression:"resumeEditForm.weight"}})],1)],1)],1),i("el-row",{attrs:{gutter:30}},[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"模具厂家",prop:"vender"}},[i("el-input",{attrs:{size:"mini",placeholder:"请输入模具厂家"},on:{input:function(t){e.resumeEditForm.vender=e.inputRule(e.resumeEditForm.vender)}},model:{value:e.resumeEditForm.vender,callback:function(t){e.$set(e.resumeEditForm,"vender",t)},expression:"resumeEditForm.vender"}})],1)],1),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"客户名称",prop:"clientName"}},[i("el-input",{attrs:{size:"mini",placeholder:"请输入客户名称"},on:{input:function(t){e.resumeEditForm.clientName=e.inputRule(e.resumeEditForm.clientName)}},model:{value:e.resumeEditForm.clientName,callback:function(t){e.$set(e.resumeEditForm,"clientName",t)},expression:"resumeEditForm.clientName"}})],1)],1),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"初始开合模次数",prop:"initCount","label-width":"120px"}},[i("el-input-number",{attrs:{size:"mini",step:1,min:0},model:{value:e.resumeEditForm.initCount,callback:function(t){e.$set(e.resumeEditForm,"initCount",t)},expression:"resumeEditForm.initCount"}})],1)],1)],1),i("el-row",{attrs:{gutter:30}},[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"使用状态",prop:"status"}},[i("el-select",{attrs:{disabled:"",size:"mini",placeholder:"请选择模具状态"},model:{value:e.resumeEditForm.status,callback:function(t){e.$set(e.resumeEditForm,"status",t)},expression:"resumeEditForm.status"}},e._l(e.mouldStatusList,(function(e){return i("el-option",{key:e.value,attrs:{label:e.value,value:e.id}})})),1)],1)],1),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"成型周期",prop:"molding"}},[i("el-input",{attrs:{size:"mini",placeholder:"请输入成型周期"},on:{input:function(t){e.resumeEditForm.molding=e.inputRule(e.resumeEditForm.molding)}},model:{value:e.resumeEditForm.molding,callback:function(t){e.$set(e.resumeEditForm,"molding",t)},expression:"resumeEditForm.molding"}})],1)],1),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"型腔数",prop:"cavity","label-width":"110px"}},[i("el-input-number",{attrs:{size:"mini",step:1,min:0},model:{value:e.resumeEditForm.cavity,callback:function(t){e.$set(e.resumeEditForm,"cavity",t)},expression:"resumeEditForm.cavity"}})],1)],1)],1),i("el-row",{attrs:{gutter:30}},[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"产品代码",prop:"material"}},[i("el-input",{attrs:{size:"mini",placeholder:"请输入产品代码"},on:{input:function(t){e.resumeEditForm.material=e.inputRule(e.resumeEditForm.material)}},model:{value:e.resumeEditForm.material,callback:function(t){e.$set(e.resumeEditForm,"material",t)},expression:"resumeEditForm.material"}})],1)],1),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"阶段状态",prop:"turnStatus"}},[i("el-select",{attrs:{disabled:"",size:"mini",placeholder:"请选择模具状态"},model:{value:e.resumeEditForm.turnStatus,callback:function(t){e.$set(e.resumeEditForm,"turnStatus",t)},expression:"resumeEditForm.turnStatus"}},e._l(e.turnStatusList,(function(e){return i("el-option",{key:e.value,attrs:{label:e.value,value:e.id}})})),1)],1)],1),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"模具寿命",prop:"lifeTime","label-width":"110px"}},[i("el-input-number",{attrs:{size:"mini",step:1,min:0},model:{value:e.resumeEditForm.lifeTime,callback:function(t){e.$set(e.resumeEditForm,"lifeTime",t)},expression:"resumeEditForm.lifeTime"}})],1)],1)],1),i("el-row",{attrs:{gutter:30}},[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"产品",prop:"product"}},[i("el-input",{attrs:{size:"mini",placeholder:"请输入产品"},on:{input:function(t){e.resumeEditForm.product=e.inputRule(e.resumeEditForm.product)}},model:{value:e.resumeEditForm.product,callback:function(t){e.$set(e.resumeEditForm,"product",t)},expression:"resumeEditForm.product"}})],1)],1),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"模具类型",prop:"type"}},[i("el-select",{attrs:{size:"mini",placeholder:"请选择模具类型"},model:{value:e.resumeEditForm.type,callback:function(t){e.$set(e.resumeEditForm,"type",t)},expression:"resumeEditForm.type"}},e._l(e.typeList,(function(e){return i("el-option",{key:e.value,attrs:{label:e.value,value:e.id}})})),1)],1)],1),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"模具照片",prop:"dataId"}},[i("el-upload",{ref:"uploadMouldImg",staticClass:"avatar-uploader",attrs:{"file-list":e.fileList,action:"","show-file-list":!1,"auto-upload":!0,"on-change":e.changeLogoUpload,"before-upload":e.beforeLogoUpload,"http-request":e.uploadImage}},[e.resumeEditForm.dataId?i("img",{staticClass:"uploadImg",staticStyle:{width:"120px",height:"120px"},attrs:{src:e.baseUrl+e.resumeEditForm.webPath}}):i("img",{staticClass:"uploadDefaultImg",staticStyle:{border:"solid 1px #ccc",width:"120px",height:"120px"},attrs:{src:a("d49b")}})])],1)],1),i("el-col",{attrs:{span:8}})],1),i("el-row",{attrs:{gutter:30}},[e._l(e.addList,(function(t,a){return i("el-col",{key:a,staticClass:"new-params",attrs:{span:8}},[i("el-form-item",{attrs:{label:t.name}},[i("el-input",{attrs:{size:"mini",maxlength:"10"},model:{value:t["params"+a],callback:function(i){e.$set(t,"params"+a,i)},expression:"item['params'+index]"}})],1)],1)})),i("el-col",{staticClass:"new-params",attrs:{span:8}},[i("el-button",{staticStyle:{"margin-top":"5px","margin-bottom":"18px"},attrs:{size:"mini",icon:"el-icon-plus"},on:{click:function(t){return e.addParams()}}},[e._v("添加参数")])],1)],2)],1),i("div",{staticClass:"footer"},[i("el-button",{attrs:{size:"mini"},on:{click:e.handleCancel}},[e._v("取消")]),i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.handleSubmit}},[e._v("保存")])],1),e.selectedDialogVisible?i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],staticClass:"dialogs",attrs:{title:"选择库位",modal:!1,visible:e.selectedDialogVisible,"close-on-click-modal":!1,width:"1080px"},on:{"update:visible":function(t){e.selectedDialogVisible=t}}},[i("StorageLocationSelected",{on:{StorageLocationSelectedCall:e.storageLocationSelectedCall}})],1):e._e(),i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],staticClass:"dialogs",attrs:{title:"参数名称",visible:e.addDialogVisible,"close-on-click-modal":!1,width:"500px","append-to-body":""},on:{"update:visible":function(t){e.addDialogVisible=t},close:function(t){return e.resetFrom("addForm")}}},[i("el-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.rules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"参数名称",prop:"name"}},[i("el-input",{attrs:{size:"mini",maxlength:"10"},model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticClass:"defaultBtn",staticStyle:{width:"120px","border-radius":"4px"},on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取消")]),i("el-button",{staticClass:"primaryBtn",staticStyle:{width:"120px"},attrs:{type:"primary"},on:{click:function(t){return e.addForms("addForm")}}},[e._v("保存")])],1)],1)],1)},v=[],w=(a("baa5"),a("b85c")),y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("span",[e._v("库位名称：")]),a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px","margin-right":"15px"},attrs:{placeholder:"请输入库位名称",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter(t)}},model:{value:e.locationName,callback:function(t){e.locationName=t},expression:"locationName"}}),a("el-button",{staticClass:"filter-item primaryBtn",attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:e.handleFilter}},[e._v("查询")]),a("el-button",{staticClass:"filter-item resetBtn",attrs:{type:"default",size:"mini",icon:"el-icon-refresh-right"},on:{click:e.handleReset}},[e._v("重置")])],1),e._m(0),a("div",{staticClass:"tab-container"},[a("el-tabs",{staticStyle:{"margin-top":"15px"},attrs:{type:"border-card"},on:{"tab-click":e.handleTabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.tabMapOptions,(function(t,i){return a("el-tab-pane",{key:i,attrs:{label:t.name,name:t.id+""}},[a("el-row",{staticClass:"appListArea"},e._l(t.localtionList,(function(t,i){return a("div",{key:i,staticClass:"appInfo"},[a("figure",{class:0==t.status?"unBond":1==t.status?"normal":2==t.status?"awaitIn":"awaitOut",on:{click:function(a){return e.handleSelected(t)}}},[a("figcaption",[e._v(e._s(t.name))])])])})),0)],1)})),1)],1)])},C=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"filter-container"},[a("div",{staticClass:"tipDiv"},[a("span",{staticClass:"ColorShow unBond"}),e._v(" 未绑定空闲 "),a("span",{staticClass:"ColorShow normal"}),e._v(" 正常 "),a("span",{staticClass:"ColorShow awaitIn"}),e._v(" 待入库 "),a("span",{staticClass:"ColorShow awaitOut"}),e._v(" 待出库 ")])])}],x=a("a888"),_=a("2ac3"),S={name:"StorageLocationSelected",components:{},directives:{elDragDialog:x["a"]},data:function(){return{locationName:"",tabMapOptions:[],activeName:"",chioceApp:{}}},created:function(){},mounted:function(){this.getList()},methods:{handleSelected:function(e){0===e.status?this.$emit("StorageLocationSelectedCall",e):this.$message({message:"只能选择未绑定空闲状态的库位!",type:"warning"})},handleFilter:function(){this.getList()},getList:function(){var e=this,t={name:this.locationName.trim()};Object(_["c"])(t).then((function(t){if(0===t.code)if(t.data.length>0){var a=[],i=t.data;i.forEach((function(e){null!=e.localtionList&&0!==e.localtionList.length&&a.push(e)})),e.tabMapOptions=a,e.activeName=a[0].id+""}else e.$message({message:"没有查询到库位信息!",type:"warning"})}))},resetSearch:function(){this.listQuery={storageName:void 0}},handleTabClick:function(e,t){this.listQuery.storageHouseId=e.name,this.ruleForm.storageHouseId=e.name,this.ruleForm1.storageHouseId=e.name,this.getStorageLocationList()}}},F=S,D=(a("9143"),Object(g["a"])(F,y,C,!1,null,"8f1c49ea",null)),E=D.exports,k={name:"ResumeEdit",components:{StorageLocationSelected:E},directives:{elDragDialog:x["a"]},props:{resumeObj:{type:Object,required:!0}},data:function(){return{baseUrl:window.configs.api,addForm:{name:""},addList:[],addDialogVisible:!1,fileList:[],optType:"添加",selectedDialogVisible:!1,resumeEditForm:{code:"",name:"",createTime:"",weight:null,sizes:null,vender:"",clientName:"",nowLocationId:null,turnStatus:0,status:0,molding:"",cavity:0,material:"",initCount:0,lifeTime:0,product:null,type:"",dataId:""},typeList:[{id:0,value:"主体"},{id:1,value:"镶体"},{id:2,value:"嵌体"}],mouldStatusList:[{id:0,value:"正常"},{id:1,value:"使用中"},{id:2,value:"EOP"},{id:3,value:"报废"}],turnStatusList:[{id:0,value:"试制阶段"},{id:1,value:"量产阶段"},{id:2,value:"项目EOP"},{id:3,value:"报废"}],rules:{code:[{required:!0,message:"请输入模具编号",trigger:"blur"}],name:[{required:!0,message:"请输入模具名称",trigger:"blur"}],createTime:[{required:!0,message:"请选择入厂时间",trigger:"blur"}],weight:[{required:!1,message:"请输入重量",trigger:"blur"}],sizes:[{required:!1,message:"请输入尺寸",trigger:"blur"}],vender:[{required:!1,message:"请输入模具厂家",trigger:"blur"}],clientName:[{required:!1,message:"请输入客户名称",trigger:"blur"}],turnStatus:[{required:!1,message:"请选择阶段状态",trigger:"blur"}],status:[{required:!1,message:"请选择使用状态",trigger:"blur"}],molding:[{required:!0,message:"请输入成型周期",trigger:"blur"}],cavity:[{required:!0,message:"请输入型腔数",trigger:"blur"}],material:[{required:!1,message:"请输入产品代码",trigger:"blur"}],initCount:[{required:!0,message:"请输入初始开合模次数",trigger:"blur"}],lifeTime:[{required:!0,message:"请输入模具寿命",trigger:"blur"}],product:[{required:!1,message:"请输入产品",trigger:"blur"}],type:[{required:!0,message:"请选择模具类型",trigger:"blur"}],dataId:[{required:!1,message:"请上传模具照片",trigger:"blur"}]}}},created:function(){this.resumeObj.id?(this.optType="编辑",this.resumeEditForm=Object(l["a"])({},this.resumeObj),this.resumeEditForm.extendAttr&&this.resumeEditForm.extendAttr.length>0&&(this.addList=JSON.parse(this.resumeEditForm.extendAttr))):this.optType="添加"},methods:{storageLocationSelectedCall:function(e){this.resumeEditForm.nowLocationId=e.id,this.selectedDialogVisible=!1},handleCancel:function(){this.$emit("ResumeEditCall",!1)},handleSelectedStorage:function(){this.selectedDialogVisible=!0},handleSubmit:function(){var e=this;this.$refs.resumeEditForm.validate((function(t){if(!t)return!1;e.editResumeRequest()}))},editResumeRequest:function(){var e=this;this.resumeEditForm.extendAttr="",this.addList.length>0&&(this.resumeEditForm.extendAttr=JSON.stringify(this.addList));var t=Object(l["a"])({},this.resumeEditForm);Object(o["c"])(t).then((function(t){0===t.code?(e.$message({type:"success",message:"履历编辑成功！"}),e.$emit("ResumeEditCall",!0)):1e3===t.code&&e.$message({type:"warning",message:"履历编辑失败:"+t.msg})}))},beforeLogoUpload:function(e){var t=e.name,a=t.substring(t.lastIndexOf(".")+1).toLowerCase();if("png"!==a&&"jpg"!==a&&"jpeg"!==a)return this.$message({type:"warning",message:"请上传png/jpg/jpeg格式图片！"}),!1;var i=e.size/1024/1024<50;return i?void 0:(this.$message.error("模具图片大小不能超过 50MB!"),!1)},changeLogoUpload:function(e,t){this.fileList=[],this.fileList.push(t[t.length-1])},uploadImage:function(e){var t=this,a=new FormData;a.append("file",e.file),a.append("isAdd",!0),Object(d["c"])(a).then((function(e){0===e.code&&(t.fileList.push(e.data),t.resumeEditForm.dataId=e.data.dataId,t.resumeEditForm.webPath=e.data.webPath,t.$message({type:"success",message:"上传成功！"}))}))},addParams:function(){this.addForm={name:""},this.addDialogVisible=!0},resetFrom:function(e){this.$refs[e].resetFields()},addForms:function(e){var t=this;this.$refs[e].validate((function(a){if(a){var i,s=!0,l=Object(w["a"])(t.addList);try{for(l.s();!(i=l.n()).done;){var n=i.value;if(n.name===t.addForm.name){s=!1;break}}}catch(r){l.e(r)}finally{l.f()}if(s){var o={name:t.addForm.name};o["params"+t.addList.length]="",t.addList.push(o),t.$refs[e].resetFields(),t.addDialogVisible=!1}else t.$message({type:"error",message:"参数名称重复!"})}}))}}},T=k,j=(a("e8ce"),Object(g["a"])(T,b,v,!1,null,"3eb0d1c7",null)),R=j.exports,I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container2"},[a("div",{staticClass:"header"},[a("div",{staticClass:"headerBackBtn el-icon-arrow-left",on:{click:e.handleBack}},[e._v(" 返回")]),a("span",{staticClass:"headerTitle"},[e._v("履历详情")]),a("span",{staticClass:"headerTitle"},[e._v("模具编号："+e._s(e.oResumeDetail.code))]),a("span",{staticClass:"headerTitle"},[e._v("模具名称："+e._s(e.oResumeDetail.name))]),a("span",{staticClass:"headerTitle"},[e._v("入厂时间："+e._s(e.oResumeDetail.createTime))]),0===e.oResumeDetail.status?a("span",{staticClass:"headerTitle"},[e._v("模具状态：正常")]):1===e.oResumeDetail.status?a("span",{staticClass:"headerTitle"},[e._v("模具状态：使用中")]):2===e.oResumeDetail.status?a("span",{staticClass:"headerTitle"},[e._v("模具状态：EOP")]):3===e.oResumeDetail.status?a("span",{staticClass:"headerTitle"},[e._v("模具状态：待出库")]):4===e.oResumeDetail.status?a("span",{staticClass:"headerTitle"},[e._v("模具状态：已出库")]):5===e.oResumeDetail.status?a("span",{staticClass:"headerTitle"},[e._v("模具状态：待入库")]):6===e.oResumeDetail.status?a("span",{staticClass:"headerTitle"},[e._v("模具状态：已入库")]):7===e.oResumeDetail.status?a("span",{staticClass:"headerTitle"},[e._v("模具状态：待移库")]):8===e.oResumeDetail.status?a("span",{staticClass:"headerTitle"},[e._v("模具状态：报废")]):e._e()]),a("div",{staticClass:"content1"},[e._m(0),a("div",{staticClass:"contentBody"},[a("el-row",[a("el-col",{attrs:{span:3}},[e._v("模具照片：")]),a("el-col",{attrs:{span:10}},[a("el-image",{staticStyle:{width:"240px",height:"120px"},attrs:{src:e.imageUrl+e.oResumeDetail.webPath,alt:"模具照片"}})],1),a("el-col",{attrs:{span:3}},[e._v("模具二维码：")]),a("el-col",{attrs:{span:3}},[a("el-image",{staticStyle:{width:"120px",height:"120px"},attrs:{src:e.imageUrl+e.oResumeDetail.webPath,alt:"模具二维码"}})],1),a("el-col",{attrs:{span:5}},[a("el-button",{staticClass:"filter-item",attrs:{type:"primary",size:"mini",icon:"el-icon-download"},on:{click:e.handleDownload}},[e._v("下载二维码")])],1)],1),a("el-row",[a("el-col",{attrs:{span:3}},[e._v("模具库位：")]),a("el-col",{attrs:{span:3}},[a("span",{staticClass:"contentText"},[e._v(e._s(e.oResumeDetail.nowLocationId||"暂无数据"))])]),a("el-col",{attrs:{span:3}},[e._v("尺寸：")]),a("el-col",{attrs:{span:3}},[a("span",{staticClass:"contentText"},[e._v(e._s(e.oResumeDetail.sizes||"暂无数据"))])]),a("el-col",{attrs:{span:3}},[e._v("重量(Kg)：")]),a("el-col",{attrs:{span:3}},[a("span",{staticClass:"contentText"},[e._v(e._s(e.oResumeDetail.weight||"暂无数据"))])]),a("el-col",{attrs:{span:3}},[e._v("模具厂家：")]),a("el-col",{attrs:{span:3}},[a("span",{staticClass:"contentText"},[e._v(e._s(e.oResumeDetail.vender||"暂无数据"))])])],1),a("el-row",[a("el-col",{attrs:{span:3}},[e._v("客户名称：")]),a("el-col",{attrs:{span:3}},[a("span",{staticClass:"contentText"},[e._v(e._s(e.oResumeDetail.clientName||"暂无数据"))])]),a("el-col",{attrs:{span:3}},[e._v("初始开合模次数：")]),a("el-col",{attrs:{span:3}},[a("span",{staticClass:"contentText"},[e._v(e._s(e.oResumeDetail.initCount))])]),a("el-col",{attrs:{span:3}},[e._v("成型周期：")]),a("el-col",{attrs:{span:3}},[a("span",{staticClass:"contentText"},[e._v(e._s(e.oResumeDetail.molding||"暂无数据"))])]),a("el-col",{attrs:{span:3}},[e._v("型腔数：")]),a("el-col",{attrs:{span:3}},[a("span",{staticClass:"contentText"},[e._v(e._s(e.oResumeDetail.cavity||"暂无数据"))])])],1),a("el-row",[a("el-col",{attrs:{span:3}},[e._v("物料长代码：")]),a("el-col",{attrs:{span:3}},[a("span",{staticClass:"contentText"},[e._v(e._s(e.oResumeDetail.material||"暂无数据"))])]),a("el-col",{attrs:{span:3}},[e._v("阶段状态：")]),a("el-col",{attrs:{span:3}},[0===e.oResumeDetail.turnStatus?a("span",{staticClass:"contentText"},[e._v("新品试模")]):1===e.oResumeDetail.turnStatus?a("span",{staticClass:"contentText"},[e._v("量产")]):2===e.oResumeDetail.turnStatus?a("span",{staticClass:"contentText"},[e._v("不在量产")]):3===e.oResumeDetail.turnStatus?a("span",{staticClass:"contentText"},[e._v("报废")]):e._e()]),a("el-col",{attrs:{span:3}},[e._v("模具寿命：")]),a("el-col",{attrs:{span:3}},[a("span",{staticClass:"contentText"},[e._v(e._s(e.oResumeDetail.lifeTime||"暂无数据"))])]),a("el-col",{attrs:{span:3}},[e._v("产品：")]),a("el-col",{attrs:{span:3}},[a("span",{staticClass:"contentText"},[e._v(e._s(e.oResumeDetail.product||"暂无数据"))])])],1),a("el-row",[a("el-col",{attrs:{span:3}},[e._v("模具类型：")]),a("el-col",{attrs:{span:3}},[a("span",{staticClass:"contentText"},[e._v(e._s(null!=e.oResumeDetail.type?e.typeList[e.oResumeDetail.type].value:"暂无数据"))])]),e._l(e.paramsList,(function(t,i){return a("el-col",{key:i,attrs:{span:6}},[a("el-row",{staticStyle:{padding:"0"}},[a("el-col",{attrs:{span:12}},[e._v(" "+e._s(t.name)+" ")]),a("el-col",{attrs:{span:12}},[a("span",{staticClass:"contentText"},[e._v(e._s(t["params"+i]))])])],1)],1)}))],2)],1)]),a("div",{staticClass:"content1"},[a("div",{staticClass:"contentBody"},[a("el-tabs",{model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"保养履历",name:"1"}},[a("MaintainPlanImplementByCode",{attrs:{"mould-code":e.oResumeDetail.code}})],1),a("el-tab-pane",{attrs:{label:"维修履历",name:"2"}},[a("ProgrammeImplementByCode",{attrs:{"mould-code":e.oResumeDetail.code}})],1),a("el-tab-pane",{attrs:{label:"转段履历",name:"3"}},[a("StageChangeByCode",{attrs:{"mould-id":e.oResumeDetail.id}})],1)],1)],1)])])},L=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title"},[a("span",{staticClass:"ganggang"},[e._v("-")]),e._v(" 基本信息")])}],O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"el-tablenew"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.list,"row-class-name":e.tableRowClassName,border:"",height:"calc(100vh - 337px)"}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"55"}}),a("el-table-column",{attrs:{prop:"code",label:"维修工单编号",align:"center",width:"160","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"mouldCode",label:"模具编号",align:"center",width:"160","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"mouldName",label:"模具名称",align:"center","min-width":"180","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"questionName",label:"问题",align:"center","min-width":"180","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"priority",label:"优先级",align:"center",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s("0"===t.row.priority?"普通":"优先")+" ")]}}])}),a("el-table-column",{attrs:{prop:"createUserName",label:"申请人",align:"center",width:"160"}}),a("el-table-column",{attrs:{prop:"planHour",label:"预计耗时",align:"center",width:"160"}}),a("el-table-column",{attrs:{prop:"date",label:"方案制定状态",align:"center",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(0===t.row.repairProjectStatus?"未制定":"已制定")+" ")]}}])}),a("el-table-column",{attrs:{prop:"date",label:"任务执行状态",align:"center",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(0===t.row.repairTaskExeStatus?"未执行":"已执行")+" ")]}}])}),a("el-table-column",{attrs:{prop:"date",label:"操作",width:"80px",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"defaultTextBtn",attrs:{type:"text"},on:{click:function(a){return e.implenmentNo(t.row,"find")}}},[a("svg-icon",{attrs:{"icon-class":"search"}}),e._v(" 查看 ")],1)]}}])})],1)],1),e.implementdialogVisible?a("div",{staticClass:"repairsty"},[a("get-repair",{attrs:{objstr:e.objstr},on:{DetailCallBack:e.DetailCallBack}})],1):e._e()])},N=[],A=a("72c7"),z=a("cee2"),B={name:"ProgrammeImplementByCode",directives:{elDragDialog:x["a"]},components:{"get-repair":z["a"]},props:{mouldCode:{type:String,required:!0}},data:function(){return{loading:!1,implementdialogVisible:!1,objstr:"",searchKey:{name:"",number:"",type:""},total:0,pageIndex:1,pageSize:1e4,priorityList:[{id:0,name:"普通"},{id:1,name:"优先"}],list:[]}},computed:{},mounted:function(){this.fetchDate()},methods:{DetailCallBack:function(e){this.implementdialogVisible=!1,"1"===e.result&&this.fetchDate()},tableRowClassName:function(e){e.row;var t=e.rowIndex;return t%2===1?"table-row":""},fetchDate:function(){var e=this;this.list=[],this.loading=!0;var t={mouldId:this.mouldCode,pageNum:this.pageIndex,pageSize:this.pageSize};Object(A["c"])(t).then((function(t){e.loading=!1,0===t.code&&(e.list=t.data.list)}))},implenmentNo:function(e,t){var a=JSON.parse(JSON.stringify(e));a.type=t,this.objstr=JSON.stringify(a),this.implementdialogVisible=!0}}},V=B,U=(a("84d8"),Object(g["a"])(V,O,N,!1,null,"cd5a1c18",null)),M=U.exports,P=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"el-tablenew"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.list,"row-class-name":e.tableRowClassName,border:"",height:"calc(100vh - 337px)"}},[a("el-table-column",{attrs:{prop:"date",label:"序号",align:"center",width:"55"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.$index+1)+" ")]}}])}),a("el-table-column",{attrs:{prop:"createTime",label:"时间",align:"center",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.createTime&&t.row.createTime.length>10?t.row.createTime.substring(0,10):t.row.createTime))])]}}])}),a("el-table-column",{attrs:{prop:"keepOrder",label:"保养工单号",align:"center",width:"160","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"keepTeamName",label:"保养表单名称",align:"center","min-width":"200","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"mouldCode",label:"模具编号",align:"center",width:"160","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"date",label:"任务状态",align:"center",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s("0"===t.row.status?"未执行":"1"===t.row.status?"延期":"2"===t.row.status?"强制关闭":"已执行")+" ")]}}])}),a("el-table-column",{attrs:{prop:"date",label:"执行时间",align:"center",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.executeTime&&t.row.executeTime.length>10?t.row.executeTime.substring(0,10):t.row.executeTime))])]}}])}),a("el-table-column",{attrs:{prop:"executeUserName",label:"执行人",align:"center",width:"160"}}),a("el-table-column",{attrs:{prop:"nonExecution",label:"未执行原因",align:"center","min-width":"180","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"nonExecutCause",label:"未执行原因描述",align:"center","min-width":"180","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"auditUserName",label:"审批人",align:"center",width:"160"}}),a("el-table-column",{attrs:{prop:"date",label:"操作",align:"center",width:"80",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"defaultTextBtn",attrs:{type:"text"},on:{click:function(a){return e.findInfo(t.row)}}},[a("svg-icon",{attrs:{"icon-class":"search"}}),e._v(" 查看 ")],1)]}}])})],1)],1),e.infoDailogVisible?a("maintailPlanLog",{attrs:{"info-obj":e.objInfo},on:{callbackFunc:e.callbackFunc}}):e._e()],1)},Q=[],H=a("3f98"),$=a("ed08"),G=a("e80c"),Z={name:"MaintainPlanImplementByCode",directives:{elDragDialog:x["a"]},components:{maintailPlanLog:G["a"]},props:{mouldCode:{type:String,required:!0}},data:function(){return{loading:!1,infoDailogVisible:!1,disabled:!1,dialogTitle:"",searchKey:{name:"",code:"",people:"",date:"",status:"",examine:""},pageIndex:1,pageSize:1e4,currentId:0,maintainObjList:[],forms:{name:"",day:"",delayreason:"",closreason:""},list:[],maintainList:[],objInfo:{auditIdea:null,auditResult:null,auditStatus:null,auditUser:null,carryDay:null,conclusion:null,createTime:"",devicesKeepItem:[],devicesName:null,endTime:null,executeTime:null,executeUser:null,executionId:null,formCode:null,id:0,keepOrder:null,keepPlanId:0,keepTeamName:null,nonExecutCause:null,nonExecution:null,note:null,planExecuteRecords:null,productDevicesIds:null,status:0}}},computed:{},mounted:function(){this.fetchDate()},methods:{findInfo:function(e){this.activeName="first",this.infoDailogVisible=!0,this.objInfo=e},callbackFunc:function(){this.infoDailogVisible=!1},tableRowClassName:function(e){e.row;var t=e.rowIndex;return t%2===1?"table-row":""},fetchDate:function(){var e=this;this.list=[],this.loading=!0;var t={keepOrder:this.searchKey.name+""?this.searchKey.name:null,mouldCode:this.mouldCode,executeUserName:this.searchKey.people+""?this.searchKey.people:null,executeTime:this.searchKey.date+""?Object($["b"])(this.searchKey.date,"{y}-{m}-{d} {h}:{i}:{s}"):null,taskStatus:""!==this.searchKey.status&&null!==this.searchKey.status?this.searchKey.status:"1,2,3",pageNum:this.pageIndex,pageSize:this.pageSize};Object(H["d"])(t).then((function(t){e.loading=!1,0===t.code&&(e.list=t.data.list)}))}}},q=Z,J=(a("7c44"),Object(g["a"])(q,P,Q,!1,null,"da1225d6",null)),Y=J.exports,W=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],key:e.tableKey,ref:"tableRef",attrs:{stripe:"",data:e.mouldTurnRecordList,border:"",fit:"","highlight-current-row":"","header-cell-style":e.headerClassName,height:e.tableHeight}},[a("el-table-column",{attrs:{label:"序号",type:"index",align:"center",width:"55"}}),a("el-table-column",{attrs:{label:"模具编号",prop:"code","min-width":"160px",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"模具名称",prop:"name","min-width":"200px",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"申请人",prop:"user.name",width:"150px",align:"center"}}),a("el-table-column",{attrs:{label:"申请转段时间",prop:"createTime",width:"160px",align:"center"}}),a("el-table-column",{attrs:{label:"审批结果",prop:"auditStatus","min-width":"160px",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"操作",width:"80",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-button",{staticClass:"defaultTextBtn",attrs:{type:"text"},on:{click:function(t){return e.handleDetail(i)}}},[a("svg-icon",{attrs:{"icon-class":"search"}}),e._v(" 详情 ")],1)]}}])})],1),e.detailDialogVisible?a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],staticClass:"dialogs",attrs:{title:"转段记录详情",visible:e.detailDialogVisible,"close-on-click-modal":!1,width:"600px"},on:{"update:visible":function(t){e.detailDialogVisible=t}}},[a("StageChangeDetail",{attrs:{"is-show-back-btn":!0,"mould-turn-obj":e.oMouldTurn},on:{StageChangeDetailCall:e.stageChangeDetailCall}})],1):e._e()],1)},K=[],X=(a("a9e3"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"scrapsApplyForm",attrs:{model:e.mouldTurnDetailForm,"label-width":"90px"}},[a("el-form-item",{attrs:{label:"模具编号"}},[a("span",[e._v(e._s(e.mouldTurnDetailForm.code))])]),a("el-form-item",{attrs:{label:"模具类型"}},[a("span",[e._v(e._s(e.mouldTurnDetailForm.name))])]),a("el-form-item",{attrs:{label:"转段原因"}},[a("span",[e._v(e._s(e.mouldTurnDetailForm.reason))])]),a("el-form-item",{attrs:{label:"转段时间"}},[a("span",[e._v(e._s(e.mouldTurnDetailForm.createTime))])]),a("el-form-item",{attrs:{label:"附件"}},e._l(e.fileList,(function(t,i){return a("el-link",{key:i,on:{click:function(a){return e.handleDownFile(t.path)}}},[e._v(e._s(t.name)+"."+e._s(t.suffix))])})),1),a("el-form-item",{attrs:{label:"审核信息"}})],1),a("el-table",{attrs:{stripe:"",data:e.mouldTurnRecordList,border:"",fit:"","highlight-current-row":"","header-cell-style":e.headerClassName,height:"250px"}},[a("el-table-column",{attrs:{label:"审批人",prop:"auditUserName",width:"100px",align:"center"}}),a("el-table-column",{attrs:{label:"审批结果",prop:"auditNode",width:"140px",align:"center"}}),a("el-table-column",{attrs:{label:"审核时间",prop:"auditTime",width:"160px",align:"center"}}),a("el-table-column",{attrs:{label:"审核意见",prop:"auditIdea","min-width":"150px",align:"center"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowfooter,expression:"isShowfooter"}],staticClass:"footer"},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.handleBack}},[e._v("返回")])],1)],1)}),ee=[],te=a("2423"),ae={name:"StageChangeDetail",props:{mouldTurnObj:{type:Object,required:!0},isShowBackBtn:{type:Boolean,required:!1}},data:function(){return{mouldTurnDetailForm:{},isShowfooter:!0,fileList:[{name:"",url:""}],mouldTurnRecordList:[]}},created:function(){void 0!==this.isShowBackBtn&&"boolean"===typeof this.isShowBackBtn&&(this.isShowfooter=this.isShowBackBtn),this.mouldTurnDetailForm=Object(l["a"])({},this.mouldTurnObj);var e=[];this.mouldTurnDetailForm.baseFiles.length>0&&(e=this.mouldTurnDetailForm.baseFiles),this.fileList=e,this.getDevicesClassifyList()},methods:{headerClassName:function(e){e.row,e.rowIndex;return"background-color: #FAFAFA"},handleBack:function(){this.$emit("StageChangeDetailCall",!1)},getDevicesClassifyList:function(){var e=this,t={executionId:this.mouldTurnDetailForm.executionId};Object(te["o"])(t).then((function(t){0===t.code&&(e.mouldTurnRecordList=t.data)}))},handleDownFile:function(e){var t=window.configs.api+"/attachment/downByPath?path="+e,a=window.open(encodeURI(t));setTimeout((function(){a.close()}),3e3)}}},ie=ae,se=(a("045f"),Object(g["a"])(ie,X,ee,!1,null,"14b85610",null)),le=se.exports,ne={name:"StageChangeByCode",directives:{elDragDialog:x["a"]},components:{StageChangeDetail:le},props:{mouldId:{type:Number,required:!0}},data:function(){return{total:0,listQuery:{page:1,limit:1e5,mouldDeviceId:""},devicesClassifys:[],tableHeight:0,tableKey:Math.random(),tableLoading:!0,mouldTurnRecordList:[],oMouldTurn:{},detailDialogVisible:!1}},created:function(){this.listQuery.mouldDeviceId=this.mouldId,this.getResumeList()},methods:{headerClassName:function(e){e.row,e.rowIndex;return"background-color: #FAFAFA"},stageChangeDetailCall:function(){this.detailDialogVisible=!1},handleDetail:function(e){this.oMouldTurn=Object(l["a"])({},e),this.detailDialogVisible=!0},getResumeList:function(){var e=this;this.tableLoading=!0,Object(o["d"])(this.listQuery).then((function(t){0===t.code&&(e.mouldTurnRecordList=t.data),e.tableHeight=window.screen.availHeight-390,e.tableLoading=!1}))}}},oe=ne,re=(a("c1e6"),Object(g["a"])(oe,W,K,!1,null,"73ab83c2",null)),ue=re.exports,ce={name:"ResumeDetail",components:{StageChangeByCode:ue,ProgrammeImplementByCode:M,MaintainPlanImplementByCode:Y},props:{resumeObj:{type:Object,required:!0}},data:function(){return{imageUrl:window.configs.api,oResumeDetail:{name:""},paramsList:[],typeList:[{id:0,value:"主体"},{id:1,value:"镶体"},{id:2,value:"嵌体"}],activeTab:"1"}},created:function(){this.oResumeDetail=Object(l["a"])({},this.resumeObj),this.oResumeDetail.extendAttr&&this.oResumeDetail.extendAttr.length>0&&(this.paramsList=JSON.parse(this.oResumeDetail.extendAttr))},mounted:function(){},methods:{handleBack:function(){this.$emit("ResumeDetailCall")},handleDownload:function(){var e=this,t=this.imageUrl+this.oResumeDetail.webPath,a=new Image;a.crossOrigin="",a.src=t,a.onload=function(){var t=e.getBase64Image(a),i=document.createElement("a"),s=new MouseEvent("click");i.download="模具二维码",i.href=t,i.dispatchEvent(s)}},getBase64Image:function(e){var t=document.createElement("canvas");t.width=e.width,t.height=e.height;var a=t.getContext("2d");a.drawImage(e,0,0,e.width,e.height);var i=e.src.substring(e.src.lastIndexOf(".")+1).toLowerCase(),s=t.toDataURL("image/"+i);return s}}},de=ce,me=(a("92a8"),Object(g["a"])(de,I,L,!1,null,"8e685422",null)),pe=me.exports,ge={name:"Resume",directives:{elDragDialog:x["a"]},components:{Pagination:r["a"],ResumeEdit:R,ResumeDetail:pe,StageChangeApply:f},data:function(){return{total:0,dialogTitleEdit:"新增模具",listQuery:{pageNum:1,pageSize:10,code:"",mouldName:"",turnStatus:"",mouldStatus:"",startDate:"",endDate:""},turnStatusList:[{id:0,value:"试制阶段"},{id:1,value:"量产阶段"},{id:2,value:"项目EOP"},{id:8,value:"报废"}],mouldStatusList:[{id:0,value:"正常"},{id:1,value:"使用中"},{id:2,value:"EOP"},{id:3,value:"报废"}],tableHeight:0,tableKey:Math.random(),tableLoading:!0,resumeList:[],multipleSelection:[],oResume:{},detailDialogVisible:!1,editDialogVisible:!1,scrapDialogVisible:!1,stopUseDialogVisible:!1,stageChangeDialogVisible:!1,dialogTitle:"报废申请",setTableTitle:!1}},computed:{resumeListFilter:function(){var e=Object(n["a"])(this.resumeList);return e.map((function(e){null!==e.process&&null!==e.lifeTime&&1*e.lifeTime!==0?e.process>=e.lifeTime?(e.usePercentage=100,e.useStatus=0):(e.usePercentage=(1*e.process/e.lifeTime*1*100).toFixed(4),e.useStatus=1):(e.usePercentage=0,e.useStatus=1)})),e}},created:function(){var e=this;this.getResumeList(),this.computedTableHeight(),window.onresize=function(){return function(){e.computedTableHeight()}()}},methods:{headerClassName:function(e){e.row,e.rowIndex;return"background-color: #FAFAFA"},resumeDetailCall:function(){this.detailDialogVisible=!1},resumeEditCall:function(e){this.editDialogVisible=!1,e&&this.getResumeList()},handleSelectionChange:function(e){this.multipleSelection=e},scrapsApplyCall:function(e){this.detailDialogVisible=!1,this.editDialogVisible=!1,this.scrapDialogVisible=!1,this.stopUseDialogVisible=!1,this.stageChangeDialogVisible=!1,e&&this.getResumeList()},tableRowClassName:function(e){var t=e.row;e.rowIndex;return 1===t.status?"warning-row":2===t.status?"info-row":""},handleFilter:function(){this.listQuery.page=1,this.getResumeList()},handleReset:function(){this.listQuery.pageNum=1,this.listQuery.code="",this.listQuery.mouldName="",this.listQuery.turnStatus="",this.listQuery.status="",this.getResumeList()},handleDelte:function(){var e=this,t=this.optSelectedTable();0!==t.length?this.$confirm("确定删除吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.deleteRequestById(t)})):this.$message({message:"您还没有选择数据!",type:"warning"})},handleDetail:function(e){this.oResume=Object(l["a"])({},e),this.detailDialogVisible=!0},handleAdd:function(){this.dialogTitleEdit="新增模具",this.oResume={},this.editDialogVisible=!0},handleEdit:function(e){this.dialogTitleEdit="编辑模具",this.oResume=Object(l["a"])({},e),this.editDialogVisible=!0},handleScrap:function(e){this.oResume=Object(l["a"])({},e),this.scrapDialogVisible=!0},handleStopUse:function(e){this.oResume=Object(l["a"])({},e),this.stopUseDialogVisible=!0},handleStageChange:function(e){8!==e.status?1!==e.auditStatus?(this.oResume=Object(l["a"])({},e),this.stageChangeDialogVisible=!0):this.$message({message:"转段申请已提交!",type:"warning"}):this.$message({message:"模具为报废状态不能转段!",type:"warning"})},getResumeList:function(){var e=this;this.tableLoading=!0;var t={pageNum:this.listQuery.pageNum,pageSize:this.listQuery.pageSize,code:this.listQuery.code,mouldName:this.listQuery.mouldName,turnStatus:this.listQuery.turnStatus,status:this.listQuery.mouldStatus};Object(o["e"])(t).then((function(t){0===t.code&&(e.resumeList=t.data.list),e.total=t.data.total,e.tableLoading=!1}))},deleteRequestById:function(e){var t=this;this.tableLoading=!0,Object(o["b"])(e).then((function(e){t.tableLoading=!1,0===e.code&&t.getResumeList()}))},optSelectedTable:function(){var e=[];return this.multipleSelection.length>0&&this.multipleSelection.map((function(t,a){e.push(t.id)})),e.toString()},computedTableHeight:function(){var e=document.body.clientHeight;e=e<768?768:e,this.tableHeight=e-352}}},he=ge,fe=(a("d793"),Object(g["a"])(he,i,s,!1,null,"b0eaecf8",null));t["default"]=fe.exports},"20cc":function(e,t,a){"use strict";a.d(t,"e",(function(){return s})),a.d(t,"c",(function(){return l})),a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return o})),a.d(t,"d",(function(){return r}));var i=a("b775");function s(e){return Object(i["a"])({url:window.configs.api+"/mouldDevices/findList",method:"get",params:e})}function l(e){return Object(i["a"])({url:window.configs.api+"/mouldDevices/save",method:"post",data:e})}function n(e){return Object(i["a"])({url:window.configs.api+"/mouldDevices/delete",method:"get",params:{ids:e}})}function o(e){return Object(i["a"])({url:window.configs.api+"/mouldDevices/saveTurn",method:"post",data:e})}function r(e){return Object(i["a"])({url:window.configs.api+"/mouldDevices/findTurn",method:"get",params:e})}},2125:function(e,t,a){},2247:function(e,t,a){},2423:function(e,t,a){"use strict";a.d(t,"p",(function(){return s})),a.d(t,"h",(function(){return l})),a.d(t,"l",(function(){return n})),a.d(t,"c",(function(){return o})),a.d(t,"t",(function(){return r})),a.d(t,"k",(function(){return u})),a.d(t,"u",(function(){return c})),a.d(t,"j",(function(){return d})),a.d(t,"o",(function(){return m})),a.d(t,"g",(function(){return p})),a.d(t,"n",(function(){return g})),a.d(t,"f",(function(){return h})),a.d(t,"q",(function(){return f})),a.d(t,"b",(function(){return b})),a.d(t,"e",(function(){return v})),a.d(t,"r",(function(){return w})),a.d(t,"a",(function(){return y})),a.d(t,"d",(function(){return C})),a.d(t,"m",(function(){return x})),a.d(t,"i",(function(){return _})),a.d(t,"s",(function(){return S})),a.d(t,"v",(function(){return F}));var i=a("b775");function s(e){return Object(i["a"])({url:window.configs.api+"/jbpmDeployment/findList",method:"get",params:e})}function l(e){return Object(i["a"])({url:window.configs.api+"/jbpmDeployment/save",method:"post",data:e})}function n(){return Object(i["a"])({url:window.configs.api+"/jbpmDeployment/findJbpmFormList",method:"get"})}function o(e){return Object(i["a"])({url:window.configs.api+"/jbpmDeployment/delete",method:"get",params:{ids:e}})}function r(){return Object(i["a"])({url:window.configs.e2cUrl+"/user/findList",method:"get"})}function u(e){return Object(i["a"])({url:window.configs.api+"/jbpmExecution/findWaitTaskList",method:"get",params:e})}function c(e){return Object(i["a"])({url:window.configs.api+"/jbpmExecution/findHistTaskList",method:"get",params:e})}function d(e,t){return Object(i["a"])({url:window.configs.api+"/devicesRepai/findList",method:"get",params:{id:e}})}function m(e){return Object(i["a"])({url:window.configs.api+"/jbpmExecution/findHistTaskDeatilList",method:"get",params:e})}function p(e){return Object(i["a"])({url:window.configs.api+"/jbpmExecution/doTask",method:"post",data:e})}function g(e){return Object(i["a"])({url:window.configs.api+"/devicesKeepTask/getDevicesKeepTask",method:"get",params:{id:e}})}function h(e){return Object(i["a"])({url:window.configs.api+"/devicesScrap/findList",method:"get",params:{devicesScrapId:e}})}function f(e){return Object(i["a"])({url:window.configs.api+"/devicesCheckTeam/findList",method:"get",params:e})}function b(e){return Object(i["a"])({url:window.configs.api+"/devicesCheckTeam/save",method:"post",data:e})}function v(e){return Object(i["a"])({url:window.configs.api+"/devicesCheckTeam/delete",method:"get",params:{ids:e}})}function w(e){return Object(i["a"])({url:window.configs.api+"/devicesCheckItem/findList",method:"get",params:e})}function y(e){return Object(i["a"])({url:window.configs.api+"/devicesCheckItem/save",method:"post",data:e})}function C(e){return Object(i["a"])({url:window.configs.api+"/devicesCheckItem/delete",method:"get",params:{ids:e}})}function x(){return Object(i["a"])({url:window.configs.e2cUrl+"/devicesClassify/findList",method:"get"})}function _(e){return Object(i["a"])({url:window.configs.e2cUrl+"/productDevices/findList",method:"get",param:e})}function S(e){return Object(i["a"])({url:window.configs.api+"/devicesCheck/findList",method:"get",params:e})}function F(e){return Object(i["a"])({url:window.configs.api+"/mouldDevices/findOneById",method:"get",params:{id:e}})}},"2ac3":function(e,t,a){"use strict";a.d(t,"e",(function(){return s})),a.d(t,"g",(function(){return l})),a.d(t,"d",(function(){return n})),a.d(t,"f",(function(){return o})),a.d(t,"a",(function(){return r})),a.d(t,"c",(function(){return u})),a.d(t,"b",(function(){return c}));var i=a("b775");function s(e){return Object(i["a"])({url:window.configs.api+"/mouldStorageHouse/findStorageList",method:"get",params:e})}function l(e){return Object(i["a"])({url:window.configs.api+"/mouldStorageHouse/saveStorage",method:"post",data:e})}function n(e){return Object(i["a"])({url:window.configs.api+"/mouldStorageHouse/findLocationList",method:"get",params:e})}function o(e){return Object(i["a"])({url:window.configs.api+"/mouldStorageHouse/saveLocation",method:"post",data:e})}function r(e){return Object(i["a"])({url:window.configs.api+"/mouldStorageHouse/deleteLocation",method:"get",params:{ids:e}})}function u(e){return Object(i["a"])({url:window.configs.api+"/mouldStorageHouse/findEmptyLocationList",method:"get",params:e})}function c(e){return Object(i["a"])({url:window.configs.api+"/logisticsProduct/getAllCode",method:"get",params:e})}},"405c":function(e,t,a){},4090:function(e,t,a){},6260:function(e,t,a){},"6b8d":function(e,t,a){"use strict";var i=a("d612"),s=a.n(i);s.a},"7c44":function(e,t,a){"use strict";var i=a("2247"),s=a.n(i);s.a},"84d8":function(e,t,a){"use strict";var i=a("2125"),s=a.n(i);s.a},9143:function(e,t,a){"use strict";var i=a("0602"),s=a.n(i);s.a},"92a8":function(e,t,a){"use strict";var i=a("6260"),s=a.n(i);s.a},a00e:function(e,t,a){"use strict";var i=a("af4b"),s=a.n(i);s.a},af4b:function(e,t,a){},c1e6:function(e,t,a){"use strict";var i=a("405c"),s=a.n(i);s.a},d49b:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAYAAAA5ZDbSAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjBCNTQ2Nzc3RDc4NzExRUFCMEUwRTE1NTIxREZCNjlFIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjBCNTQ2Nzc4RDc4NzExRUFCMEUwRTE1NTIxREZCNjlFIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MEI1NDY3NzVENzg3MTFFQUIwRTBFMTU1MjFERkI2OUUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MEI1NDY3NzZENzg3MTFFQUIwRTBFMTU1MjFERkI2OUUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7hBaqCAAAGOUlEQVR42uydTW8bVRSGrx0739/OpxLoAtTAus0PaNcoCCGoKCxZgKj4CSyAn1BEiypWQIsQmwrEjvyAlj2tYFFI00j5jhMnsZOY8zozkTMk9jhxZu49877Sq6quE9fn8T1z7zl3rlPlctmcQWnxtPia+Kr4snhC3CVuM9R5tCveEj8XPxU/Fs+KH4kPGv1lqQYBT4o/Eb8vfoksItW/4u/FX4nnmg04J/5c/KG4lbGOVUXxPfFn4uVmAH7X+9QMMbZWaUl8S/xjvWvpacqIv/Z+AeHaJzB54DHKNDqCOz2wbzCOTugX8Q1xIQxgfBp+Fs8wbk7pofht8V69FH2bcJ3UjMeu5gi+4eV1yl3dFN8/CTCWQn9yQuW8VsSviReDKfpLwlWhQfEXwRH8svgvcZbxUaGS+FXxP/4I/phwVSnrMa2MYEB+Zg7rzJQeoV59ye8KEa4+gek0AF9nLNTqGgBfYRzU6ioATzEOajUFwOOMg1qNYxaNLSJs4utUEYDLjINepRkCAqYImCJgioApAqYImCLgBCkTx4sWCgWzs7NjisWiOTg4MJprLXhv2Wy24ra2NtPV1RXp60daycJLra2tmZWVFZPUAtrAwIAZHBw0qVRKH+DFxUWzvr6e+LTZ19dnhoeHdV2DNzc3CdcTstju7q4uwIRblTYlPeMypQrw3t4eyVZJ3Qgm4OPa39/XBZht53jiwUKHchEwAVMETFmrDEPQ2Pq1tbW1Yn+pg3o6AStQe3u76e/vN93d3cdmwijgrK6uRrbsYYq+oJE7NjZ2DK7/OKCPjIzwGuzyehXdn0zm9GSHFmAQPgE7NHo7OzvrPg+AbSzmEHAIwGF6t7VGOAErECZZUTXxCbjJ1+AwnZ/t7W2OYFe1tLRU89+xvyyfzxOwy+l3bm6uAjIorIMXFhasXQez0BFSgDs/P1/ZGdnR0XGUlm1NzQR8BmGLrwtQmaITJOdHMAoMSJmlUqmyW5FSBDi4vxh3D2DvNaUgRZ+0eRyPoW5MOQ641p0BANzT00OyrgIG3KGh2sda53K5o6Y8ATs4cuvVfFH4Hx0dNek0FwnORKC3t7ehG7ZQkECT3sYGAAGfAPcsuybQx43qLj4CPkdaPs+WGHw4cE8uATs2W25ESZ5Zp22GW2+2HFa4DuN3YWdk0q7JaZtHbjNhtLS0HKX6JEFO2wr3IoS18cTEhLX7p9QDjuLsCqRpFELOmgX8SZvfE7ZdmSTB9YUOFCDhjoSwwt5n/Aw+IBB6w8vLy9YfTZGxBW6zJlRhhVEMSBsbGzX3M6MahrsXALf62o3H/XmCzW3KTJJGblB4XVyXMZKDR0wAHNIwllj+qD1J+GDiuY1kg8QAjhNu9f8BFS9sw8Gdgv5oxmNhT6VDNvAPeSNgi+D68o8aPI8wkpG2ozoeyepZNGajGsuHSOe2va9YAGsuNCBd27SrJLZ1sOZjlQA46lWBE4UOTbLlxnACvkCh6hX3pgMCvmChajY+Ph7b9iECjkBYUyNdxwGZgCMSqmIErFioezNFUwRMEbCVimuplI7jDeJ6FNc1KS6hU1V9zENUwCMDXL0PCnDxLSxJOQUe73Nra+vY+0XDJZK4RwkYN2n7QoMcf/f3NmmE7Y9SHMMUPIUHt9aoAoz+b/BsC4xiOGnyz79UlaJRsgNk6rAREdUI5ncXRizV313oi98+GuE8oMwvNGKhgyJgioApAqYImCJgioCTBbjIMKhVEYDzjINa5QH4BeOgVi8A+AnjoFZPAPgPxkGtHgPwLOOgVrPoJgHyM/Ek46FKc+JLgIvtjd8xHuoEpgcprx2M0fu3mMekK1n/il/BKE5XDed7jIsafesxNamqDR05b8mUY3yc1rJ4yvvzWC0aD9xifJzXpz7cIGDogfguY+SsvhH/UP1A6oQ9d5ho/SSeYbyc0kPxOybQPEqfMgN7T/wbY+aMfvWY/a8zeFo/uCB+k+naCYHRWx4zExYwhDvFPvI+GUuMo3UCk5seo9JpTwqzowMTr9fFdww3B9igoscCTO7Xe3KqwRsbJr2l1AfiCcY6Uj03h+XH234RI4xSZ7xzBSN/WnxdfEV82YPfLc6SxbmEdLvpQXxqDtu5v4sfmcO+QUP6T4ABAOD6/33F96JnAAAAAElFTkSuQmCC"},d612:function(e,t,a){},d793:function(e,t,a){"use strict";var i=a("eeca"),s=a.n(i);s.a},e80c:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"dialogs",attrs:{visible:e.infoDailogVisible,"close-on-click-modal":!1,title:"保养表单详情",width:"1000px"},on:{"update:visible":function(t){e.infoDailogVisible=t},closed:function(t){return e.closeDialog()}}},[a("el-row",[a("el-col",{staticClass:"titsty",attrs:{span:12}},[a("span",[e._v("保养工单号:")]),e._v(" "+e._s(e.objInfo.keepOrder)+" ")]),a("el-col",{staticClass:"titsty",attrs:{span:12}},[a("span",[e._v("保养表单名称:")]),e._v(" "+e._s(e.objInfo.keepTeamName?e.objInfo.keepTeamName:e.objInfo.teamName)+" ")]),a("el-col",{staticClass:"titsty",attrs:{span:12}},[a("span",[e._v("模具编号:")]),e._v(" "+e._s(e.objInfo.mouldCode)+" ")]),a("el-col",{staticClass:"titsty",attrs:{span:4}},[a("span",[e._v("执行人员:")]),e._v(" "+e._s(e.objInfo.executeUserName)+" ")]),a("el-col",{staticClass:"titsty",attrs:{span:4}},[a("span",[e._v("任务状态:")]),e._v(" "+e._s("0"===e.objInfo.status?"未执行":"1"===e.objInfo.status?"延期":"2"===e.objInfo.status?"强制关闭":"已执行")+" ")]),a("el-col",{staticClass:"titsty",attrs:{span:4}},[a("span",[e._v("执行时间:")]),e._v(" "+e._s(e.objInfo.executeTime&&e.objInfo.executeTime.length>10?e.objInfo.executeTime.substring(0,10):e.objInfo.executeTime)+" ")])],1),a("el-tabs",{staticClass:"el-tablenew",model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"保养记录",name:"first"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.planExecuteRecords,"row-class-name":e.tableRowClassName,border:"",height:"500px"}},[a("el-table-column",{attrs:{prop:"date",label:"序号",align:"center",width:"50px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.$index+1)+" ")]}}])}),a("el-table-column",{attrs:{prop:"name",label:"项目名称",align:"center",width:"320px"}}),a("el-table-column",{attrs:{label:"选项",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[""!==t.row.result?a("span",[e._v(e._s(t.row.result)+e._s(t.row.reason))]):e._e(),""===t.row.result?a("span",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.row.from,"row-class-name":e.tableRowClassName,border:""}},e._l(t.row.headers,(function(t,i){return a("el-table-column",{key:i,attrs:{label:t.value,align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v(" "+e._s(a.row[t.key])+" ")]}}],null,!0)})})),1)],1):e._e()]}}])})],1)],1),a("el-tab-pane",{attrs:{label:"审批记录",name:"second"}},e._l(e.logList,(function(t,i){return a("div",{key:i,staticClass:"logsty"},[a("div",{staticClass:"titlog"},[e._v(" 审批记录 ")]),a("el-row",[a("el-col",{staticClass:"titsty",attrs:{span:6}},[a("span",[e._v("未执行原因:")]),e._v(" "+e._s(e.objInfo.nonExecution)+" ")]),a("el-col",{staticClass:"titsty",attrs:{span:6}},[a("span",[e._v("申请人:")]),e._v(" "+e._s(e.objInfo.delayUser)+" ")]),a("el-col",{staticClass:"titsty",attrs:{span:6}},[a("span",[e._v("申请时间:")]),e._v(" "+e._s(e.objInfo.delayTime)+" ")]),a("el-col",{staticClass:"titsty",attrs:{span:6}},[a("span",[e._v("审批人:")]),e._v(" "+e._s(t.auditUserName)+" ")]),a("el-col",{staticClass:"titsty",attrs:{span:6}},[a("span",[e._v("审批时间:")]),e._v(" "+e._s(t.auditTime)+" ")]),a("el-col",{staticClass:"titsty",attrs:{span:6}},[a("span",[e._v("审批结果:")]),e._v(e._s(1===t.auditResult?"同意":"不同意")+" ")]),a("el-col",{staticClass:"titsty",attrs:{span:6}},[a("span",[e._v("审批意见:")]),e._v(e._s(t.auditIdea)+" ")]),a("el-col",{staticClass:"titsty",attrs:{span:12}},[a("span",[e._v("未执行原因描述:")]),e._v(" "+e._s(e.objInfo.nonExecutCause)+" ")])],1)],1)})),0)],1)],1)},s=[],l=(a("b0c0"),a("b64b"),a("b85c")),n=a("2423"),o={props:{infoObj:{type:Object,required:!0}},data:function(){return{infoDailogVisible:!1,logList:[],planExecuteRecords:[],activeName:"first",objInfo:{delayUser:"",delayTime:"",auditIdea:null,auditResult:null,auditStatus:null,auditUser:null,carryDay:null,conclusion:null,createTime:"",mouldKeepItem:[],mouldCode:null,endTime:null,executeTime:null,executeUser:null,executionId:null,formCode:null,id:0,keepOrder:null,keepPlanId:0,keepTeamName:null,nonExecutCause:null,nonExecution:null,note:null,planExecuteRecords:null,productDevicesIds:null,status:0}}},created:function(){if(this.infoDailogVisible=!0,this.objInfo=this.infoObj,this.planExecuteRecords=[],this.objInfo.planExecuteRecords){var e,t=Object(l["a"])(this.objInfo.mouldKeepItem);try{for(t.s();!(e=t.n()).done;){var a,i=e.value,s={name:i.name},n=Object(l["a"])(this.objInfo.planExecuteRecords);try{for(n.s();!(a=n.n()).done;){var o=a.value;if(o.keepItemId===i.id){if("1"===o.keepItemResult)s.result="合格",s.reason="";else if("0"===o.keepItemResult)s.result="不合格",s.reason=o.reason;else{s.result="",s.from=JSON.parse(o.keepItemResult);for(var r=JSON.parse(i.lists[0].columns),u=Object.keys(r),c=[],d=0,m=u;d<m.length;d++){var p=m[d];c.push({value:r[p],key:p})}s.headers=c}break}}}catch(g){n.e(g)}finally{n.f()}this.planExecuteRecords.push(s)}}catch(g){t.e(g)}finally{t.f()}}console.log(this.planExecuteRecords),this.getFindHistTaskDeatilLists()},methods:{tableRowClassName:function(e){e.row;var t=e.rowIndex;return t%2===1?"table-row":""},getFindHistTaskDeatilLists:function(){var e=this,t={executionId:this.objInfo.executionId};Object(n["o"])(t).then((function(t){0===t.code&&(e.logList=t.data)}))},closeDialog:function(){this.$emit("callbackFunc",{})}}},r=o,u=(a("a00e"),a("2877")),c=Object(u["a"])(r,i,s,!1,null,"5391280c",null);t["a"]=c.exports},e8ce:function(e,t,a){"use strict";var i=a("4090"),s=a.n(i);s.a},eba4:function(e,t,a){},eeca:function(e,t,a){}}]);