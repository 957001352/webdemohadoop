(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cc6036de"],{"1be3":function(t,e,i){},"2ac3":function(t,e,i){"use strict";i.d(e,"e",(function(){return s})),i.d(e,"g",(function(){return a})),i.d(e,"d",(function(){return r})),i.d(e,"f",(function(){return n})),i.d(e,"a",(function(){return c})),i.d(e,"c",(function(){return d})),i.d(e,"b",(function(){return l}));var o=i("b775");function s(t){return Object(o["a"])({url:window.configs.api+"/mouldStorageHouse/findStorageList",method:"get",params:t})}function a(t){return Object(o["a"])({url:window.configs.api+"/mouldStorageHouse/saveStorage",method:"post",data:t})}function r(t){return Object(o["a"])({url:window.configs.api+"/mouldStorageHouse/findLocationList",method:"get",params:t})}function n(t){return Object(o["a"])({url:window.configs.api+"/mouldStorageHouse/saveLocation",method:"post",data:t})}function c(t){return Object(o["a"])({url:window.configs.api+"/mouldStorageHouse/deleteLocation",method:"get",params:{ids:t}})}function d(t){return Object(o["a"])({url:window.configs.api+"/mouldStorageHouse/findEmptyLocationList",method:"get",params:t})}function l(t){return Object(o["a"])({url:window.configs.api+"/logisticsProduct/getAllCode",method:"get",params:t})}},"520f":function(t,e,i){"use strict";var o=i("1be3"),s=i.n(o);s.a},"683d":function(t,e,i){"use strict";i.d(e,"e",(function(){return s})),i.d(e,"f",(function(){return a})),i.d(e,"h",(function(){return r})),i.d(e,"k",(function(){return n})),i.d(e,"m",(function(){return c})),i.d(e,"o",(function(){return d})),i.d(e,"d",(function(){return l})),i.d(e,"c",(function(){return u})),i.d(e,"g",(function(){return p})),i.d(e,"l",(function(){return h})),i.d(e,"j",(function(){return m})),i.d(e,"n",(function(){return f})),i.d(e,"a",(function(){return b})),i.d(e,"i",(function(){return g})),i.d(e,"b",(function(){return v})),i.d(e,"p",(function(){return y}));var o=i("b775");function s(t){return Object(o["a"])({url:window.configs.api+"/injectionMolding/findList",method:"get",params:t})}function a(t){return Object(o["a"])({url:window.configs.api+"/injectionMolding/findPlanList",method:"post",data:t})}function r(t){return Object(o["a"])({url:window.configs.api+"/injectionMolding/insert",method:"post",data:t})}function n(t){return Object(o["a"])({url:window.configs.api+"/injectionMolding/moveUpDownCancel",method:"post",data:t})}function c(t){return Object(o["a"])({url:window.configs.api+"/injectionMolding/stop",method:"post",data:t})}function d(t){return Object(o["a"])({url:window.configs.api+"/injectionMolding/update",method:"post",data:t})}function l(){return Object(o["a"])({url:window.configs.e2cUrl+"/productDevices/findTreeList",method:"get"})}function u(t){return Object(o["a"])({url:window.configs.api+"/craftModel/findByProductCode",method:"get",params:t})}function p(t){return Object(o["a"])({url:window.configs.api+"/reworkInjection/findList",method:"get",params:t})}function h(t){return Object(o["a"])({url:window.configs.api+"/reworkInjection/moveUp",method:"post",data:t})}function m(t){return Object(o["a"])({url:window.configs.api+"/reworkInjection/moveDown",method:"post",data:t})}function f(t){return Object(o["a"])({url:window.configs.api+"/reworkInjection/stop",method:"post",data:t})}function b(t){return Object(o["a"])({url:window.configs.api+"/reworkInjection/cancel",method:"post",data:t})}function g(t){return Object(o["a"])({url:window.configs.api+"/reworkInjection/insert",method:"post",data:t})}function v(t){return Object(o["a"])({url:window.configs.api+"/reworkInjection/createProductCode",method:"get",params:t})}function y(t){return Object(o["a"])({url:window.configs.api+"/reworkInjection/update",method:"post",data:t})}},"6ace":function(t,e,i){"use strict";i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return r}));var o=i("b775");function s(t){return Object(o["a"])({url:window.configs.api+"/attachment/upload",method:"post",data:t,heards:{"Content-Type":"multipart/form-data"}})}function a(t){return Object(o["a"])({url:window.configs.e2cUrl+"/productDevices/findList",method:"get",params:t})}function r(){return Object(o["a"])({url:window.configs.e2cUrl+"/devicesClassify/findList",method:"get"})}},a15b:function(t,e,i){"use strict";var o=i("23e7"),s=i("44ad"),a=i("fc6a"),r=i("a640"),n=[].join,c=s!=Object,d=r("join",",");o({target:"Array",proto:!0,forced:c||!d},{join:function(t){return n.call(a(this),void 0===t?",":t)}})},ce39:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"content1"},[t._m(0),i("div",{staticClass:"contentBody"},[i("el-row",[i("el-col",{attrs:{span:6}},[i("span",{staticClass:"seachname"},[t._v(" 物料长代码: ")]),i("el-select",{staticClass:"inputCls",staticStyle:{width:"calc(100% - 120px)"},attrs:{placeholder:"物料长代码",filterable:""},on:{change:function(e){return t.handleMateriel()}},model:{value:t.searchKey.productCode,callback:function(e){t.$set(t.searchKey,"productCode",e)},expression:"searchKey.productCode"}},t._l(t.materielList,(function(t,e){return i("el-option",{key:e,attrs:{label:t.code,value:e}})})),1)],1),i("el-col",{attrs:{span:6}},[i("span",{staticClass:"seachname"},[t._v(" 产品名称: ")]),i("el-input",{staticClass:"inputCls",staticStyle:{width:"calc(100% - 120px)"},attrs:{disabled:!0,placeholder:"产品名称",clearable:""},model:{value:t.searchKey.productName,callback:function(e){t.$set(t.searchKey,"productName",e)},expression:"searchKey.productName"}})],1),i("el-col",{attrs:{span:6}},[i("span",{staticClass:"seachname"},[t._v(" 计划生产数量: ")]),i("el-input",{staticClass:"inputCls",staticStyle:{width:"calc(100% - 120px)"},attrs:{placeholder:"计划生产数量",clearable:""},on:{input:function(e){t.searchKey.productNum=t.searchKey.productNum.replace(/[^0-9]/g,"")}},model:{value:t.searchKey.productNum,callback:function(e){t.$set(t.searchKey,"productNum",e)},expression:"searchKey.productNum"}})],1),i("el-col",{attrs:{span:6}},[i("span",{staticClass:"seachname"},[t._v(" 客户名称: ")]),i("el-select",{staticClass:"inputCls",staticStyle:{width:"calc(100% - 120px)"},attrs:{placeholder:"客户名称",filterable:""},model:{value:t.searchKey.customer,callback:function(e){t.$set(t.searchKey,"customer",e)},expression:"searchKey.customer"}},t._l(t.customerList,(function(t,e){return i("el-option",{key:e,attrs:{label:t.name,value:t.id}})})),1)],1)],1),i("el-row",[i("el-col",{attrs:{span:6}},[i("span",{staticClass:"seachname"},[t._v(" 发货时间: ")]),i("el-date-picker",{staticClass:"inputCls",staticStyle:{width:"calc(100% - 120px)"},attrs:{editable:!1,type:"date",placeholder:"时间"},model:{value:t.searchKey.times,callback:function(e){t.$set(t.searchKey,"times",e)},expression:"searchKey.times"}})],1),i("el-col",{attrs:{span:12}},[i("span",{staticClass:"seachname"},[t._v(" 设备编号: ")]),i("el-select",{staticClass:"inputCls",staticStyle:{width:"calc(100% - 120px)"},attrs:{placeholder:"设备编号",filterable:"",multiple:""},on:{change:function(e){return t.setDevices()}},model:{value:t.searchKey.deviceId,callback:function(e){t.$set(t.searchKey,"deviceId",e)},expression:"searchKey.deviceId"}},t._l(t.codeList,(function(t,e){return i("el-option",{key:e,attrs:{label:t.name,value:t.id}})})),1)],1),i("el-col",{attrs:{span:6}},[i("el-button",{staticClass:"primaryBtn",attrs:{type:"primary",disabled:!t.searchKey.productName||!t.searchKey.times||0===t.searchKey.deviceId.length||!t.searchKey.customer||!t.searchKey.productNum},on:{click:function(e){return t.beginStart()}}},[i("svg-icon",{attrs:{"icon-class":"zhixing"}}),t._v(" 预排产 ")],1)],1)],1),i("el-row",[i("el-col",{staticStyle:{"padding-right":"15px"},attrs:{span:12}},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.productList,"row-class-name":t.tableRowClassName,border:""}},[i("el-table-column",{attrs:{prop:"documentCode",label:"设备类型",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(0===e.row.deviceType?"模具":"设备")+" ")]}}])}),i("el-table-column",{attrs:{prop:"deviceCode",label:"设备编号",align:"center"}}),i("el-table-column",{attrs:{prop:"useTime",label:"最早可用时间",align:"center"}}),i("el-table-column",{attrs:{prop:"endTime",label:"最早结束时间",align:"center"}})],1)],1),i("el-col",{attrs:{span:12}},[i("span",{staticClass:"seachname"},[t._v(" 选择设备: ")]),i("el-select",{staticClass:"inputCls",staticStyle:{width:"150px","margin-right":"15px"},attrs:{placeholder:"选择设备"},on:{change:function(e){return t.setsDevices()}},model:{value:t.obj.code,callback:function(e){t.$set(t.obj,"code",e)},expression:"obj.code"}},t._l(t.productList,(function(t,e){return i("el-option",{key:e,attrs:{label:t.deviceCode,value:e,disabled:0===t.deviceType}})})),1),i("span",{staticClass:"seachname"},[t._v(" 优先级: ")]),i("el-select",{staticClass:"inputCls",staticStyle:{width:"90px"},attrs:{placeholder:"优先级"},on:{change:function(e){return t.setDeviceInfo()}},model:{value:t.obj.priority,callback:function(e){t.$set(t.obj,"priority",e)},expression:"obj.priority"}},t._l(t.priorityList,(function(t,e){return i("el-option",{key:e,attrs:{label:t.name,value:t.id}})})),1),i("el-row",[i("el-col",{attrs:{span:24}},[i("span",{staticClass:"seachname"},[t._v(" 备注: ")]),i("el-input",{staticClass:"inputCls",staticStyle:{width:"calc(100% - 120px)"},attrs:{placeholder:"请输入备注",maxlength:"100"},on:{blur:function(e){return t.setDeviceInfo()}},model:{value:t.obj.remark,callback:function(e){t.$set(t.obj,"remark",e)},expression:"obj.remark"}})],1),i("el-col",{staticStyle:{"margin-top":"10px"},attrs:{span:24}},[i("el-button",{staticClass:"primaryBtn",attrs:{type:"primary",disabled:""===t.obj.code||""===t.obj.priority},on:{click:function(e){return t.startInstructions()}}},[i("svg-icon",{attrs:{"icon-class":"zhixing"}}),t._v(" 生成生产指令 ")],1)],1)],1)],1)],1)],1)]),i("div",{staticClass:"content1"},[t._m(1),i("div",{staticClass:"contentBody el-tablenew"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.list,"row-class-name":t.tableRowClassName,border:""}},[i("el-table-column",{attrs:{prop:"productCode",label:"物料长代码",align:"center"}}),i("el-table-column",{attrs:{prop:"productName",label:"产品名称",align:"center"}}),i("el-table-column",{attrs:{prop:"productNum",label:"计划生产数量",align:"center"}}),i("el-table-column",{attrs:{prop:"partCode",label:"设备编号",align:"center"}}),i("el-table-column",{attrs:{prop:"useTime",label:"开始时间",align:"center"}}),i("el-table-column",{attrs:{prop:"endTime",label:"结束时间",align:"center"}}),i("el-table-column",{attrs:{prop:"createTime",label:"优先级",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(0===e.row.priority?"普通":"优先")+" ")]}}])}),i("el-table-column",{attrs:{prop:"code",label:"生产指令",align:"center"}}),i("el-table-column",{attrs:{prop:"remark",label:"备注",align:"center"}})],1)],1)]),i("div",{staticClass:"bottom"},[t.list.length>0?i("el-button",{attrs:{disabled:t.loading,type:"primary"},on:{click:function(e){return t.submitForm()}}},[t._v("保存")]):t._e()],1)])},s=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"title"},[i("span",{staticClass:"ganggang"},[t._v("-")]),t._v(" 输入物料长代码与计划生产数量")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"title"},[i("span",{staticClass:"ganggang"},[t._v("-")]),t._v(" 排产指令生成")])}],a=(i("c740"),i("4160"),i("a15b"),i("b0c0"),i("159b"),i("b85c")),r=i("683d"),n=i("ed08"),c=i("2ac3"),d=i("6ace"),l=i("c24f"),u={name:"SchedulingTools",data:function(){return{list:[],loading:!1,productList:[],obj:{startTime:"",priority:"",code:"",remark:"",id:0},materielList:[],priorityList:[{id:0,name:"普通"},{id:1,name:"优先"}],searchKey:{productName:"",productCode:"",productNum:"",customer:"",times:"",deviceId:[]},objwu:null,customerList:[],codeList:[]}},computed:{},watch:{},created:function(){},mounted:function(){this.findDevicesLists(),this.getAllCodeRequest(),this.getAllCustomers()},beforeDestroy:function(){},methods:{getAllCodeRequest:function(){var t=this;Object(c["b"])().then((function(e){0===e.code&&e.data.length>0&&(t.materielList=e.data)}))},getAllCustomers:function(){var t=this;Object(l["a"])({pageNum:1,pageSize:99999}).then((function(e){0===e.code&&(t.customerList=e.data.list)}))},findDevicesLists:function(){var t=this;Object(d["a"])({}).then((function(e){t.codeList=e.data?e.data:[]}))},handleMateriel:function(){var t=this;this.searchKey.productName=this.materielList[this.searchKey.productCode].name,Object(r["c"])({productCode:this.materielList[this.searchKey.productCode].code}).then((function(e){e.data?(t.objwu=e.data,t.searchKey.deviceId=[],t.objwu.caftModelProcesscList.forEach((function(e){t.searchKey.deviceId.push(e.devicesId)}))):t.$message({message:"当前物料没有工艺模型!",type:"error"})}))},setDevices:function(){var t=this;if(!this.objwu)return this.$message({message:"当前物料没有工艺模型!",type:"error"}),void(this.searchKey.deviceId=[]);var e=JSON.parse(JSON.stringify(this.searchKey.deviceId));this.searchKey.deviceId=[];var i={};this.objwu.caftModelProcesscList.forEach((function(e){i[e.devicesId]=[],t.searchKey.deviceId.push(e.devicesId)}));var o,s=Object(a["a"])(e);try{for(s.s();!(o=s.n()).done;){var r=o.value;i[r]||this.searchKey.deviceId.push(r)}}catch(n){s.e(n)}finally{s.f()}this.searchKey.deviceId.length!==this.objwu.caftModelProcesscList.length&&(this.$message({message:"新增设备未创建工艺模型，请创建工艺模型!",type:"error"}),this.searchKey.deviceId=[],this.objwu.caftModelProcesscList.forEach((function(e){t.searchKey.deviceId.push(e.devicesId)})))},tableRowClassName:function(t){t.row;var e=t.rowIndex;return e%2===1?"table-row":""},setDeviceInfo:function(){this.obj.code&&(this.productList[this.obj.code].remark=this.obj.remark,this.productList[this.obj.code].priority=this.obj.priority)},setsDevices:function(){this.obj.remark=this.productList[this.obj.code].remark,this.obj.priority=this.productList[this.obj.code].priority},submitForm:function(){var t=this;this.loading=!0;var e={customerId:this.list[0].customer,deliverTime:this.list[0].times,endTime:this.list[0].endTime,mouldId:this.objwu.mouldId,note:this.list[0].remark,planCount:this.list[0].productNum,priority:this.list[0].priority,productCode:this.list[0].code,productDevicesId:this.list[0].partCodeId,productDeviceCode:this.list[0].partCode,productId:this.list[0].productId,productTime:this.list[0].productTime,startTime:this.list[0].useTime};Object(r["h"])(e).then((function(e){t.loading=!1,0===e.code?(t.$message({message:"执行成功!",type:"success"}),t.productList=[],t.obj={startTime:"",priority:"",code:"",remark:"",id:0},t.list=[],t.searchKey={productName:"",productCode:"",productNum:"",customer:"",times:"",deviceId:[]}):0===e.code&&t.$message({message:e.msg,type:"error"})}))},startInstructions:function(){var t=this,e=this.customerList.findIndex((function(e){return t.searchKey.customer===e.id}));this.list=[{productName:this.searchKey.productName,productCode:this.materielList[this.searchKey.productCode].code,productId:this.materielList[this.searchKey.productCode].id,productNum:this.searchKey.productNum,customer:this.searchKey.customer,customerName:this.customerList[e].name,partCodeId:this.productList[this.obj.code].deviceId,partCode:this.productList[this.obj.code].deviceCode,times:this.formatTimes(this.searchKey.times),useTime:this.productList[this.obj.code].useTime,endTime:this.productList[this.obj.code].endTime,productTime:this.productList[this.obj.code].productTime,priority:this.obj.priority,code:"",mouldId:this.objwu.mouldId,remark:this.obj.remark}]},beginStart:function(){var t=this,e={craftMode:{firstCheck:this.objwu.firstCheck,beat:this.objwu.beat,firstDebug:this.objwu.firstDebug},mouldId:this.objwu.mouldId,planCount:this.searchKey.productNum,productIds:this.searchKey.deviceId.join(",")};Object(r["f"])(e).then((function(e){t.productList=e.data}))},formatTimes:function(t){return Object(n["b"])(t,"{y}-{m}-{d} {h}:{i}:{s}")}}},p=u,h=(i("520f"),i("2877")),m=Object(h["a"])(p,o,s,!1,null,"67d83390",null);e["default"]=m.exports}}]);