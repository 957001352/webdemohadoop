(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9484da16"],{"09f4":function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),Math.easeInOutQuad=function(e,t,a,n){return e/=n/2,e<1?a/2*e*e+t:(e--,-a/2*(e*(e-2)-1)+t)};var n=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function i(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function s(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function l(e,t,a){var l=s(),o=e-l,r=20,c=0;t="undefined"===typeof t?500:t;var u=function e(){c+=r;var s=Math.easeInOutQuad(c,l,o,t);i(s),c<t?n(e):a&&"function"===typeof a&&a()};u()}},"0a7f":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"searchInfo"},[a("span",{staticClass:"seachname"},[e._v(" 保养任务单号: ")]),a("el-input",{staticClass:"inputCls",staticStyle:{width:"200px","margin-right":"15px"},attrs:{placeholder:"请输入项目关键字",clearable:""},model:{value:e.searchKey.name,callback:function(t){e.$set(e.searchKey,"name",t)},expression:"searchKey.name"}}),a("span",{staticClass:"seachname"},[e._v(" 设备编号: ")]),a("el-input",{staticClass:"inputCls",staticStyle:{width:"200px","margin-right":"15px"},attrs:{placeholder:"请输入设备编号",clearable:""},model:{value:e.searchKey.code,callback:function(t){e.$set(e.searchKey,"code",t)},expression:"searchKey.code"}}),"2"===e.actives?a("span",{staticClass:"seachname"},[e._v(" 执行人: ")]):e._e(),"2"===e.actives?a("el-input",{staticClass:"inputCls",staticStyle:{width:"120px","margin-right":"15px"},attrs:{placeholder:"执行人",clearable:""},model:{value:e.searchKey.people,callback:function(t){e.$set(e.searchKey,"people",t)},expression:"searchKey.people"}}):e._e(),"2"===e.actives?a("span",{staticClass:"seachname"},[e._v(" 执行日期: ")]):e._e(),"2"===e.actives?a("el-date-picker",{staticStyle:{width:"140px","margin-right":"15px"},attrs:{editable:!1,clearable:!1,type:"date",placeholder:"执行日期",size:"small"},model:{value:e.searchKey.date,callback:function(t){e.$set(e.searchKey,"date",t)},expression:"searchKey.date"}}):e._e(),a("span",{staticClass:"seachname"},[e._v(" 任务状态: ")]),a("el-select",{staticClass:"inputCls",staticStyle:{width:"120px","margin-right":"15px"},attrs:{placeholder:"任务状态",clearable:""},model:{value:e.searchKey.status,callback:function(t){e.$set(e.searchKey,"status",t)},expression:"searchKey.status"}},e._l(e.taskStatus,(function(t,n){return a("el-option",{key:n,attrs:{label:t.name,value:t.id,disabled:"2"===e.actives&&1===t.id||"2"===e.actives&&0===t.id||"1"===e.actives&&3===t.id}})})),1),"1"===e.actives?a("span",{staticClass:"seachname"},[e._v(" 审批状态: ")]):e._e(),"1"===e.actives?a("el-select",{staticClass:"inputCls",staticStyle:{width:"120px","margin-right":"15px"},attrs:{placeholder:"审批状态",clearable:""},model:{value:e.searchKey.examine,callback:function(t){e.$set(e.searchKey,"examine",t)},expression:"searchKey.examine"}},e._l(e.examineList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1):e._e(),a("el-button",{staticClass:"primaryBtn",staticStyle:{"margin-left":"7px"},attrs:{type:"primary"},on:{click:e.searchBtn}},[a("svg-icon",{attrs:{"icon-class":"search"}}),e._v(" 查询 ")],1),a("el-button",{staticClass:"resetBtn",staticStyle:{"margin-left":"7px"},attrs:{type:"default",icon:"el-icon-refresh-right"},on:{click:e.searchrestBtn}},[e._v(" 重置 ")])],1),"1"===e.actives?a("div",{staticClass:"searchInfo"},[e.hasPermission("maintainPlanImplement/delay")?a("el-button",{staticClass:"defaultBtn",attrs:{type:"default"},on:{click:function(t){return e.addBtn(1)}}},[a("svg-icon",{attrs:{"icon-class":"delay"}}),e._v(" 延后 ")],1):e._e(),e.hasPermission("maintainPlanImplement/close")?a("el-button",{staticClass:"deleteBtn",attrs:{type:"default"},on:{click:function(t){return e.addBtn(2)}}},[a("svg-icon",{attrs:{"icon-class":"delete"}}),e._v(" 强制关闭 ")],1):e._e()],1):e._e(),a("div",{staticClass:"el-tablenew"},[a("el-tabs",{staticClass:"el-tablenew",on:{"tab-click":e.handleClicks},model:{value:e.actives,callback:function(t){e.actives=t},expression:"actives"}},[a("el-tab-pane",{attrs:{label:"待保养任务",name:"1"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.list,"row-class-name":e.tableRowClassName,border:"",height:"calc(100vh - 380px)"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center",fixed:""}}),a("el-table-column",{attrs:{prop:"date",label:"序号",align:"center",width:"55",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.$index+1)+" ")]}}])}),a("el-table-column",{attrs:{prop:"createTime",label:"时间",align:"center",width:"100px",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.createTime&&t.row.createTime.length>10?t.row.createTime.substring(0,10):t.row.createTime))])]}}])}),a("el-table-column",{attrs:{prop:"keepOrder",label:"保养工单号",align:"center",width:"180px",fixed:""}}),a("el-table-column",{attrs:{prop:"keepTeamName",label:"保养表单名称",align:"center",width:"180px"}}),a("el-table-column",{attrs:{prop:"devicesName",label:"设备编号",align:"center",width:"120px"}}),a("el-table-column",{attrs:{label:"任务状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s("0"===t.row.status?"未执行":"1"===t.row.status?"延期":"2"===t.row.status?"强制关闭":"3"===t.row.status?"已执行":"执行中")+" ")]}}])}),a("el-table-column",{attrs:{prop:"createTime",label:"预计开始时间",align:"center",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.startTime&&t.row.startTime.length>10?t.row.startTime.substring(0,10):t.row.startTime))])]}}])}),a("el-table-column",{attrs:{prop:"createTime",label:"预计结束时间",align:"center",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.endTime&&t.row.endTime.length>10?t.row.endTime.substring(0,10):t.row.endTime))])]}}])}),a("el-table-column",{attrs:{prop:"isPostpone",label:"是否超时",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"nonExecution",label:"未执行原因",align:"center",width:"120px"}}),a("el-table-column",{attrs:{prop:"nonExecutCause",label:"未执行原因描述",align:"center",width:"150px"}}),a("el-table-column",{attrs:{prop:"auditStatus",label:"审批状态",align:"center"}}),a("el-table-column",{attrs:{prop:"auditIdea",label:"审批意见",align:"center"}}),a("el-table-column",{attrs:{prop:"keepTime",label:"保养时间",align:"center",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.keepTime&&t.row.keepTime.length>10?t.row.keepTime.substring(0,10):t.row.keepTime))])]}}])})],1),a("pagination",{staticClass:"pagePadd",attrs:{total:e.total,page:e.pageIndex,limit:e.pageSize},on:{"update:page":function(t){e.pageIndex=t},"update:limit":function(t){e.pageSize=t},pagination:e.handleCurrentChange}})],1),a("el-tab-pane",{attrs:{label:"历史保养任务",name:"2"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.list,"row-class-name":e.tableRowClassName,border:"",height:"calc(100vh - 337px)"}},[a("el-table-column",{attrs:{prop:"date",label:"序号",align:"center",width:"55",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.$index+1)+" ")]}}])}),a("el-table-column",{attrs:{prop:"createTime",label:"时间",align:"center",width:"120px",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.createTime&&t.row.createTime.length>10?t.row.createTime.substring(0,10):t.row.createTime))])]}}])}),a("el-table-column",{attrs:{prop:"keepOrder",label:"保养工单号",align:"center",width:"180px",fixed:""}}),a("el-table-column",{attrs:{prop:"keepTeamName",label:"保养表单名称",align:"center",width:"180px"}}),a("el-table-column",{attrs:{prop:"devicesName",label:"设备编号",align:"center",width:"120px"}}),a("el-table-column",{attrs:{prop:"date",label:"任务状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s("0"===t.row.status?"未执行":"1"===t.row.status?"延期":"2"===t.row.status?"强制关闭":"已执行")+" ")]}}])}),a("el-table-column",{attrs:{prop:"date",label:"执行时间",align:"center",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.executeTime&&t.row.executeTime.length>10?t.row.executeTime.substring(0,10):t.row.executeTime))])]}}])}),a("el-table-column",{attrs:{prop:"executeUserName",label:"执行人",align:"center"}}),a("el-table-column",{attrs:{prop:"nonExecution",label:"未执行原因",align:"center",width:"120px"}}),a("el-table-column",{attrs:{prop:"nonExecutCause",label:"未执行原因描述",align:"center",width:"150px"}}),a("el-table-column",{attrs:{prop:"auditUserName",label:"审批人",align:"center"}}),a("el-table-column",{attrs:{prop:"keepTime",label:"保养时间",align:"center",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.keepTime&&t.row.keepTime.length>10?t.row.keepTime.substring(0,10):t.row.keepTime))])]}}])}),a("el-table-column",{attrs:{prop:"date",label:"详情",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"defaultTextBtn",attrs:{type:"text"},on:{click:function(a){return e.findInfo(t.row)}}},[a("svg-icon",{attrs:{"icon-class":"search"}}),e._v(" 查看 ")],1)]}}])})],1),a("pagination",{staticClass:"pagePadd",attrs:{total:e.total,page:e.pageIndex,limit:e.pageSize},on:{"update:page":function(t){e.pageIndex=t},"update:limit":function(t){e.pageSize=t},pagination:e.handleCurrentChange}})],1)],1)],1),a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],staticClass:"dialogs",attrs:{title:e.dialogTitle,visible:e.dialogVisible,"close-on-click-modal":!1,width:"665px"},on:{"update:visible":function(t){e.dialogVisible=t},close:function(t){return e.resetFrom("forms")}}},[a("el-form",{ref:"forms",attrs:{model:e.forms,rules:e.rules,"label-position":"left","label-width":"120px"}},[a("el-form-item",{attrs:{label:"保养工单单号",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入保养工单单号",size:"small",maxlength:"20",disabled:""},model:{value:e.forms.name,callback:function(t){e.$set(e.forms,"name",t)},expression:"forms.name"}})],1),"申请延后工单"===e.dialogTitle?a("el-form-item",{attrs:{label:"延迟天数",prop:"day"}},[a("el-input-number",{attrs:{precision:0,step:1,max:30,min:0,controls:!1,placeholder:"请输入延迟天数",size:"small"},model:{value:e.forms.day,callback:function(t){e.$set(e.forms,"day",t)},expression:"forms.day"}})],1):e._e(),"申请延后工单"===e.dialogTitle?a("el-form-item",{attrs:{label:"推迟原因",prop:"delayreason"}},[a("el-input",{attrs:{rows:5,resize:"none",type:"textarea",placeholder:"请输入推迟原因",maxlength:"50"},model:{value:e.forms.delayreason,callback:function(t){e.$set(e.forms,"delayreason",t)},expression:"forms.delayreason"}})],1):e._e(),"申请延后工单"!==e.dialogTitle?a("el-form-item",{attrs:{label:"强制关闭原因",prop:"closreason"}},[a("el-input",{attrs:{rows:5,resize:"none",type:"textarea",placeholder:"请输入推迟原因",maxlength:"50"},on:{input:function(t){e.forms.closreason=e.inputRule(e.forms.closreason)}},model:{value:e.forms.closreason,callback:function(t){e.$set(e.forms,"closreason",t)},expression:"forms.closreason"}})],1):e._e()],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"defaultBtn",staticStyle:{width:"120px","border-radius":"4px"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),a("el-button",{staticClass:"primaryBtn",staticStyle:{width:"120px"},attrs:{disabled:e.disabled,type:"primary"},on:{click:function(t){return e.submitForm("forms")}}},[e._v("确定")])],1)],1),e.infoDailogVisible?a("maintailPlanLog",{attrs:{"info-obj":e.objInfo},on:{callbackFunc:e.callbackFunc}}):e._e()],1)},i=[],s=(a("a15b"),a("b0c0"),a("b85c")),l=a("f955"),o=a("ed08"),r=a("333d"),c=a("a888"),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"dialogs",attrs:{visible:e.infoDailogVisible,"close-on-click-modal":!1,title:"保养表单详情",width:"1000px"},on:{"update:visible":function(t){e.infoDailogVisible=t},closed:function(t){return e.closeDialog()}}},[a("el-row",[a("el-col",{staticClass:"titsty",attrs:{span:12}},[a("span",[e._v("保养工单号:")]),e._v(" "+e._s(e.objInfo.keepOrder)+" ")]),a("el-col",{staticClass:"titsty",attrs:{span:12}},[a("span",[e._v("保养表单名称:")]),e._v(" "+e._s(e.objInfo.keepTeamName)+" ")]),a("el-col",{staticClass:"titsty",attrs:{span:12}},[a("span",[e._v("设备编号:")]),e._v(" "+e._s(e.objInfo.devicesName)+" ")]),a("el-col",{staticClass:"titsty",attrs:{span:4}},[a("span",[e._v("执行人员:")]),e._v(" "+e._s(e.objInfo.executeUserName)+" ")]),a("el-col",{staticClass:"titsty",attrs:{span:4}},[a("span",[e._v("任务状态:")]),e._v(" "+e._s("0"===e.objInfo.status?"未执行":"1"===e.objInfo.status?"延期":"2"===e.objInfo.status?"强制关闭":"已执行")+" ")]),a("el-col",{staticClass:"titsty",attrs:{span:4}},[a("span",[e._v("执行时间:")]),e._v(" "+e._s(e.objInfo.executeTime&&e.objInfo.executeTime.length>10?e.objInfo.executeTime.substring(0,10):e.objInfo.executeTime)+" ")])],1),a("el-tabs",{staticClass:"el-tablenew",model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"保养记录",name:"first"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.planExecuteRecords,"row-class-name":e.tableRowClassName,border:"",height:"500px"}},[a("el-table-column",{attrs:{prop:"date",label:"序号",align:"center",width:"50px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.$index+1)+" ")]}}])}),a("el-table-column",{attrs:{prop:"name",label:"项目名称",align:"center",width:"320px"}}),a("el-table-column",{attrs:{label:"选项",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[""!==t.row.result?a("span",[e._v(" "+e._s(t.row.result)+" "),"不合格"===t.row.result?a("span",[e._v(":"+e._s(t.row.reason))]):e._e()]):e._e(),""===t.row.result?a("span",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.row.from,"row-class-name":e.tableRowClassName,border:""}},e._l(t.row.headers,(function(t,n){return a("el-table-column",{key:n,attrs:{label:t.value,align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v(" "+e._s(a.row[t.key])+" ")]}}],null,!0)})})),1)],1):e._e()]}}])})],1)],1),a("el-tab-pane",{attrs:{label:"审批记录",name:"second"}},e._l(e.logList,(function(t,n){return a("div",{key:n,staticClass:"logsty"},[a("div",{staticClass:"titlog"},[e._v(" 审批记录 ")]),a("el-row",[a("el-col",{staticClass:"titsty",attrs:{span:6}},[a("span",[e._v("未执行原因:")]),e._v(" "+e._s(e.objInfo.nonExecution)+" ")]),a("el-col",{staticClass:"titsty",attrs:{span:6}},[a("span",[e._v("申请人:")]),e._v(" "+e._s(e.objInfo.delayUser)+" ")]),a("el-col",{staticClass:"titsty",attrs:{span:6}},[a("span",[e._v("申请时间:")]),e._v(" "+e._s(e.objInfo.delayTime)+" ")]),a("el-col",{staticClass:"titsty",attrs:{span:6}},[a("span",[e._v("审批人:")]),e._v(" "+e._s(t.auditUserName)+" ")]),a("el-col",{staticClass:"titsty",attrs:{span:6}},[a("span",[e._v("审批时间:")]),e._v(" "+e._s(t.auditTime)+" ")]),a("el-col",{staticClass:"titsty",attrs:{span:6}},[a("span",[e._v("审批结果:")]),e._v(e._s(1===t.auditResult?"同意":"不同意")+" ")]),a("el-col",{staticClass:"titsty",attrs:{span:6}},[a("span",[e._v("审批意见:")]),e._v(e._s(t.auditIdea)+" ")]),a("el-col",{staticClass:"titsty",attrs:{span:12}},[a("span",[e._v("未执行原因描述:")]),e._v(" "+e._s(e.objInfo.nonExecutCause)+" ")])],1)],1)})),0)],1)],1)},d=[],p=(a("b64b"),a("2423")),m={props:{infoObj:{type:Object,required:!0}},data:function(){return{infoDailogVisible:!1,logList:[],planExecuteRecords:[],activeName:"first",objInfo:{delayUser:"",delayTime:"",executeUserName:"",auditIdea:null,auditResult:null,auditStatus:null,auditUser:null,carryDay:null,conclusion:null,createTime:"",devicesKeepItem:[],devicesName:null,endTime:null,executeTime:null,executeUser:null,executionId:null,formCode:null,id:0,keepOrder:null,keepPlanId:0,keepTeamName:null,nonExecutCause:null,nonExecution:null,note:null,planExecuteRecords:null,productDevicesIds:null,status:0}}},created:function(){if(this.infoDailogVisible=!0,this.objInfo=this.infoObj,this.planExecuteRecords=[],this.objInfo.planExecuteRecords){var e,t=Object(s["a"])(this.objInfo.devicesKeepItem);try{for(t.s();!(e=t.n()).done;){var a,n=e.value,i={name:n.name},l=Object(s["a"])(this.objInfo.planExecuteRecords);try{for(l.s();!(a=l.n()).done;){var o=a.value;if(o.keepItemId===n.id)if("1"===o.keepItemResult)i.result="合格",i.reason="";else if("0"===o.keepItemResult)i.result="不合格",i.reason=o.reason;else{i.result="",i.from=JSON.parse(o.keepItemResult);for(var r=JSON.parse(n.lists[0].columns),c=Object.keys(r),u=[],d=0,p=c;d<p.length;d++){var m=p[d];u.push({value:r[m],key:m})}i.headers=u}}}catch(f){l.e(f)}finally{l.f()}this.planExecuteRecords.push(i)}}catch(f){t.e(f)}finally{t.f()}}console.log(this.planExecuteRecords),this.getFindHistTaskDeatilLists()},methods:{tableRowClassName:function(e){e.row;var t=e.rowIndex;return t%2===1?"table-row":""},getFindHistTaskDeatilLists:function(){var e=this,t={executionId:this.objInfo.executionId};Object(p["o"])(t).then((function(t){0===t.code&&(e.logList=t.data)}))},closeDialog:function(){this.$emit("callbackFunc",{})}}},f=m,h=(a("c06c"),a("2877")),g=Object(h["a"])(f,u,d,!1,null,"203173dd",null),b=g.exports,v={name:"MaintainPlanImplement",directives:{elDragDialog:c["a"]},components:{Pagination:r["a"],maintailPlanLog:b},data:function(){return{loading:!1,dialogVisible:!1,infoDailogVisible:!1,disabled:!1,dialogTitle:"",activeName:"first",actives:"1",searchKey:{name:"",code:"",people:"",date:"",status:"",examine:""},taskStatus:[{id:0,name:"未执行"},{id:1,name:"延期"},{id:2,name:"强制关闭"},{id:3,name:"已执行"}],examineList:[{id:0,name:"未审核"},{id:1,name:"审核通过"},{id:2,name:"审核不通过"}],total:0,pageIndex:1,pageSize:10,currentId:0,multipleSelection:[],maintainObjList:[],forms:{name:"",day:"",delayreason:"",closreason:""},rules:{name:[{required:!0,message:"请输入保养工单单号",trigger:"blur"}],day:[{required:!0,message:"请输入延迟天数",trigger:"blur"}],delayreason:[{required:!0,message:"请输入推迟原因",trigger:"blur"}],closreason:[{required:!0,message:"请输入强制关闭原因",trigger:"blur"}]},list:[],maintainList:[],objInfo:{auditIdea:null,auditResult:null,auditStatus:null,auditUser:null,carryDay:null,conclusion:null,createTime:"",devicesKeepItem:[],devicesName:null,endTime:null,executeTime:null,executeUser:null,executionId:null,formCode:null,id:0,keepOrder:null,keepPlanId:0,keepTeamName:null,nonExecutCause:null,nonExecution:null,note:null,planExecuteRecords:null,productDevicesIds:null,status:0}}},computed:{},mounted:function(){this.fetchDate()},methods:{findInfo:function(e){this.activeName="first",this.infoDailogVisible=!0,this.objInfo=e},callbackFunc:function(){this.infoDailogVisible=!1},handleClicks:function(e,t){this.searchrestBtn()},handleClick:function(e,t){console.log(e,t)},tableRowClassName:function(e){e.row;var t=e.rowIndex;return t%2===1?"table-row":""},handleSelectionChange:function(e){this.multipleSelection=e},fetchDate:function(){var e=this;if(this.list=[],this.multipleSelection=[],this.loading=!0,"1"===this.actives){var t={keepOrder:this.searchKey.name+""?this.searchKey.name:null,devicesCode:this.searchKey.code+""?this.searchKey.code:null,taskStatus:""!==this.searchKey.status&&null!==this.searchKey.status?this.searchKey.status:"0,1,2",auditStatus:""!==this.searchKey.examine&&null!==this.searchKey.examine?this.searchKey.examine:null,pageNum:this.pageIndex,pageSize:this.pageSize};Object(l["m"])(t).then((function(t){e.loading=!1,0===t.code&&(e.list=t.data.list,e.total=t.data.total)}))}else{var a={keepOrder:this.searchKey.name+""?this.searchKey.name:null,devicesCode:this.searchKey.code+""?this.searchKey.code:null,executeUserName:this.searchKey.people+""?this.searchKey.people:null,executeTime:this.searchKey.date+""?Object(o["b"])(this.searchKey.date,"{y}-{m}-{d} {h}:{i}:{s}"):null,taskStatus:""!==this.searchKey.status&&null!==this.searchKey.status?this.searchKey.status:"2,3",pageNum:this.pageIndex,pageSize:this.pageSize};Object(l["d"])(a).then((function(t){e.loading=!1,0===t.code&&(e.list=t.data.list,e.total=t.data.total)}))}},searchBtn:function(){this.fetchDate()},searchrestBtn:function(){this.searchKey={name:"",code:"",people:"",date:"",status:"",examine:""},this.pageIndex=1,this.pageSize=10,this.fetchDate()},handleCurrentChange:function(){this.fetchDate()},addBtn:function(e){if(0===this.multipleSelection.length)return this.$message({message:"请选择需要操作的行!",type:"warning"}),!1;var t,a=!1,n="",i=Object(s["a"])(this.multipleSelection);try{for(i.s();!(t=i.n()).done;){var l=t.value;if("0"!==l.status){if("4"===l.status){a=!0;break}if(2!==l.auditResult&&("1"!==l.status||0===l.auditResult)){a=!0;break}}else if(0===l.auditResult){a=!0;break}n=n?n+","+l.keepOrder:l.keepOrder}}catch(o){i.e(o)}finally{i.f()}if(a)return this.$message({message:"选中行状态无法操作!",type:"warning"}),!1;this.dialogTitle=1===e?"申请延后工单":"申请强制关闭工单",this.forms={name:n,day:0,delayreason:"",closreason:""},this.dialogVisible=!0},resetFrom:function(e){this.$refs[e].resetFields()},submitForm:function(e){var t=this;this.$refs[e].validate((function(a){if(a){var n,i=[],o=Object(s["a"])(t.multipleSelection);try{for(o.s();!(n=o.n()).done;){var r=n.value;i.push(r.id)}}catch(u){o.e(u)}finally{o.f()}var c={ids:i.join(","),carryDay:"申请延后工单"===t.dialogTitle?t.forms.day:null,type:"申请延后工单"===t.dialogTitle?1:2,nonExecution:"申请延后工单"===t.dialogTitle?t.forms.delayreason:t.forms.closreason};Object(l["n"])(c).then((function(a){t.loading=!1,0===a.code?(t.$message({message:"操作成功!",type:"success"}),t.$refs[e].resetFields(),t.dialogVisible=!1,t.fetchDate()):1e3===a.code&&t.$message({message:a.msg,type:"error"})}))}}))}}},w=v,y=(a("a411"),Object(h["a"])(w,n,i,!1,null,"0535facd",null));t["default"]=y.exports},2423:function(e,t,a){"use strict";a.d(t,"p",(function(){return i})),a.d(t,"h",(function(){return s})),a.d(t,"l",(function(){return l})),a.d(t,"c",(function(){return o})),a.d(t,"t",(function(){return r})),a.d(t,"k",(function(){return c})),a.d(t,"u",(function(){return u})),a.d(t,"j",(function(){return d})),a.d(t,"o",(function(){return p})),a.d(t,"g",(function(){return m})),a.d(t,"n",(function(){return f})),a.d(t,"f",(function(){return h})),a.d(t,"q",(function(){return g})),a.d(t,"b",(function(){return b})),a.d(t,"e",(function(){return v})),a.d(t,"r",(function(){return w})),a.d(t,"a",(function(){return y})),a.d(t,"d",(function(){return x})),a.d(t,"m",(function(){return _})),a.d(t,"i",(function(){return k})),a.d(t,"s",(function(){return T})),a.d(t,"v",(function(){return j}));var n=a("b775");function i(e){return Object(n["a"])({url:window.configs.api+"/jbpmDeployment/findList",method:"get",params:e})}function s(e){return Object(n["a"])({url:window.configs.api+"/jbpmDeployment/save",method:"post",data:e})}function l(){return Object(n["a"])({url:window.configs.api+"/jbpmDeployment/findJbpmFormList",method:"get"})}function o(e){return Object(n["a"])({url:window.configs.api+"/jbpmDeployment/delete",method:"get",params:{ids:e}})}function r(){return Object(n["a"])({url:window.configs.e2cUrl+"/user/findList",method:"get"})}function c(e){return Object(n["a"])({url:window.configs.api+"/jbpmExecution/findWaitTaskList",method:"get",params:e})}function u(e){return Object(n["a"])({url:window.configs.api+"/jbpmExecution/findHistTaskList",method:"get",params:e})}function d(e,t){return Object(n["a"])({url:window.configs.api+"/devicesRepai/findList",method:"get",params:{id:e}})}function p(e){return Object(n["a"])({url:window.configs.api+"/jbpmExecution/findHistTaskDeatilList",method:"get",params:e})}function m(e){return Object(n["a"])({url:window.configs.api+"/jbpmExecution/doTask",method:"post",data:e})}function f(e){return Object(n["a"])({url:window.configs.api+"/devicesKeepTask/getDevicesKeepTask",method:"get",params:{id:e}})}function h(e){return Object(n["a"])({url:window.configs.api+"/devicesScrap/findList",method:"get",params:{devicesScrapId:e}})}function g(e){return Object(n["a"])({url:window.configs.api+"/devicesCheckTeam/findList",method:"get",params:e})}function b(e){return Object(n["a"])({url:window.configs.api+"/devicesCheckTeam/save",method:"post",data:e})}function v(e){return Object(n["a"])({url:window.configs.api+"/devicesCheckTeam/delete",method:"get",params:{ids:e}})}function w(e){return Object(n["a"])({url:window.configs.api+"/devicesCheckItem/findList",method:"get",params:e})}function y(e){return Object(n["a"])({url:window.configs.api+"/devicesCheckItem/save",method:"post",data:e})}function x(e){return Object(n["a"])({url:window.configs.api+"/devicesCheckItem/delete",method:"get",params:{ids:e}})}function _(){return Object(n["a"])({url:window.configs.e2cUrl+"/devicesClassify/findList",method:"get"})}function k(e){return Object(n["a"])({url:window.configs.e2cUrl+"/productDevices/findList",method:"get",param:e})}function T(e){return Object(n["a"])({url:window.configs.api+"/devicesCheck/findList",method:"get",params:e})}function j(e){return Object(n["a"])({url:window.configs.api+"/mouldDevices/findOneById",method:"get",params:{id:e}})}},a15b:function(e,t,a){"use strict";var n=a("23e7"),i=a("44ad"),s=a("fc6a"),l=a("a640"),o=[].join,r=i!=Object,c=l("join",",");n({target:"Array",proto:!0,forced:r||!c},{join:function(e){return o.call(s(this),void 0===e?",":e)}})},a411:function(e,t,a){"use strict";var n=a("b061"),i=a.n(n);i.a},a888:function(e,t,a){"use strict";a("99af"),a("caad"),a("ac1f"),a("2532"),a("5319");var n={bind:function(e,t,a){var n=e.querySelector(".el-dialog__header"),i=e.querySelector(".el-dialog");n.style.cssText+=";cursor:move;",i.style.cssText+=";top:0px;";var s=function(){return window.document.currentStyle?function(e,t){return e.currentStyle[t]}:function(e,t){return getComputedStyle(e,!1)[t]}}();n.onmousedown=function(e){var t=e.clientX-n.offsetLeft,l=e.clientY-n.offsetTop,o=i.offsetWidth,r=i.offsetHeight,c=document.body.clientWidth,u=document.body.clientHeight,d=i.offsetLeft,p=c-i.offsetLeft-o,m=i.offsetTop,f=u-i.offsetTop-r,h=s(i,"left"),g=s(i,"top");h.includes("%")?(h=+document.body.clientWidth*(+h.replace(/\%/g,"")/100),g=+document.body.clientHeight*(+g.replace(/\%/g,"")/100)):(h=+h.replace(/\px/g,""),g=+g.replace(/\px/g,"")),document.onmousemove=function(e){var n=e.clientX-t,s=e.clientY-l;-n>d?n=-d:n>p&&(n=p),-s>m?s=-m:s>f&&(s=f),i.style.cssText+=";left:".concat(n+h,"px;top:").concat(s+g,"px;"),a.child.$emit("dragDialog")},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null}}}},i=function(e){e.directive("el-drag-dialog",n)};window.Vue&&(window["el-drag-dialog"]=n,Vue.use(i)),n.install=i;t["a"]=n},b061:function(e,t,a){},b9d0:function(e,t,a){},c06c:function(e,t,a){"use strict";var n=a("b9d0"),i=a.n(n);i.a},f955:function(e,t,a){"use strict";a.d(t,"e",(function(){return i})),a.d(t,"i",(function(){return s})),a.d(t,"k",(function(){return l})),a.d(t,"j",(function(){return o})),a.d(t,"o",(function(){return r})),a.d(t,"a",(function(){return c})),a.d(t,"f",(function(){return u})),a.d(t,"q",(function(){return d})),a.d(t,"c",(function(){return p})),a.d(t,"g",(function(){return m})),a.d(t,"l",(function(){return f})),a.d(t,"h",(function(){return h})),a.d(t,"b",(function(){return g})),a.d(t,"p",(function(){return b})),a.d(t,"m",(function(){return v})),a.d(t,"d",(function(){return w})),a.d(t,"n",(function(){return y}));var n=a("b775");function i(e){return Object(n["a"])({url:window.configs.api+"/devicesKeepItem/findList",method:"get",params:e})}function s(){return Object(n["a"])({url:window.configs.e2cUrl+"/devicesClassify/findList",method:"get"})}function l(e){return Object(n["a"])({url:window.configs.api+"/devicesKeepTeam/getKeepItemByCycle",method:"get",params:e})}function o(e){return Object(n["a"])({url:window.configs.api+"/devicesKeepItem/getDevicesKeepItem",method:"get",params:e})}function r(e){return Object(n["a"])({url:window.configs.api+"/devicesKeepItem/save",method:"post",data:e})}function c(e){return Object(n["a"])({url:window.configs.api+"/devicesKeepItem/delete",method:"get",params:e})}function u(e){return Object(n["a"])({url:window.configs.api+"/devicesKeepTeam/findList",method:"get",params:e})}function d(e){return Object(n["a"])({url:window.configs.api+"/devicesKeepTeam/save",method:"post",data:e})}function p(e){return Object(n["a"])({url:window.configs.api+"/devicesKeepTeam/delete",method:"get",params:e})}function m(){return Object(n["a"])({url:window.configs.api+"/devicesKeepTeam/getAllKeepItem",method:"get"})}function f(e){return Object(n["a"])({url:window.configs.api+"/devicesKeepPlan/findList",method:"get",params:e})}function h(){return Object(n["a"])({url:window.configs.api+"/devicesKeepPlan/getAllKeepTeam",method:"get"})}function g(e){return Object(n["a"])({url:window.configs.api+"/devicesKeepPlan/delete",method:"get",params:e})}function b(e){return Object(n["a"])({url:window.configs.api+"/devicesKeepPlan/save",method:"post",data:e})}function v(e){return Object(n["a"])({url:window.configs.api+"/devicesKeepTask/findList",method:"get",params:e})}function w(e){return Object(n["a"])({url:window.configs.api+"/devicesKeepTask/findHistoryList",method:"get",params:e})}function y(e){return Object(n["a"])({url:window.configs.api+"/devicesKeepTask/postPoned",method:"get",params:e})}}}]);