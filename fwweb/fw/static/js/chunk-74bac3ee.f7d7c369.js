(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-74bac3ee"],{"2ac3":function(t,e,i){"use strict";i.d(e,"e",(function(){return a})),i.d(e,"g",(function(){return s})),i.d(e,"d",(function(){return n})),i.d(e,"f",(function(){return l})),i.d(e,"a",(function(){return r})),i.d(e,"c",(function(){return c})),i.d(e,"b",(function(){return u}));var o=i("b775");function a(t){return Object(o["a"])({url:window.configs.api+"/mouldStorageHouse/findStorageList",method:"get",params:t})}function s(t){return Object(o["a"])({url:window.configs.api+"/mouldStorageHouse/saveStorage",method:"post",data:t})}function n(t){return Object(o["a"])({url:window.configs.api+"/mouldStorageHouse/findLocationList",method:"get",params:t})}function l(t){return Object(o["a"])({url:window.configs.api+"/mouldStorageHouse/saveLocation",method:"post",data:t})}function r(t){return Object(o["a"])({url:window.configs.api+"/mouldStorageHouse/deleteLocation",method:"get",params:{ids:t}})}function c(t){return Object(o["a"])({url:window.configs.api+"/mouldStorageHouse/findEmptyLocationList",method:"get",params:t})}function u(t){return Object(o["a"])({url:window.configs.api+"/logisticsProduct/getAllCode",method:"get",params:t})}},"5f2a":function(t,e,i){"use strict";var o=i("d225"),a=i.n(o);a.a},a888:function(t,e,i){"use strict";i("99af"),i("caad"),i("ac1f"),i("2532"),i("5319");var o={bind:function(t,e,i){var o=t.querySelector(".el-dialog__header"),a=t.querySelector(".el-dialog");o.style.cssText+=";cursor:move;",a.style.cssText+=";top:0px;";var s=function(){return window.document.currentStyle?function(t,e){return t.currentStyle[e]}:function(t,e){return getComputedStyle(t,!1)[e]}}();o.onmousedown=function(t){var e=t.clientX-o.offsetLeft,n=t.clientY-o.offsetTop,l=a.offsetWidth,r=a.offsetHeight,c=document.body.clientWidth,u=document.body.clientHeight,d=a.offsetLeft,m=c-a.offsetLeft-l,g=a.offsetTop,p=u-a.offsetTop-r,f=s(a,"left"),h=s(a,"top");f.includes("%")?(f=+document.body.clientWidth*(+f.replace(/\%/g,"")/100),h=+document.body.clientHeight*(+h.replace(/\%/g,"")/100)):(f=+f.replace(/\px/g,""),h=+h.replace(/\px/g,"")),document.onmousemove=function(t){var o=t.clientX-e,s=t.clientY-n;-o>d?o=-d:o>m&&(o=m),-s>g?s=-g:s>p&&(s=p),a.style.cssText+=";left:".concat(o+f,"px;top:").concat(s+h,"px;"),i.child.$emit("dragDialog")},document.onmouseup=function(t){document.onmousemove=null,document.onmouseup=null}}}},a=function(t){t.directive("el-drag-dialog",o)};window.Vue&&(window["el-drag-dialog"]=o,Vue.use(a)),o.install=a;e["a"]=o},d225:function(t,e,i){},d8bb:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"filter-container"},[i("span",[t._v("库位名称：")]),i("el-input",{staticClass:"filter-item",staticStyle:{width:"200px","margin-right":"15px"},attrs:{placeholder:"请输入库位名称",size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleFilter(e)}},model:{value:t.listQuery.location,callback:function(e){t.$set(t.listQuery,"location",e)},expression:"listQuery.location"}}),i("span",[t._v("模具编号：")]),i("el-input",{staticClass:"filter-item",staticStyle:{width:"200px","margin-right":"15px"},attrs:{placeholder:"请输入模具编号",size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleFilter(e)}},model:{value:t.listQuery.mouldCode,callback:function(e){t.$set(t.listQuery,"mouldCode",e)},expression:"listQuery.mouldCode"}}),i("el-button",{staticClass:"primaryBtn",attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:t.handleFilter}},[t._v(" 查询 ")]),i("el-button",{staticClass:"resetBtn",attrs:{icon:"el-icon-refresh-right",size:"small"},on:{click:t.resetSearch}},[t._v(" 重置 ")])],1),i("div",{staticClass:"filter-container1"},[t.hasPermission("storageLocationMould/addStore")?i("el-button",{staticClass:"filter-item addBtn ",attrs:{icon:"el-icon-plus",size:"small"},on:{click:function(e){return t.addStorageHouse("add")}}},[t._v(" 新建仓库 ")]):t._e(),t.hasPermission("storageLocationMould/editStore")?i("el-button",{staticClass:"filter-item addBtn",attrs:{icon:"el-icon-edit",size:"small"},on:{click:function(e){return t.addStorageHouse("edit")}}},[t._v(" 编辑仓库 ")]):t._e(),t.hasPermission("storageLocationMould/addHouse")?i("el-button",{staticClass:"filter-item addBtn",attrs:{icon:"el-icon-plus",size:"small"},on:{click:function(e){return t.addStorageLocation("add")}}},[t._v(" 新增库位 ")]):t._e(),t._m(0)],1),i("div",{staticClass:"tab-container"},[i("el-tabs",{staticStyle:{"margin-top":"15px"},attrs:{type:"border-card"},on:{"tab-click":t.handleTabClick},model:{value:t.activeName.name,callback:function(e){t.$set(t.activeName,"name",e)},expression:"activeName.name"}},t._l(t.tabMapOptions,(function(e,o){return i("el-tab-pane",{key:o,attrs:{label:e.name,name:e.id+""}},[i("el-row",{staticClass:"appListArea"},t._l(t.filterAppList,(function(e,o){return i("div",{key:o,staticClass:"appInfo"},[1==e.isBand&&3==e.status?i("figure",{staticClass:"awaitOut"},[i("figcaption",[t._v(t._s(e.name))]),i("p",[i("el-button",{staticClass:"delButton",staticStyle:{width:"100%"},attrs:{size:"small",plain:""},on:{click:function(i){return t.creatQrCode(e)}}},[t._v("打印")]),t.hasPermission("storageLocationMould/editHouse")?i("el-button",{staticClass:"delButton",attrs:{size:"small",plain:""},on:{click:function(i){return t.addStorageLocation("edit",e)}}},[t._v("编辑")]):t._e(),t.hasPermission("storageLocationMould/deleteHouse")?i("el-button",{staticClass:"delButton",attrs:{size:"small",plain:""},on:{click:function(i){return t.deleteApp(e)}}},[t._v("删除")]):t._e()],1)]):t._e(),1==e.isBand&&5==e.status?i("figure",{staticClass:"awaitIn"},[i("figcaption",[t._v(t._s(e.name))]),i("p",[i("el-button",{staticClass:"delButton",staticStyle:{width:"100%"},attrs:{size:"small",plain:""},on:{click:function(i){return t.creatQrCode(e)}}},[t._v("打印")]),t.hasPermission("storageLocationMould/editHouse")?i("el-button",{staticClass:"delButton",attrs:{size:"small",plain:""},on:{click:function(i){return t.addStorageLocation("edit",e)}}},[t._v("编辑")]):t._e(),t.hasPermission("storageLocationMould/deleteHouse")?i("el-button",{staticClass:"delButton",attrs:{size:"small",plain:""},on:{click:function(i){return t.deleteApp(e)}}},[t._v("删除")]):t._e()],1)]):t._e(),"1"==e.isBand&&0==e.status?i("figure",{staticClass:"unknown"},[i("figcaption",[t._v(t._s(e.name))]),i("p",[i("el-button",{staticClass:"delButton",staticStyle:{width:"100%"},attrs:{size:"small",plain:""},on:{click:function(i){return t.creatQrCode(e)}}},[t._v("打印")]),t.hasPermission("storageLocationMould/editHouse")?i("el-button",{staticClass:"delButton",attrs:{size:"small",plain:""},on:{click:function(i){return t.addStorageLocation("edit",e)}}},[t._v("编辑")]):t._e(),t.hasPermission("storageLocationMould/deleteHouse")?i("el-button",{staticClass:"delButton",attrs:{size:"small",plain:""},on:{click:function(i){return t.deleteApp(e)}}},[t._v("删除")]):t._e()],1)]):t._e(),1==e.isBand&&6==e.status?i("figure",{staticClass:"instorage"},[i("figcaption",[t._v(t._s(e.name))]),i("p",[i("el-button",{staticClass:"delButton",staticStyle:{width:"100%"},attrs:{size:"small",plain:""},on:{click:function(i){return t.creatQrCode(e)}}},[t._v("打印")]),t.hasPermission("storageLocationMould/editHouse")?i("el-button",{staticClass:"delButton",attrs:{size:"small",plain:""},on:{click:function(i){return t.addStorageLocation("edit",e)}}},[t._v("编辑")]):t._e(),t.hasPermission("storageLocationMould/deleteHouse")?i("el-button",{staticClass:"delButton",attrs:{size:"small",plain:""},on:{click:function(i){return t.deleteApp(e)}}},[t._v("删除")]):t._e()],1)]):t._e(),1==e.isBand&&4==e.status?i("figure",{staticClass:"outstorage"},[i("figcaption",[t._v(t._s(e.name))]),i("p",[i("el-button",{staticClass:"delButton",staticStyle:{width:"100%"},attrs:{size:"small",plain:""},on:{click:function(i){return t.creatQrCode(e)}}},[t._v("打印")]),t.hasPermission("storageLocationMould/editHouse")?i("el-button",{staticClass:"delButton",attrs:{size:"small",plain:""},on:{click:function(i){return t.addStorageLocation("edit",e)}}},[t._v("编辑")]):t._e(),t.hasPermission("storageLocationMould/deleteHouse")?i("el-button",{staticClass:"delButton",attrs:{size:"small",plain:""},on:{click:function(i){return t.deleteApp(e)}}},[t._v("删除")]):t._e()],1)]):t._e(),1==e.isBand&&7==e.status?i("figure",{staticClass:"movestorage"},[i("figcaption",[t._v(t._s(e.name))]),i("p",[i("el-button",{staticClass:"delButton",staticStyle:{width:"100%"},attrs:{size:"small",plain:""},on:{click:function(i){return t.creatQrCode(e)}}},[t._v("打印")]),t.hasPermission("storageLocationMould/editHouse")?i("el-button",{staticClass:"delButton",attrs:{size:"small",plain:""},on:{click:function(i){return t.addStorageLocation("edit",e)}}},[t._v("编辑")]):t._e(),t.hasPermission("storageLocationMould/deleteHouse")?i("el-button",{staticClass:"delButton",attrs:{size:"small",plain:""},on:{click:function(i){return t.deleteApp(e)}}},[t._v("删除")]):t._e()],1)]):t._e(),0==e.isBand?i("figure",{staticClass:"unBond"},[i("figcaption",[t._v(t._s(e.name))]),i("p",[i("el-button",{staticClass:"delButton",staticStyle:{width:"100%"},attrs:{size:"small",plain:""},on:{click:function(i){return t.creatQrCode(e)}}},[t._v("打印")]),t.hasPermission("storageLocationMould/editHouse")?i("el-button",{staticClass:"delButton",attrs:{size:"small",plain:""},on:{click:function(i){return t.addStorageLocation("edit",e)}}},[t._v("编辑")]):t._e(),t.hasPermission("storageLocationMould/deleteHouse")?i("el-button",{staticClass:"delButton",attrs:{size:"small",plain:""},on:{click:function(i){return t.deleteApp(e)}}},[t._v("删除")]):t._e()],1)]):t._e()])})),0)],1)})),1)],1),t.dialogFormVisible?i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],staticClass:"dialogs",attrs:{title:t.dialogTitle,visible:t.dialogFormVisible,"close-on-click-modal":!1,width:"480px"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"库位名称",prop:"name"}},[i("el-input",{attrs:{size:"mini",placeholder:"请输入库位名称"},on:{input:function(e){t.ruleForm.name=t.inputRule(t.ruleForm.name)}},model:{value:t.ruleForm.name,callback:function(e){t.$set(t.ruleForm,"name",e)},expression:"ruleForm.name"}})],1),i("el-form-item",{staticStyle:{"text-align":"right"}},[i("el-button",{staticClass:"sumbitBtn",attrs:{type:"primary",size:"small"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("保存")]),i("el-button",{staticClass:"resetBtn1",attrs:{size:"small"},on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")])],1)],1)],1):t._e(),t.dialogFormVisible1?i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],staticClass:"dialogs",attrs:{title:t.dialogTitle1,visible:t.dialogFormVisible1,"close-on-click-modal":!1,width:"480px"},on:{"update:visible":function(e){t.dialogFormVisible1=e}}},[i("el-form",{ref:"ruleForm1",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm1,rules:t.rules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"仓库名称",prop:"name"}},[i("el-input",{attrs:{size:"mini",placeholder:"请输入仓库名称"},on:{input:function(e){t.ruleForm1.name=t.inputRule(t.ruleForm1.name)}},model:{value:t.ruleForm1.name,callback:function(e){t.$set(t.ruleForm1,"name",e)},expression:"ruleForm1.name"}})],1),i("el-form-item",{staticStyle:{"text-align":"right"}},[i("el-button",{staticClass:"sumbitBtn",attrs:{size:"small"},on:{click:function(e){return t.submitForm1("ruleForm1")}}},[t._v("保存")]),i("el-button",{staticClass:"resetBtn1",attrs:{size:"small"},on:{click:function(e){t.dialogFormVisible1=!1}}},[t._v("取消")])],1)],1)],1):t._e(),i("div",{staticStyle:{display:"none",overflow:"hidden"},attrs:{id:"printcontent"}},[i("div",{staticStyle:{width:"72mm",height:"auto",padding:"5px","box-sizing":"border-box",border:"1px solid #323232",margin:"-3px 0  5px 0"}},[i("p",{staticStyle:{"font-size":"12px","text-align":"center"}},[t._v("库位")]),i("div",{staticStyle:{width:"100%",display:"flex","justify-content":"space-around","align-items":"top",margin:"0 auto"}},[i("div",{ref:"qrCodeUrl",staticClass:"qrcode"}),i("div",{staticClass:"textCode",staticStyle:{"font-size":"12px",width:"45mm",display:"flex","align-items":"center"}},[i("p",[t._v("库位编码："+t._s(t.locationName))])])])]),i("div",{staticStyle:{height:"20mm","line-height":"20mm",color:"#ffffff"}},[t._v(" . ")])])],1)},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{float:"right"}},[i("span",{staticClass:"ColorShow unBond"}),t._v(" 未绑定空闲 "),i("span",{staticClass:"ColorShow instorage"}),t._v(" 在库 "),i("span",{staticClass:"ColorShow outstorage"}),t._v(" 出库 "),i("span",{staticClass:"ColorShow awaitIn"}),t._v(" 待入库 "),i("span",{staticClass:"ColorShow awaitOut"}),t._v(" 待出库 "),i("span",{staticClass:"ColorShow movestorage"}),t._v(" 待移库 "),i("span",{staticClass:"ColorShow unknown"}),t._v(" 未知 ")])}],s=(i("c975"),i("b0c0"),i("a888")),n=i("2ac3"),l={name:"StorageLocation",components:{},directives:{elDragDialog:s["a"]},data:function(){return{listQuery:{location:void 0,mouldCode:void 0,storageHouseId:void 0,pageNum:1,pageSize:9999999},locationName:null,tabMapOptions:[],activeName:{name:0,pageNum:1,pageSize:9999999},filterAppList:[],chioceApp:{},dialogFormVisible:!1,dialogTitle:"",dialogFormVisible1:!1,ruleForm:{name:""},ruleForm1:{name:""},dialogTitle1:"",storageName:"",rules:{name:[{required:!0,message:"请填写完整",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}]}}},created:function(){},mounted:function(){this.getList()},methods:{handleFilter:function(){this.getStorageLocationList()},getList:function(){var t=this,e={name:"",pageNum:1,pageSize:999999};Object(n["e"])(e).then((function(e){0===e.code&&(t.tabMapOptions=e.data.list,e.data.list&&e.data.list.length>0&&(t.activeName.name=e.data.list[0].id+"",t.ruleForm.storageHouseId=e.data.list[0].id,t.storageName=e.data.list[0].name,t.listQuery.storageHouseId=t.activeName.name,t.getStorageLocationList()))}))},getStorageLocationList:function(){var t=this;Object(n["d"])(this.listQuery).then((function(e){0===e.code&&(t.filterAppList=e.data.list)}))},resetSearch:function(){this.listQuery.location=void 0,this.listQuery.mouldCode=void 0,this.getStorageLocationList()},addStorageHouse:function(t){"edit"===t?(this.ruleForm1.id=this.listQuery.storageHouseId,this.dialogTitle1="编辑仓库",this.ruleForm1.name=this.storageName):(this.dialogTitle1="新建仓库",delete this.ruleForm1.id,this.ruleForm1.name=""),this.dialogFormVisible1=!0},addStorageLocation:function(t,e){0!==this.tabMapOptions.length?("edit"===t?(this.ruleForm.id=e.id,this.ruleForm.name=e.name,this.dialogTitle="编辑库位"):(this.dialogTitle="添加库位",this.ruleForm.storageHouseId&&(delete this.ruleForm.id,this.ruleForm.name="")),this.dialogFormVisible=!0):this.$message({type:"warning",message:"找不到对应仓库，无法编辑库位"})},deleteApp:function(t){var e=this;console.log(t),this.$confirm("确定删除该库位吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(n["a"])(t.id).then((function(t){0===t.code?(e.$message({type:"success",message:"删除成功"}),e.getStorageLocationList()):e.$message({type:"errow",message:"删除失败"+t.msg})}))}))},submitForm:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return console.log("error submit!!"),!1;Object(n["f"])(e.ruleForm).then((function(t){0===t.code?(e.dialogFormVisible=!1,e.getStorageLocationList()):1e3===t.code&&e.$message({type:"warning",message:t.msg})}))}))},submitForm1:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return console.log("error submit!!"),!1;Object(n["g"])(e.ruleForm1).then((function(t){0===t.code?(e.$message({type:"success",message:"保存成功"}),e.dialogFormVisible1=!1,e.getList()):1e3===t.code&&e.$message({type:"warning",message:t.msg})}))}))},creatQrCode:function(t){this.locationName=t.name,console.log(t);var e="库位编码"+this.locationName;new this.QRCode(this.$refs.qrCodeUrl,{text:e,width:70,height:70,colorDark:"#000000",colorLight:"#ffffff",correctLevel:this.QRCode.CorrectLevel.H}),setTimeout((function(){var t=document.getElementById("print-iframe");if(!t){var e=document.getElementById("printcontent");t=document.createElement("IFRAME");var i=null;t.setAttribute("id","print-iframe"),t.setAttribute("style","position:absolute;width:0px;height:0px;left:-15px"),document.body.appendChild(t),i=t.contentWindow.document,i.write("<div>"+e.innerHTML+"</div>"),i.close(),t.contentWindow.focus()}t.contentWindow.print(),navigator.userAgent.indexOf("MSIE")>0&&document.body.removeChild(t)}),100)},handleTabClick:function(t,e){console.log(t),this.listQuery.storageHouseId=t.name,this.ruleForm.storageHouseId=t.name,this.ruleForm1.storageHouseId=t.name,this.storageName=t.label,this.getStorageLocationList()}}},r=l,c=(i("5f2a"),i("2877")),u=Object(c["a"])(r,o,a,!1,null,"0167ef41",null);e["default"]=u.exports}}]);