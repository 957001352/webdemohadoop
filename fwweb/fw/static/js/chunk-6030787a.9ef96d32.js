(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6030787a"],{"09f4":function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),Math.easeInOutQuad=function(e,t,n,i){return e/=i/2,e<1?n/2*e*e+t:(e--,-n/2*(e*(e-2)-1)+t)};var i=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function o(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function a(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function s(e,t,n){var s=a(),r=e-s,l=20,c=0;t="undefined"===typeof t?500:t;var u=function e(){c+=l;var a=Math.easeInOutQuad(c,s,r,t);o(a),c<t?i(e):n&&"function"===typeof n&&n()};u()}},2423:function(e,t,n){"use strict";n.d(t,"p",(function(){return o})),n.d(t,"h",(function(){return a})),n.d(t,"l",(function(){return s})),n.d(t,"c",(function(){return r})),n.d(t,"t",(function(){return l})),n.d(t,"k",(function(){return c})),n.d(t,"u",(function(){return u})),n.d(t,"j",(function(){return d})),n.d(t,"o",(function(){return m})),n.d(t,"g",(function(){return f})),n.d(t,"n",(function(){return p})),n.d(t,"f",(function(){return g})),n.d(t,"q",(function(){return h})),n.d(t,"b",(function(){return y})),n.d(t,"e",(function(){return b})),n.d(t,"r",(function(){return v})),n.d(t,"a",(function(){return w})),n.d(t,"d",(function(){return k})),n.d(t,"m",(function(){return C})),n.d(t,"i",(function(){return F})),n.d(t,"s",(function(){return j})),n.d(t,"v",(function(){return x}));var i=n("b775");function o(e){return Object(i["a"])({url:window.configs.api+"/jbpmDeployment/findList",method:"get",params:e})}function a(e){return Object(i["a"])({url:window.configs.api+"/jbpmDeployment/save",method:"post",data:e})}function s(){return Object(i["a"])({url:window.configs.api+"/jbpmDeployment/findJbpmFormList",method:"get"})}function r(e){return Object(i["a"])({url:window.configs.api+"/jbpmDeployment/delete",method:"get",params:{ids:e}})}function l(){return Object(i["a"])({url:window.configs.e2cUrl+"/user/findList",method:"get"})}function c(e){return Object(i["a"])({url:window.configs.api+"/jbpmExecution/findWaitTaskList",method:"get",params:e})}function u(e){return Object(i["a"])({url:window.configs.api+"/jbpmExecution/findHistTaskList",method:"get",params:e})}function d(e,t){return Object(i["a"])({url:window.configs.api+"/devicesRepai/findList",method:"get",params:{id:e}})}function m(e){return Object(i["a"])({url:window.configs.api+"/jbpmExecution/findHistTaskDeatilList",method:"get",params:e})}function f(e){return Object(i["a"])({url:window.configs.api+"/jbpmExecution/doTask",method:"post",data:e})}function p(e){return Object(i["a"])({url:window.configs.api+"/devicesKeepTask/getDevicesKeepTask",method:"get",params:{id:e}})}function g(e){return Object(i["a"])({url:window.configs.api+"/devicesScrap/findList",method:"get",params:{devicesScrapId:e}})}function h(e){return Object(i["a"])({url:window.configs.api+"/devicesCheckTeam/findList",method:"get",params:e})}function y(e){return Object(i["a"])({url:window.configs.api+"/devicesCheckTeam/save",method:"post",data:e})}function b(e){return Object(i["a"])({url:window.configs.api+"/devicesCheckTeam/delete",method:"get",params:{ids:e}})}function v(e){return Object(i["a"])({url:window.configs.api+"/devicesCheckItem/findList",method:"get",params:e})}function w(e){return Object(i["a"])({url:window.configs.api+"/devicesCheckItem/save",method:"post",data:e})}function k(e){return Object(i["a"])({url:window.configs.api+"/devicesCheckItem/delete",method:"get",params:{ids:e}})}function C(){return Object(i["a"])({url:window.configs.e2cUrl+"/devicesClassify/findList",method:"get"})}function F(e){return Object(i["a"])({url:window.configs.e2cUrl+"/productDevices/findList",method:"get",param:e})}function j(e){return Object(i["a"])({url:window.configs.api+"/devicesCheck/findList",method:"get",params:e})}function x(e){return Object(i["a"])({url:window.configs.api+"/mouldDevices/findOneById",method:"get",params:{id:e}})}},"99bd":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"filter-container"},[n("span",[e._v("点检项目名称：")]),n("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"请输入项目名称",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter(t)}},model:{value:e.listQuery.name,callback:function(t){e.$set(e.listQuery,"name",t)},expression:"listQuery.name"}}),n("span",[e._v("设备类型：")]),n("el-select",{staticClass:"filter-item",staticStyle:{width:"200px","margin-right":"15px"},attrs:{placeholder:"请选择设备类型",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter(t)}},model:{value:e.listQuery.devicesClassify,callback:function(t){e.$set(e.listQuery,"devicesClassify",t)},expression:"listQuery.devicesClassify"}},e._l(e.options,(function(e){return n("el-option",{key:e.id,attrs:{label:e.classifyName,value:e.id}})})),1),n("el-button",{staticClass:"primaryBtn",attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.handleFilter}},[e._v(" 查询 ")]),n("el-button",{staticClass:"resetBtn",attrs:{icon:"el-icon-refresh-right",size:"mini"},on:{click:e.resetSearch}},[e._v(" 重置 ")])],1),n("div",{staticClass:"opt-container"},[e.hasPermission("spotChecks/add")?n("el-button",{staticClass:"filter-item addBtn el-icon-plus",on:{click:function(t){return e.auditClick("新增")}}},[e._v(" 新增 ")]):e._e(),e.hasPermission("spotChecks/delete")?n("el-button",{staticClass:"filter-item deleteBtn el-icon-delete",attrs:{size:"small"},on:{click:e.handleDelte}},[e._v(" 删除 ")]):e._e()],1),n("el-table",{key:e.tableKey,staticStyle:{width:"100%"},attrs:{stripe:"",data:e.list,border:"",fit:"","highlight-current-row":"",height:"calc(100vh - 355px)","header-cell-style":e.headerClassName,"show-overflow-tooltip":""},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),n("el-table-column",{attrs:{type:"index",label:"序号",width:"55"}}),n("el-table-column",{attrs:{label:"点检项目名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[n("span",[e._v(e._s(i.name))])]}}])}),n("el-table-column",{attrs:{label:"设备类型",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[n("span",[e._v(e._s(i.classifyName))])]}}])}),n("el-table-column",{attrs:{label:"点检内容描述",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[n("span",[e._v(e._s(i.content))])]}}])}),n("el-table-column",{attrs:{label:"操作",align:"center",width:"100","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[e.hasPermission("spotChecks/edit")?n("el-button",{staticClass:"filter-item",attrs:{type:"text",size:"small"},on:{click:function(t){return e.auditClick("编辑",i)}}},[n("svg-icon",{attrs:{"icon-class":"edit"}}),e._v(" 编辑 ")],1):e._e()]}}])})],1),n("pagination",{attrs:{total:e.total,page:e.listQuery.pageNum,limit:e.listQuery.pageSize},on:{"update:page":function(t){return e.$set(e.listQuery,"pageNum",t)},"update:limit":function(t){return e.$set(e.listQuery,"pageSize",t)},pagination:e.getList}}),e.dialogFormVisible?n("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],staticClass:"dialogs",attrs:{title:e.dialogTitle,visible:e.dialogFormVisible,"close-on-click-modal":!1,width:"480px",disabled:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[n("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",class:1==e.readonly?"lookoverForm":"",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"点检项目名称：",prop:"name"}},[n("el-input",{attrs:{size:"mini",readonly:e.readonly,placeholder:"请输入点检项目名称"},on:{input:function(t){e.ruleForm.name=e.inputRule(e.ruleForm.name)}},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),n("el-form-item",{attrs:{label:"设备类型：",prop:"devicesClassify"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini",placeholder:"请选择设备类型"},model:{value:e.ruleForm.devicesClassify,callback:function(t){e.$set(e.ruleForm,"devicesClassify",t)},expression:"ruleForm.devicesClassify"}},e._l(e.options,(function(e){return n("el-option",{key:e.classifyId,attrs:{label:e.classifyName,value:e.id}})})),1)],1),n("el-form-item",{attrs:{label:"点检内容描述：",prop:"content"}},[n("el-input",{attrs:{size:"mini",type:"textarea",readonly:e.readonly,placeholder:"请输点检内容描述"},on:{input:function(t){e.ruleForm.content=e.inputRule(e.ruleForm.content)}},model:{value:e.ruleForm.content,callback:function(t){e.$set(e.ruleForm,"content",t)},expression:"ruleForm.content"}})],1),n("el-form-item",{staticStyle:{"text-align":"right"}},[n("el-button",{staticClass:"cancalBtn",on:{click:e.cancelSubmit}},[e._v(" 取消 ")]),n("el-button",{staticClass:"sumbitBtn",attrs:{type:"primary",size:"small"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v(" 确定 ")])],1)],1)],1):e._e()],1)},o=[],a=(n("4160"),n("d3b7"),n("159b"),n("5530")),s=n("2423"),r=n("333d"),l=n("a888"),c={name:"SpotChecks",components:{Pagination:r["a"]},directives:{elDragDialog:l["a"]},data:function(){return{timeValue:"",pageStatus:0,tableKey:0,list:[],total:0,dialogTitle:"",listQuery:{pageNum:1,pageSize:20,name:null,devicesClassify:null},multipleSelection:[],dialogFormVisible:!1,ruleForm:{name:"",devicesClassify:"",content:"",id:""},rules:{name:[{required:!0,message:"请填写",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}],devicesClassify:[{required:!0,message:"请选择活动区域",trigger:"change"}],content:[{required:!0,message:"请填写",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}]},downloadLoading:!1,readonly:!1,options:[],ids:""}},created:function(){},mounted:function(){this.getList()},methods:{getList:function(){var e=this;Object(s["r"])(this.listQuery).then((function(t){0===t.code?(e.list=t.data.list,e.total=t.data.total):e.$message({type:"error",message:"查询失败"})}))},handleFilter:function(){this.listQuery.pageNum=1,this.getList()},resetSearch:function(){this.listQuery={pageNum:this.listQuery.pageNum,pageSize:this.listQuery.pageSize,name:void 0,devicesClassify:void 0},this.getList()},auditClick:function(e,t){this.getDevicesClassifyRequest(),this.dialogFormVisible=!0,this.dialogTitle=e+"点检项目","新增"===e?this.readonly=!1:"编辑"===e?(this.ruleForm=Object(a["a"])({},t),this.readonly=!1):"查看"===e&&(this.ruleForm=t,this.readonly=!0)},handleSelectionChange:function(e){this.multipleSelection=e,console.log(this.multipleSelection);var t=[];this.multipleSelection.forEach((function(e,n){t.push(e.id)})),this.ids=t.toString()},headerClassName:function(e){e.row,e.rowIndex;return"background-color: #FAFAFA"},handleDelte:function(){var e=this;0!==this.multipleSelection.length?this.$confirm("确定删除吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.handleDelete()})):this.$message({message:"您还没有选择数据!",type:"warning"})},handleDelete:function(){var e=this;Object(s["d"])(this.ids).then((function(t){0===t.code?e.getList():e.$message({type:"error",message:"删除失败"})}))},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){e&&Object(s["a"])(t.ruleForm).then((function(e){0===e.code?(t.$message({type:"success",message:"保存成功"}),t.cancelSubmit(),t.getList()):1e3===e.code?t.$message({type:"warning",message:e.msg}):t.$message({type:"error",message:"保存失败"})}))}))},cancelSubmit:function(){this.ruleForm={name:"",devicesClassify:"",content:"",id:""},this.dialogFormVisible=!1},getDevicesClassifyRequest:function(){var e=this;Object(s["m"])().then((function(t){0===t.code&&(e.options=t.data)}))}}},u=c,d=(n("fdfc"),n("2877")),m=Object(d["a"])(u,i,o,!1,null,"3429cc5e",null);t["default"]=m.exports},a888:function(e,t,n){"use strict";n("99af"),n("caad"),n("ac1f"),n("2532"),n("5319");var i={bind:function(e,t,n){var i=e.querySelector(".el-dialog__header"),o=e.querySelector(".el-dialog");i.style.cssText+=";cursor:move;",o.style.cssText+=";top:0px;";var a=function(){return window.document.currentStyle?function(e,t){return e.currentStyle[t]}:function(e,t){return getComputedStyle(e,!1)[t]}}();i.onmousedown=function(e){var t=e.clientX-i.offsetLeft,s=e.clientY-i.offsetTop,r=o.offsetWidth,l=o.offsetHeight,c=document.body.clientWidth,u=document.body.clientHeight,d=o.offsetLeft,m=c-o.offsetLeft-r,f=o.offsetTop,p=u-o.offsetTop-l,g=a(o,"left"),h=a(o,"top");g.includes("%")?(g=+document.body.clientWidth*(+g.replace(/\%/g,"")/100),h=+document.body.clientHeight*(+h.replace(/\%/g,"")/100)):(g=+g.replace(/\px/g,""),h=+h.replace(/\px/g,"")),document.onmousemove=function(e){var i=e.clientX-t,a=e.clientY-s;-i>d?i=-d:i>m&&(i=m),-a>f?a=-f:a>p&&(a=p),o.style.cssText+=";left:".concat(i+g,"px;top:").concat(a+h,"px;"),n.child.$emit("dragDialog")},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null}}}},o=function(e){e.directive("el-drag-dialog",i)};window.Vue&&(window["el-drag-dialog"]=i,Vue.use(o)),i.install=o;t["a"]=i},d6e3:function(e,t,n){},fdfc:function(e,t,n){"use strict";var i=n("d6e3"),o=n.n(i);o.a}}]);