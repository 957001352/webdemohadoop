(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7fbb42ca"],{"09f4":function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),Math.easeInOutQuad=function(e,t,a,s){return e/=s/2,e<1?a/2*e*e+t:(e--,-a/2*(e*(e-2)-1)+t)};var s=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function n(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function i(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function o(e,t,a){var o=i(),l=e-o,r=20,c=0;t="undefined"===typeof t?500:t;var d=function e(){c+=r;var i=Math.easeInOutQuad(c,o,l,t);n(i),c<t?s(e):a&&"function"===typeof a&&a()};d()}},"2ac3":function(e,t,a){"use strict";a.d(t,"e",(function(){return n})),a.d(t,"g",(function(){return i})),a.d(t,"d",(function(){return o})),a.d(t,"f",(function(){return l})),a.d(t,"a",(function(){return r})),a.d(t,"c",(function(){return c})),a.d(t,"b",(function(){return d}));var s=a("b775");function n(e){return Object(s["a"])({url:window.configs.api+"/mouldStorageHouse/findStorageList",method:"get",params:e})}function i(e){return Object(s["a"])({url:window.configs.api+"/mouldStorageHouse/saveStorage",method:"post",data:e})}function o(e){return Object(s["a"])({url:window.configs.api+"/mouldStorageHouse/findLocationList",method:"get",params:e})}function l(e){return Object(s["a"])({url:window.configs.api+"/mouldStorageHouse/saveLocation",method:"post",data:e})}function r(e){return Object(s["a"])({url:window.configs.api+"/mouldStorageHouse/deleteLocation",method:"get",params:{ids:e}})}function c(e){return Object(s["a"])({url:window.configs.api+"/mouldStorageHouse/findEmptyLocationList",method:"get",params:e})}function d(e){return Object(s["a"])({url:window.configs.api+"/logisticsProduct/getAllCode",method:"get",params:e})}},4492:function(e,t,a){"use strict";var s=a("60da"),n=a.n(s);n.a},"60da":function(e,t,a){},"6ace":function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return o}));var s=a("b775");function n(e){return Object(s["a"])({url:window.configs.api+"/attachment/upload",method:"post",data:e,heards:{"Content-Type":"multipart/form-data"}})}function i(e){return Object(s["a"])({url:window.configs.e2cUrl+"/productDevices/findList",method:"get",params:e})}function o(){return Object(s["a"])({url:window.configs.e2cUrl+"/devicesClassify/findList",method:"get"})}},a888:function(e,t,a){"use strict";a("99af"),a("caad"),a("ac1f"),a("2532"),a("5319");var s={bind:function(e,t,a){var s=e.querySelector(".el-dialog__header"),n=e.querySelector(".el-dialog");s.style.cssText+=";cursor:move;",n.style.cssText+=";top:0px;";var i=function(){return window.document.currentStyle?function(e,t){return e.currentStyle[t]}:function(e,t){return getComputedStyle(e,!1)[t]}}();s.onmousedown=function(e){var t=e.clientX-s.offsetLeft,o=e.clientY-s.offsetTop,l=n.offsetWidth,r=n.offsetHeight,c=document.body.clientWidth,d=document.body.clientHeight,u=n.offsetLeft,p=c-n.offsetLeft-l,f=n.offsetTop,m=d-n.offsetTop-r,g=i(n,"left"),h=i(n,"top");g.includes("%")?(g=+document.body.clientWidth*(+g.replace(/\%/g,"")/100),h=+document.body.clientHeight*(+h.replace(/\%/g,"")/100)):(g=+g.replace(/\px/g,""),h=+h.replace(/\px/g,"")),document.onmousemove=function(e){var s=e.clientX-t,i=e.clientY-o;-s>u?s=-u:s>p&&(s=p),-i>f?i=-f:i>m&&(i=m),n.style.cssText+=";left:".concat(s+g,"px;top:").concat(i+h,"px;"),a.child.$emit("dragDialog")},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null}}}},n=function(e){e.directive("el-drag-dialog",s)};window.Vue&&(window["el-drag-dialog"]=s,Vue.use(n)),s.install=n;t["a"]=s},b50b:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"e",(function(){return i})),a.d(t,"c",(function(){return o})),a.d(t,"d",(function(){return l})),a.d(t,"a",(function(){return r}));var s=a("b775");function n(e){return Object(s["a"])({url:window.configs.api+"/qualityInspection/findList",method:"get",params:e})}function i(e){return Object(s["a"])({url:window.configs.api+"/qualityInspection/save",method:"post",data:e})}function o(e){return Object(s["a"])({url:window.configs.api+"/qualityInspection/getInspectionDetail",method:"get",params:e})}function l(e){return Object(s["a"])({url:window.configs.api+"/qualityInspection/change",method:"post",data:e})}function r(e){return Object(s["a"])({url:window.configs.api+"/qualityInspection/getInspectionChangeLog",method:"get",params:e})}},babf:function(e,t,a){},c5cc:function(e,t,a){"use strict";var s=a("babf"),n=a.n(s);n.a},fde2:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"searchInfo"},[a("span",{staticClass:"seachname"},[e._v(" 零件代码: ")]),a("el-input",{staticClass:"inputCls",staticStyle:{"margin-right":"15px"},attrs:{placeholder:"请输入零件代码",clearable:""},model:{value:e.searchKey.code,callback:function(t){e.$set(e.searchKey,"code",t)},expression:"searchKey.code"}}),a("span",{staticClass:"seachname"},[e._v(" 零件名称: ")]),a("el-input",{staticClass:"inputCls",staticStyle:{"margin-right":"15px"},attrs:{placeholder:"请输入零件名称",clearable:""},model:{value:e.searchKey.name,callback:function(t){e.$set(e.searchKey,"name",t)},expression:"searchKey.name"}}),a("el-button",{staticClass:"primaryBtn",staticStyle:{"margin-left":"7px"},attrs:{type:"primary"},on:{click:e.searchBtn}},[a("svg-icon",{attrs:{"icon-class":"search"}}),e._v(" 查询 ")],1),a("el-button",{staticClass:"resetBtn",staticStyle:{"margin-left":"7px"},attrs:{type:"default",icon:"el-icon-refresh-right"},on:{click:e.searchrestBtn}},[e._v(" 重置 ")])],1),a("div",{staticClass:"searchInfo"},[e.hasPermission("incomingStandard/add")?a("el-button",{staticClass:"addBtn",attrs:{type:"default",icon:"el-icon-plus"},on:{click:e.addBtn}},[e._v(" 新建检验规范")]):e._e()],1),a("div",{staticClass:"el-tablenew"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.list,"row-class-name":e.tableRowClassName,border:"",height:"calc(100vh - 337px)"}},[a("el-table-column",{attrs:{prop:"date",label:"序号",align:"center",width:"55"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.$index+1)+" ")]}}])}),a("el-table-column",{attrs:{prop:"code",label:"零件代码",align:"center"}}),a("el-table-column",{attrs:{prop:"productName",label:"零件名称",align:"center"}}),a("el-table-column",{attrs:{prop:"drawing",label:"图纸编号",align:"center"}}),a("el-table-column",{attrs:{prop:"updateTime",label:"最近变更时间",align:"center",width:"155px"}}),a("el-table-column",{attrs:{prop:"reason",label:"变更原因",align:"center"}}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"defaultTextBtn",attrs:{type:"text"},on:{click:function(a){return e.findInfo(t.row)}}},[a("svg-icon",{attrs:{"icon-class":"search"}}),e._v(" 查看 ")],1),(!t.row.auditStatus||t.row.auditStatus.indexOf("待")<0)&&e.hasPermission("incomingStandard/change")?a("el-button",{staticClass:"addTextBtn",attrs:{type:"text"},on:{click:function(a){return e.editBtn(t.row)}}},[a("svg-icon",{attrs:{"icon-class":"edit"}}),e._v(" 变更 ")],1):e._e()]}}])})],1),a("pagination",{staticClass:"pagePadd",attrs:{total:e.total,page:e.pageIndex,limit:e.pageSize},on:{"update:page":function(t){e.pageIndex=t},"update:limit":function(t){e.pageSize=t},pagination:e.handleCurrentChange}})],1),e.dialogVisible?a("div",{staticClass:"repairsty"},[a("incoming-standard-info",{attrs:{objstr:e.objstr,type:e.type},on:{DetailCallBack:e.DetailCallBack}})],1):e._e()])},n=[],i=(a("b0c0"),a("b50b")),o=a("333d"),l=a("a888"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-page-header",{attrs:{content:"来料检验规范"},on:{back:function(t){return e.backClick(null)}}}),a("div",{staticClass:"content1"},[e._m(0),a("div",{staticClass:"contentBody"},[a("el-form",{ref:"forms",attrs:{model:e.forms,rules:e.rules,"label-position":"left","label-width":"130px"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"零件编号:",prop:"code"}},[a("el-select",{staticStyle:{width:"90%"},attrs:{disabled:"add"!==e.type,placeholder:"请选择零件编号",filterable:""},on:{change:function(t){return e.handleMateriel()}},model:{value:e.forms.code,callback:function(t){e.$set(e.forms,"code",t)},expression:"forms.code"}},e._l(e.materielList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.code,value:t}})})),1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"零件名称:",prop:"name"}},[a("el-input",{staticStyle:{width:"90%"},attrs:{disabled:!0,placeholder:"零件名称",maxlength:"20"},model:{value:e.forms.name,callback:function(t){e.$set(e.forms,"name",t)},expression:"forms.name"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"零件图号及版本:",prop:"version"}},[a("el-input",{staticStyle:{width:"90%"},attrs:{disabled:"add"!==e.type,placeholder:"零件图号及版本",maxlength:"20"},model:{value:e.forms.version,callback:function(t){e.$set(e.forms,"version",t)},expression:"forms.version"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"客户:",prop:"customer"}},[a("el-input",{staticStyle:{width:"90%"},attrs:{disabled:"add"!==e.type,placeholder:"客户",maxlength:"20"},model:{value:e.forms.customer,callback:function(t){e.$set(e.forms,"customer",t)},expression:"forms.customer"}})],1)],1)],1)],1)],1)]),a("div",{staticClass:"content1"},[e._m(1),a("div",{staticClass:"contentBody el-tablenew"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.list,"row-class-name":e.tableRowClassName,"span-method":e.objectSpanMethod,border:""}},[a("el-table-column",{attrs:{label:"检验项目",align:"center"}},[a("el-table-column",{attrs:{label:"产品特性",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(0===t.row.classify?"外观":1===t.row.classify?"包装":2===t.row.classify?"材质":3===t.row.classify?"尺寸":4===t.row.classify?"备注":"巡检时间")+" ")]}}])}),a("el-table-column",{attrs:{label:"特殊特性分类",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[4!==t.row.classify&&5!==t.row.classify?a("el-input",{attrs:{disabled:"find"===e.type,type:"textarea",autosize:"",placeholder:"内容",maxlength:"100"},model:{value:t.row.special,callback:function(a){e.$set(t.row,"special",a)},expression:"scope.row.special"}}):e._e(),4===t.row.classify?a("el-input",{attrs:{disabled:"find"===e.type,placeholder:"内容",type:"textarea",autosize:"",maxlength:"100"},model:{value:t.row.remark,callback:function(a){e.$set(t.row,"remark",a)},expression:"scope.row.remark"}}):e._e(),5===t.row.classify?a("el-input-number",{staticStyle:{"max-width":"300px"},attrs:{min:0,precision:0,controls:!1,disabled:"find"===e.type,placeholder:"小时"},model:{value:t.row.times,callback:function(a){e.$set(t.row,"times",a)},expression:"scope.row.times"}}):e._e(),5===t.row.classify?a("span",[e._v(" 小时")]):e._e()]}}])})],1),a("el-table-column",{attrs:{prop:"name",label:"产品/过程规范/公差",align:"center",width:"350px"},scopedSlots:e._u([{key:"default",fn:function(t){return[3!==t.row.classify&&4!==t.row.classify&&5!==t.row.classify?a("el-input",{attrs:{disabled:"find"===e.type,type:"textarea",autosize:"",placeholder:"内容",maxlength:"100"},model:{value:t.row.standard,callback:function(a){e.$set(t.row,"standard",a)},expression:"scope.row.standard"}}):e._e(),3===t.row.classify?a("el-row",{staticStyle:{padding:"0"}},[a("el-col",{attrs:{span:11}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0,precision:2,controls:!1,disabled:"find"===e.type,placeholder:"下限"},on:{blur:function(a){return e.handleChangeMin(t.$index)}},model:{value:t.row.standardmin,callback:function(a){e.$set(t.row,"standardmin",a)},expression:"scope.row.standardmin"}})],1),a("el-col",{attrs:{span:2}},[a("span",{staticStyle:{"line-height":"40px"}},[e._v(" ~ ")])]),a("el-col",{attrs:{span:11}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0,precision:2,controls:!1,disabled:"find"===e.type,placeholder:"上限"},on:{blur:function(a){return e.handleChangeMax(t.$index)}},model:{value:t.row.standardmax,callback:function(a){e.$set(t.row,"standardmax",a)},expression:"scope.row.standardmax"}})],1)],1):e._e()]}}])}),a("el-table-column",{attrs:{prop:"devicesName",label:"评价/测量技术",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[4!==t.row.classify&&5!==t.row.classify?a("el-input",{attrs:{disabled:"find"===e.type,type:"textarea",autosize:"",placeholder:"内容",maxlength:"100"},model:{value:t.row.evaluate,callback:function(a){e.$set(t.row,"evaluate",a)},expression:"scope.row.evaluate"}}):e._e()]}}])}),a("el-table-column",{attrs:{label:"检验频率/控制方法",align:"center"}},[a("el-table-column",{attrs:{label:"控制方法",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[4!==t.row.classify&&5!==t.row.classify?a("el-input",{attrs:{disabled:"find"===e.type,type:"textarea",autosize:"",placeholder:"内容",maxlength:"100"},model:{value:t.row.control,callback:function(a){e.$set(t.row,"control",a)},expression:"scope.row.control"}}):e._e()]}}])}),a("el-table-column",{attrs:{label:"检验阶段",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[4!==t.row.classify&&5!==t.row.classify?a("el-input",{attrs:{disabled:"find"===e.type,type:"textarea",autosize:"",placeholder:"内容",maxlength:"100"},model:{value:t.row.measure,callback:function(a){e.$set(t.row,"measure",a)},expression:"scope.row.measure"}}):e._e()]}}])}),a("el-table-column",{attrs:{label:"检验频率",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[4!==t.row.classify&&5!==t.row.classify?a("el-input",{attrs:{disabled:"find"===e.type,type:"textarea",autosize:"",placeholder:"内容",maxlength:"100"},model:{value:t.row.quota,callback:function(a){e.$set(t.row,"quota",a)},expression:"scope.row.quota"}}):e._e()]}}])})],1),a("el-table-column",{attrs:{prop:"devicesName",label:"附件",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["find"!==e.type&&4!==t.row.classify&&5!==t.row.classify?a("el-upload",{staticClass:"styeFile",attrs:{action:"","before-upload":e.beforeFile,"http-request":e.uploadImage,"show-file-list":!1}},[a("el-button",{staticClass:"primaryBtn",attrs:{size:"small",type:"primary"},on:{click:function(a){return e.getfile(t.$index)}}},[e._v("点击上传")])],1):e._e(),t.row.uploadFile?a("span",[a("el-link",{staticStyle:{"font-color":"#006fe6"},attrs:{type:"primary"},on:{click:function(a){return e.download(t.row.uploadFile)}}},[e._v(e._s(t.row.uploadFile.name+"."+t.row.uploadFile.suffix))])],1):e._e()]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return["find"!==e.type&&t.$index===t.row.start&&4!==t.row.classify&&5!==t.row.classify?a("el-button",{staticClass:"addTextBtn",attrs:{type:"text",icon:"el-icon-plus"},on:{click:function(a){return e.addBtn(t.row,t.$index)}}},[e._v(" 加项 ")]):e._e(),"find"!==e.type&&t.$index!==t.row.start&&4!==t.row.classify&&5!==t.row.classify?a("el-button",{staticClass:"deleteTextBtn",attrs:{type:"text",icon:"el-icon-minus"},on:{click:function(a){return e.deleteBtn(t.row,t.$index)}}},[e._v(" 减项 ")]):e._e()]}}])})],1)],1)]),"edit"===e.type?a("div",{staticClass:"content1"},[e._m(2),a("div",{staticClass:"contentBody",staticStyle:{overflow:"auto"}},[a("el-form",{ref:"upforms",attrs:{model:e.forms,rules:e.rules,"label-position":"left","label-width":"100px"}},[a("el-form-item",{attrs:{label:"变更原因:",prop:"upReason"}},[a("el-input",{staticStyle:{"max-width":"300px"},attrs:{placeholder:"变更原因",maxlength:"20"},model:{value:e.forms.upReason,callback:function(t){e.$set(e.forms,"upReason",t)},expression:"forms.upReason"}})],1),a("el-form-item",{attrs:{label:"变更内容:",prop:"dis"}},[a("el-input",{staticStyle:{"max-width":"300px"},attrs:{rows:5,resize:"none",type:"textarea",placeholder:"变更内容",maxlength:"50"},model:{value:e.forms.dis,callback:function(t){e.$set(e.forms,"dis",t)},expression:"forms.dis"}})],1)],1)],1)]):e._e(),"find"===e.type?a("div",{staticClass:"content1"},[e._m(3),a("div",{staticClass:"contentBody el-tablenew"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.logsList,"row-class-name":e.tableRowClassName,border:""}},[a("el-table-column",{attrs:{prop:"date",label:"序号",align:"center",width:"55"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.$index+1)+" ")]}}],null,!1,3056706777)}),a("el-table-column",{attrs:{prop:"version",label:"版本",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"createTime",label:"变更时间",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"createUserName",label:"变更人员",align:"center"}}),a("el-table-column",{attrs:{prop:"reason",label:"变更原因",align:"center"}}),a("el-table-column",{attrs:{prop:"content",label:"变更内容",align:"center"}}),a("el-table-column",{attrs:{prop:"updateType",label:"审核结果",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.auditStatus)+" ")]}}],null,!1,3774294532)}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"defaultTextBtn",attrs:{type:"text"},on:{click:function(a){return e.findInfo(t.row)}}},[a("svg-icon",{attrs:{"icon-class":"search"}}),e._v(" 查看 ")],1)]}}],null,!1,94581656)})],1)],1)]):e._e(),a("div",{staticClass:"bottom"},["find"!==e.type?a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm()}}},[e._v("保存")]):e._e()],1)],1)},c=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title"},[a("span",{staticClass:"ganggang"},[e._v("-")]),e._v(" 基本信息")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title"},[a("span",{staticClass:"ganggang"},[e._v("-")]),e._v(" 检验内容")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title"},[a("span",{staticClass:"ganggang"},[e._v("-")]),e._v(" 变更操作")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title"},[a("span",{staticClass:"ganggang"},[e._v("-")]),e._v(" 变更记录")])}],d=(a("c740"),a("a434"),a("ac1f"),a("1276"),a("b85c")),u=a("6ace"),p=a("2ac3"),f={name:"IncomingStandardInfo",directives:{elDragDialog:l["a"]},props:{objstr:{type:Object,default:null},type:{type:String,default:"add"}},data:function(){return{loading:!1,forms:{code:"",name:"",version:"",customer:"",upReason:"",dis:""},rules:{code:[{required:!0,message:"请输入零件编号",trigger:"blur"}],name:[{required:!0,message:"请输入零件名称",trigger:"blur"}],customer:[{required:!0,message:"请输入客户",trigger:"blur"}],upReason:[{required:!0,message:"请输入变更原因",trigger:"blur"}],dis:[{required:!0,message:"请输入变更内容",trigger:"blur"}]},uploadIndex:-1,logsList:[],materielList:[],list:[{classify:0,feature:"",special:"",process:"",standard:"",standardmin:"",standardmax:"",evaluate:"",measure:"",quota:"",control:"",inspectionId:"",uploadFile:"",start:0,end:0},{classify:1,feature:"",special:"",process:"",standard:"",standardmin:"",standardmax:"",evaluate:"",measure:"",quota:"",control:"",inspectionId:"",uploadFile:"",start:1,end:1},{classify:2,feature:"",special:"",process:"",standard:"",standardmin:"",standardmax:"",evaluate:"",measure:"",quota:"",control:"",inspectionId:"",uploadFile:"",start:2,end:2},{classify:3,feature:"",special:"",process:"",standard:"",standardmin:"",standardmax:"",evaluate:"",measure:"",quota:"",control:"",inspectionId:"",uploadFile:"",start:3,end:3},{classify:4,feature:"",special:"",process:"",standard:"",standardmin:"",standardmax:"",evaluate:"",measure:"",quota:"",control:"",inspectionId:"",uploadFile:"",remark:"",start:4,end:4}]}},computed:{},mounted:function(){this.getAllCodeRequest()},methods:{getAllCodeRequest:function(){var e=this;Object(p["b"])().then((function(t){if(0===t.code)if(t.data.length>0){if(e.materielList=t.data,"add"!==e.type){var a=e.materielList.findIndex((function(t){return t.id===e.objstr.productId}));e.logsList=e.objstr.qualityInspectionChangeLogs,console.log(e.logsList),e.forms={code:a,name:e.objstr.productName,version:e.objstr.drawing,customer:e.objstr.customer,upReason:"",dis:""},e.list=[];var s=e.objstr.qualityInspectionDetails;s.sort((function(e,t){return e.classify-t.classify}));var n,i=Object(d["a"])(s);try{for(i.s();!(n=i.n()).done;){var o=n.value;e.list.push({id:o.id,classify:o.classify,feature:o.feature,special:o.special,process:o.process,standard:o.standard,standardmin:3===o.classify?o.standard.split("-")[0]:"",standardmax:3===o.classify?o.standard.split("-")[1]:"",evaluate:o.evaluate,measure:o.measure,quota:o.quota,control:o.control,inspectionId:o.inspectionId,uploadFile:o.name?{path:o.path,webPath:o.webPath,name:o.name,suffix:o.suffix,dataId:o.id}:"",start:0,end:0})}}catch(l){i.e(l)}finally{i.f()}e.list.push({classify:4,feature:"",special:"",process:"",standard:"",standardmin:"",standardmax:"",evaluate:"",measure:"",quota:"",control:"",inspectionId:"",uploadFile:"",remark:e.objstr.note,start:4,end:4}),e.setMerge()}}else e.$message({type:"error",message:"没有零件信息!"});else e.$message({type:"error",message:"获取零件信息失败："+t.msg})}))},handleMateriel:function(){this.forms.name=this.materielList[this.forms.code].name},tableRowClassName:function(e){e.row;var t=e.rowIndex;return t%2===1?"table-row":""},objectSpanMethod:function(e){var t=e.row,a=(e.column,e.rowIndex),s=e.columnIndex;return 0!==s&&7!==s||t.start===t.end||4===t.classify||5===t.classify?0===s||4!==t.classify&&5!==t.classify?void 0:1===s?[1,8]:[0,0]:t.start===a?{rowspan:t.end-t.start+1,colspan:1}:{rowspan:0,colspan:0}},backClick:function(e){this.$emit("DetailCallBack",{result:e})},getfile:function(e){this.uploadIndex=e},beforeFile:function(e){var t=e.size/1024/1024<5;if(!t)return this.$message.error("上传图片大小不能超过 5MB!"),!1},uploadImage:function(e){var t=this,a=new FormData;a.append("file",e.file),a.append("isAdd",!0),Object(u["c"])(a).then((function(e){0===e.code&&(t.list[t.uploadIndex].uploadFile=e.data,t.list[t.uploadIndex].id=e.data.dataId,t.$message({type:"success",message:"上传成功！"}))}))},download:function(e){var t=window.configs.api+"/attachment/downByPath?path="+e.path,a=window.open(encodeURI(t));setTimeout((function(){a.close()}),1e3)},handleChangeMin:function(e){this.list[e].standardmax&&parseFloat(this.list[e].standardmin+"")>=parseFloat(this.list[e].standardmax+"")&&(this.list[e].standardmin="",this.$message({type:"error",message:"尺寸下限必须小于上线！"})),this.getLink(e)},handleChangeMax:function(e){this.list[e].standardmin&&parseFloat(this.list[e].standardmin+"")>=parseFloat(this.list[e].standardmax+"")&&(this.list[e].standardmax=this.list[e].standardmin+1,this.$message({type:"error",message:"尺寸下限必须小于上线！"})),this.getLink(e)},getLink:function(e){this.list[e].standardmin&&this.list[e].standardmax?this.list[e].standard=this.list[e].standardmin+"-"+this.list[e].standardmax:this.list[e].standard=""},deleteBtn:function(e,t){this.list.splice(t,1),this.setMerge()},addBtn:function(e,t){var a={classify:e.classify,feature:"1",special:"",process:"",standard:"",standardmin:"",standardmax:"",evaluate:"",measure:"",quota:"",control:"",inspectionId:e.inspectionId,uploadFile:"",start:3,end:3};this.list.splice(t+(e.end-e.start)+1,0,a),this.setMerge()},setMerge:function(){for(var e=0,t=0,a=-1,s=0;s<this.list.length;s++){if(a!==this.list[s].classify){a=this.list[s].classify,e=s,t=s;for(var n=s;n<this.list.length;n++)if(a!==this.list[n].classify){t=n-1;break}}this.list[s].start=parseInt(e+""),this.list[s].end=parseInt(t+"")}console.log(this.list)},findInfo:function(e){this.list=JSON.parse(e.inspectionContent)},submitForm:function(){var e=this,t="add"===this.type?"forms":"upforms";this.$refs[t].validate((function(t){if(t){var a,s=!1,n=[],o="",l=Object(d["a"])(e.list);try{for(l.s();!(a=l.n()).done;){var r=a.value;if(4!==r.classify&&5!==r.classify){if(!r.standard||!r.evaluate||!r.measure||!r.quota||!r.control){s=!0;break}if(3===r.classify&&!r.special){s=!0;break}n.push({classify:r.classify,control:r.control,evaluate:r.evaluate,feature:r.feature,measure:r.measure,process:r.process,quota:r.quota,special:r.special,standard:r.standard,id:r.uploadFile?r.uploadFile.dataId:void 0})}else 4===r.classify&&(o=r.remark)}}catch(p){l.e(p)}finally{l.f()}if(s)return e.$message({message:"请填写完整的检验规范",type:"error"}),!1;if("add"===e.type){var c={classify:0,customer:e.forms.customer,drawing:e.forms.version,note:o,productId:e.materielList[e.forms.code].id,qualityInspectionDetails:n};Object(i["e"])(c).then((function(t){0===t.code?(e.$message({message:"操作成功!",type:"success"}),e.backClick("1")):1e3===t.code&&e.$message({message:t.msg,type:"error"})}))}else{var u={id:e.objstr.id,classify:0,customer:e.forms.customer,drawing:e.forms.version,productId:e.materielList[e.forms.code].id,qualityInspectionChangeLog:{content:e.forms.dis,inspectionContent:JSON.stringify(e.list),reason:e.forms.upReason},qualityInspectionDetails:n};Object(i["d"])(u).then((function(t){0===t.code?(e.$message({message:"操作成功!",type:"success"}),e.backClick("1")):1e3===t.code&&e.$message({message:t.msg,type:"error"})}))}}}))}}},m=f,g=(a("c5cc"),a("2877")),h=Object(g["a"])(m,r,c,!1,null,"d192dafc",null),b=h.exports,y={name:"IncomingStandard",directives:{elDragDialog:l["a"]},components:{Pagination:o["a"],"incoming-standard-info":b},data:function(){return{loading:!1,dialogVisible:!1,disabled:!1,dialogTitle:"",searchKey:{name:"",code:""},type:"add",total:0,objstr:null,pageIndex:1,pageSize:10,currentId:0,list:[]}},computed:{},mounted:function(){this.fetchDate()},methods:{tableRowClassName:function(e){e.row;var t=e.rowIndex;return t%2===1?"table-row":""},fetchDate:function(){var e=this;this.list=[],this.multipleSelection=[],this.loading=!0;var t={productName:this.searchKey.name+""?this.searchKey.name:null,code:this.searchKey.code+""?this.searchKey.code:null,classify:0,pageNum:this.pageIndex,pageSize:this.pageSize};Object(i["b"])(t).then((function(t){e.loading=!1,0===t.code&&(e.list=t.data.list,e.total=t.data.total)}))},searchBtn:function(){this.fetchDate()},searchrestBtn:function(){this.searchKey={name:"",code:""},this.pageIndex=1,this.pageSize=10,this.fetchDate()},handleCurrentChange:function(){this.fetchDate()},DetailCallBack:function(e){this.dialogVisible=!1,"1"===e.result&&this.fetchDate()},findInfo:function(e){this.type="find",this.dialogVisible=!0,this.objstr=e},addBtn:function(){this.type="add",this.dialogVisible=!0},editBtn:function(e){this.dialogVisible=!0,this.type="edit",this.objstr=e}}},w=y,v=(a("4492"),Object(g["a"])(w,s,n,!1,null,"4f6d1b84",null));t["default"]=v.exports}}]);