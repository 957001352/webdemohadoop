(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-03d29da3"],{"09f4":function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),Math.easeInOutQuad=function(e,t,a,s){return e/=s/2,e<1?a/2*e*e+t:(e--,-a/2*(e*(e-2)-1)+t)};var s=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function i(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function r(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function n(e,t,a){var n=r(),o=e-n,l=20,c=0;t="undefined"===typeof t?500:t;var u=function e(){c+=l;var r=Math.easeInOutQuad(c,n,o,t);i(r),c<t?s(e):a&&"function"===typeof a&&a()};u()}},"3f98":function(e,t,a){"use strict";a.d(t,"e",(function(){return i})),a.d(t,"k",(function(){return r})),a.d(t,"h",(function(){return n})),a.d(t,"q",(function(){return o})),a.d(t,"b",(function(){return l})),a.d(t,"f",(function(){return c})),a.d(t,"r",(function(){return u})),a.d(t,"c",(function(){return p})),a.d(t,"n",(function(){return m})),a.d(t,"j",(function(){return d})),a.d(t,"i",(function(){return f})),a.d(t,"g",(function(){return h})),a.d(t,"a",(function(){return b})),a.d(t,"p",(function(){return v})),a.d(t,"m",(function(){return g})),a.d(t,"d",(function(){return w})),a.d(t,"l",(function(){return y})),a.d(t,"o",(function(){return _}));var s=a("b775");function i(e){return Object(s["a"])({url:window.configs.api+"/mouldKeepItem/findList",method:"get",params:e})}function r(e){return Object(s["a"])({url:window.configs.api+"/mouldKeepItem/getMouldKeepItem",method:"get",params:e})}function n(e){return Object(s["a"])({url:window.configs.api+"/mouldKeepTeam/getKeepItemByCycle",method:"get",params:e})}function o(e){return Object(s["a"])({url:window.configs.api+"/mouldKeepItem/save",method:"post",data:e})}function l(e){return Object(s["a"])({url:window.configs.api+"/mouldKeepItem/delete",method:"get",params:e})}function c(e){return Object(s["a"])({url:window.configs.api+"/mouldKeepTeam/findList",method:"get",params:e})}function u(e){return Object(s["a"])({url:window.configs.api+"/mouldKeepTeam/save",method:"post",data:e})}function p(e){return Object(s["a"])({url:window.configs.api+"/mouldKeepTeam/delete",method:"get",params:e})}function m(){return Object(s["a"])({url:window.configs.api+"/mouldKeepTeam/getAllKeepItem",method:"get"})}function d(){return Object(s["a"])({url:window.configs.api+"/mouldKeepTeam/getMouldCode",method:"get"})}function f(e){return Object(s["a"])({url:window.configs.api+"/mouldKeepPlan/findList",method:"get",params:e})}function h(){return Object(s["a"])({url:window.configs.api+"/mouldKeepPlan/getAllKeepTeam",method:"get"})}function b(e){return Object(s["a"])({url:window.configs.api+"/mouldKeepPlan/delete",method:"get",params:e})}function v(e){return Object(s["a"])({url:window.configs.api+"/mouldKeepPlan/save",method:"post",data:e})}function g(e){return Object(s["a"])({url:window.configs.api+"/mouldKeepTask/findList",method:"get",params:e})}function w(e){return Object(s["a"])({url:window.configs.api+"/mouldKeepTask/findHistoryList",method:"get",params:e})}function y(e){return Object(s["a"])({url:window.configs.api+"/mouldKeepTask/getMouldKeepTask",method:"get",params:e})}function _(e){return Object(s["a"])({url:window.configs.api+"/mouldKeepTask/postPoned",method:"get",params:e})}},"6ace":function(e,t,a){"use strict";a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return n}));var s=a("b775");function i(e){return Object(s["a"])({url:window.configs.api+"/attachment/upload",method:"post",data:e,heards:{"Content-Type":"multipart/form-data"}})}function r(e){return Object(s["a"])({url:window.configs.e2cUrl+"/productDevices/findList",method:"get",params:e})}function n(){return Object(s["a"])({url:window.configs.e2cUrl+"/devicesClassify/findList",method:"get"})}},"72c7":function(e,t,a){"use strict";a.d(t,"e",(function(){return i})),a.d(t,"f",(function(){return r})),a.d(t,"m",(function(){return n})),a.d(t,"a",(function(){return o})),a.d(t,"c",(function(){return l})),a.d(t,"h",(function(){return c})),a.d(t,"j",(function(){return u})),a.d(t,"l",(function(){return p})),a.d(t,"k",(function(){return m})),a.d(t,"i",(function(){return d})),a.d(t,"d",(function(){return f})),a.d(t,"b",(function(){return h})),a.d(t,"g",(function(){return b}));var s=a("b775");function i(e){return Object(s["a"])({url:window.configs.api+"/mouldRepairItem/findList",method:"get",params:e})}function r(){return Object(s["a"])({url:window.configs.e2cUrl+"/devicesClassify/findList",method:"get"})}function n(e){return Object(s["a"])({url:window.configs.api+"/mouldRepairItem/save",method:"post",data:e})}function o(e){return Object(s["a"])({url:window.configs.api+"/mouldRepairItem/delete",method:"get",params:e})}function l(e){return Object(s["a"])({url:window.configs.api+"/mouldRepair/findList",method:"get",params:e})}function c(e){return Object(s["a"])({url:window.configs.api+"/mouldRepair/makeProject",method:"post",data:e})}function u(e){return Object(s["a"])({url:window.configs.api+"/mouldRepair/delete",method:"get",params:e})}function p(e){return Object(s["a"])({url:window.configs.api+"/mouldRepair/repairTaskExecute",method:"post",data:e})}function m(e){return Object(s["a"])({url:window.configs.api+"/mouldRepair/save",method:"post",data:e})}function d(e){return Object(s["a"])({url:window.configs.api+"/devicesProblem/findList",method:"get",params:e})}function f(e){return Object(s["a"])({url:window.configs.api+"/mouldStorage/findMouldSpareStoreAndUse",method:"get",params:e})}function h(){return Object(s["a"])({url:window.configs.api+"/mouldStorage/findListSpareInfo",method:"get"})}function b(e){return Object(s["a"])({url:window.configs.api+"/mouldRepair/getTask",method:"post",data:e})}},a15b:function(e,t,a){"use strict";var s=a("23e7"),i=a("44ad"),r=a("fc6a"),n=a("a640"),o=[].join,l=i!=Object,c=n("join",",");s({target:"Array",proto:!0,forced:l||!c},{join:function(e){return o.call(r(this),void 0===e?",":e)}})},a87c:function(e,t,a){"use strict";var s=a("f993"),i=a.n(s);i.a},a888:function(e,t,a){"use strict";a("99af"),a("caad"),a("ac1f"),a("2532"),a("5319");var s={bind:function(e,t,a){var s=e.querySelector(".el-dialog__header"),i=e.querySelector(".el-dialog");s.style.cssText+=";cursor:move;",i.style.cssText+=";top:0px;";var r=function(){return window.document.currentStyle?function(e,t){return e.currentStyle[t]}:function(e,t){return getComputedStyle(e,!1)[t]}}();s.onmousedown=function(e){var t=e.clientX-s.offsetLeft,n=e.clientY-s.offsetTop,o=i.offsetWidth,l=i.offsetHeight,c=document.body.clientWidth,u=document.body.clientHeight,p=i.offsetLeft,m=c-i.offsetLeft-o,d=i.offsetTop,f=u-i.offsetTop-l,h=r(i,"left"),b=r(i,"top");h.includes("%")?(h=+document.body.clientWidth*(+h.replace(/\%/g,"")/100),b=+document.body.clientHeight*(+b.replace(/\%/g,"")/100)):(h=+h.replace(/\px/g,""),b=+b.replace(/\px/g,"")),document.onmousemove=function(e){var s=e.clientX-t,r=e.clientY-n;-s>p?s=-p:s>m&&(s=m),-r>d?r=-d:r>f&&(r=f),i.style.cssText+=";left:".concat(s+h,"px;top:").concat(r+b,"px;"),a.child.$emit("dragDialog")},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null}}}},i=function(e){e.directive("el-drag-dialog",s)};window.Vue&&(window["el-drag-dialog"]=s,Vue.use(i)),s.install=i;t["a"]=s},baa5:function(e,t,a){var s=a("23e7"),i=a("e58c");s({target:"Array",proto:!0,forced:i!==[].lastIndexOf},{lastIndexOf:i})},cee2:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"header"},[a("div",{staticClass:"headerBackBtn el-icon-arrow-left",on:{click:e.backClick}},[e._v(" 返回")]),a("span",{staticClass:"headerTiitle"},[e._v(e._s("find"===e.type?"维修工单详情":"set"===e.type?"制定维修方案":"维修任务执行"))]),a("span",{staticClass:"headerTiitle"},[e._v("编号："+e._s(e.code))])]),a("div",{staticClass:"content1"},[e._m(0),a("div",{staticClass:"contentBody"},[a("el-row",[a("el-col",{attrs:{span:2}},[e._v("模具编号：")]),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"contentText"},[e._v(e._s(e.deviceCode))])]),a("el-col",{attrs:{span:2}},[e._v("模具名称：")]),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"contentText"},[e._v(e._s(e.classesName))])])],1),a("el-row",[a("el-col",{attrs:{span:2}},[e._v("问题：")]),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"contentText"},[e._v(e._s(e.question))])]),a("el-col",{attrs:{span:2}},[e._v("问题描述：")]),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"contentText"},[e._v(e._s(e.questionDesc))])])],1),a("el-row",[a("el-col",{attrs:{span:2}},[e._v("维修前照片：")]),a("el-col",{attrs:{span:20}},[a("div",{staticClass:"beforeMaintenanceImg"},e._l(e.beforePic,(function(t,s){return a("el-image",{key:s,staticStyle:{width:"100px",height:"100px","margin-right":"15px"},attrs:{src:t,"preview-src-list":e.beforePic}})})),1)])],1),a("el-row",[a("el-col",{attrs:{span:3}},[e._v("维修申请时间：")]),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"contentText"},[e._v(e._s(e.createTime))])])],1)],1)]),"go"===e.type||"find"===e.type&&1===e.repairProjectStatus?a("div",{staticClass:"content1"},[e._m(1),a("div",{staticClass:"contentBody"},[a("el-row",[a("el-col",{attrs:{span:3}},[e._v("维修方案项目：")]),a("el-col",{attrs:{span:12}},[a("span",{staticClass:"contentText"},[e._v(e._s(e.devicesRepairItemName))])])],1),a("el-row",[a("el-col",{staticClass:"lines",attrs:{span:2}},[e._v("备品备件")]),a("el-col",{attrs:{span:12}},e._l(e.listSpare,(function(t,s){return a("el-row",{key:s,staticClass:"infoste"},[a("el-col",{attrs:{span:12}},[e._v(" 品名： "),a("el-select",{staticClass:"inputCls fontes",staticStyle:{width:"120px","margin-right":"15px"},attrs:{placeholder:"请输入品名",disabled:""},model:{value:t.machineName,callback:function(a){e.$set(t,"machineName",a)},expression:"item.machineName"}},e._l(e.stockInfoLists,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-col",{staticClass:"lines",attrs:{span:12}},[a("el-radio",{staticStyle:{"margin-left":"33px"},attrs:{label:"1",disabled:""},model:{value:t.status,callback:function(a){e.$set(t,"status",a)},expression:"item.status"}},[e._v("更换")]),a("el-radio",{attrs:{label:"0",disabled:""},model:{value:t.status,callback:function(a){e.$set(t,"status",a)},expression:"item.status"}},[e._v("维修")])],1)],1)})),1)],1),a("el-row",[a("el-col",{attrs:{span:2}},[e._v("方案补充：")]),a("el-col",{attrs:{span:20}},[a("el-col",{attrs:{span:12}},[a("span",{staticClass:"contentText"},[e._v(e._s(e.addPlan))])])],1)],1),a("el-row",[a("el-col",{attrs:{span:2}},[e._v("方案附件：")]),a("el-col",{attrs:{span:20}},e._l(e.planFile,(function(t,s){return a("el-link",{key:s,staticStyle:{"font-color":"#006fe6","margin-right":"15px"},attrs:{type:"primary"},on:{click:function(a){return e.download(t)}}},[e._v(e._s(t.name)+"."+e._s(t.suffix))])})),1)],1),a("el-row",[a("el-col",{attrs:{span:2}},[e._v("预计耗时：")]),a("el-col",{attrs:{span:12}},[a("span",{staticClass:"contentText"},[e._v(e._s(e.planHour)+"小时")])])],1),a("el-row",[a("el-col",{attrs:{span:2}},[e._v("维修后评审：")]),a("el-col",{attrs:{span:20}},[a("el-radio",{attrs:{label:"1",disabled:""},model:{value:e.isReview,callback:function(t){e.isReview=t},expression:"isReview"}},[e._v("是")]),a("el-radio",{attrs:{label:"0",disabled:""},model:{value:e.isReview,callback:function(t){e.isReview=t},expression:"isReview"}},[e._v("否")])],1)],1),a("el-row",[a("el-col",{attrs:{span:2}},[e._v("制定人员：")]),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"contentText"},[e._v(e._s(e.projectCreateUserName))])]),a("el-col",{attrs:{span:2}},[e._v("制定时间：")]),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"contentText"},[e._v(e._s(e.projectCreateTime))])])],1)],1)]):e._e(),"set"===e.type?a("div",{staticClass:"content1"},[e._m(2),a("div",{staticClass:"contentBody"},[a("el-form",{ref:"forms",attrs:{model:e.forms,rules:e.rules,"label-position":"left","label-width":"100px"}},[a("el-form-item",{attrs:{label:"维修项目",prop:"product"}},[a("el-select",{staticStyle:{"margin-left":"33px","max-width":"500px"},attrs:{placeholder:"维修项目",size:"small",filterable:"",multiple:"","collapse-tags":""},model:{value:e.forms.product,callback:function(t){e.$set(e.forms,"product",t)},expression:"forms.product"}},e._l(e.productList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"备品备件"}},[a("div",{staticClass:"bplist",staticStyle:{"margin-left":"33px"}},e._l(e.sparePart,(function(t,s){return a("div",{key:s},[a("span",{staticClass:"seachname"},[e._v(" 品名: ")]),a("el-select",{staticClass:"inputCls",staticStyle:{width:"120px","margin-right":"15px"},attrs:{placeholder:"请输入品名",filterable:""},on:{change:function(t){return e.getDisable()}},model:{value:t.machineName,callback:function(a){e.$set(t,"machineName",a)},expression:"item.machineName"}},e._l(e.stockInfoLists,(function(t,s){return a("el-option",{key:s,attrs:{disabled:1===e.isDisables[t.id],label:t.name,value:t.id}})})),1),a("el-radio",{attrs:{label:"0"},model:{value:t.status,callback:function(a){e.$set(t,"status",a)},expression:"item.status"}},[e._v("维修")]),a("el-radio",{attrs:{label:"1"},model:{value:t.status,callback:function(a){e.$set(t,"status",a)},expression:"item.status"}},[e._v("更换")]),0===s?a("el-button",{staticClass:"addTextBtn addposi",attrs:{type:"text",icon:"el-icon-plus"},on:{click:function(t){return e.addBP()}}}):e._e(),0!==s?a("el-button",{staticClass:"deleteTextBtn addposi",attrs:{type:"text"},on:{click:function(t){return e.deleteBP(s)}}},[a("svg-icon",{attrs:{"icon-class":"delete"}})],1):e._e()],1)})),0)]),a("el-form-item",{attrs:{label:"方案补充"}},[a("el-input",{staticStyle:{"max-width":"500px"},attrs:{rows:5,resize:"none",type:"textarea",placeholder:"请输入方案补充",maxlength:"50"},on:{input:function(t){e.forms.remark=e.inputRule(e.forms.remark)}},model:{value:e.forms.remark,callback:function(t){e.$set(e.forms,"remark",t)},expression:"forms.remark"}})],1),a("el-form-item",{attrs:{label:"方案附件"}},[a("el-upload",{staticClass:"styeFile",staticStyle:{"margin-left":"33px","max-width":"500px"},attrs:{action:"",limit:3,"on-remove":e.handleRemove,"file-list":e.fileList,"http-request":e.uploadImage}},[a("el-button",{staticClass:"primaryBtn",attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1),a("el-form-item",{attrs:{label:"预计耗时",prop:"planHour"}},[a("el-input-number",{staticStyle:{"margin-left":"33px","max-width":"500px"},attrs:{precision:1,step:.1,max:1e3,min:0,controls:!1,placeholder:"请输入预计耗时"},model:{value:e.forms.planHour,callback:function(t){e.$set(e.forms,"planHour",t)},expression:"forms.planHour"}}),e._v(" 小时 ")],1),a("el-form-item",{attrs:{label:"维修后评审"}},[a("el-radio",{staticStyle:{"margin-left":"33px"},attrs:{label:"1"},model:{value:e.forms.isReview,callback:function(t){e.$set(e.forms,"isReview",t)},expression:"forms.isReview"}},[e._v("是")]),a("el-radio",{attrs:{label:"0"},model:{value:e.forms.isReview,callback:function(t){e.$set(e.forms,"isReview",t)},expression:"forms.isReview"}},[e._v("否")])],1)],1)],1)]):e._e(),"task"===e.type?a("div",{staticClass:"content1"},[e._m(3),a("div",{staticClass:"contentBody"},[a("el-form",{ref:"forms",attrs:{model:e.forms,rules:e.rules,"label-position":"left","label-width":"100px"}},[a("el-form-item",{attrs:{label:"备品备件"}},[a("div",{staticClass:"bplist",staticStyle:{"margin-left":"33px"}},e._l(e.sparePart,(function(t,s){return a("div",{key:s},[a("span",{staticClass:"seachname"},[e._v(" 品名: ")]),a("el-select",{staticClass:"inputCls",staticStyle:{width:"120px","margin-right":"15px"},attrs:{placeholder:"请输入品名",filterable:""},on:{change:function(t){return e.getDisable()}},model:{value:t.machineName,callback:function(a){e.$set(t,"machineName",a)},expression:"item.machineName"}},e._l(e.stockInfoLists,(function(t,s){return a("el-option",{key:s,attrs:{disabled:1===e.isDisables[t.id],label:t.name,value:t.id}})})),1),a("el-radio",{attrs:{label:"0"},model:{value:t.status,callback:function(a){e.$set(t,"status",a)},expression:"item.status"}},[e._v("维修")]),a("el-radio",{attrs:{label:"1"},model:{value:t.status,callback:function(a){e.$set(t,"status",a)},expression:"item.status"}},[e._v("更换")]),e._v(" 数量: "),a("el-input-number",{staticClass:"inputCls",staticStyle:{"margin-left":"10px",width:"100px"},attrs:{step:1,max:100,min:0,controls:!1,placeholder:"请输入数量"},model:{value:t.num,callback:function(a){e.$set(t,"num",a)},expression:"item.num"}}),0===s?a("el-button",{staticClass:"addTextBtn addposi",staticStyle:{"margin-left":"30px"},attrs:{type:"text",icon:"el-icon-plus"},on:{click:function(a){return e.addBP(t)}}}):e._e(),0!==s?a("el-button",{staticClass:"deleteTextBtn addposi",staticStyle:{"margin-left":"30px"},attrs:{type:"text"},on:{click:function(t){return e.deleteBP(s)}}},[a("svg-icon",{attrs:{"icon-class":"delete"}})],1):e._e()],1)})),0)]),a("el-form-item",{attrs:{label:"预计耗时",prop:"planHour"}},[a("el-input-number",{staticStyle:{"margin-left":"33px","max-width":"500px"},attrs:{precision:1,step:.1,max:1e3,min:0,controls:!1,placeholder:"请输入预计耗时"},model:{value:e.forms.planHour,callback:function(t){e.$set(e.forms,"planHour",t)},expression:"forms.planHour"}}),e._v(" 小时 ")],1)],1)],1)]):e._e(),"go"===e.type?a("div",{staticClass:"content1"},[e._m(4),a("div",{staticClass:"contentBody"},[a("el-form",{ref:"forms",attrs:{model:e.forms,rules:e.rules,"label-position":"left","label-width":"100px"}},[a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{staticStyle:{"max-width":"500px"},attrs:{rows:5,resize:"none",type:"textarea",placeholder:"备注",maxlength:"50"},on:{input:function(t){e.forms.remark=e.inputRule(e.forms.remark)}},model:{value:e.forms.remark,callback:function(t){e.$set(e.forms,"remark",t)},expression:"forms.remark"}})],1),a("el-form-item",{attrs:{label:"型腔数",prop:"cavityNumber"}},[a("el-input-number",{staticClass:"inputCls",staticStyle:{"margin-left":"33px",width:"100px"},attrs:{step:1,max:10,min:0,controls:!1,placeholder:"请输入型腔数"},model:{value:e.forms.cavityNumber,callback:function(t){e.$set(e.forms,"cavityNumber",t)},expression:"forms.cavityNumber"}})],1),a("el-form-item",{attrs:{label:"维修后照片",prop:"beforeFile"}},[a("el-upload",{staticStyle:{"margin-left":"33px"},attrs:{action:"",limit:4,"file-list":e.fileList,"before-upload":e.beforeFile,"http-request":e.uploadImage,"list-type":"picture-card"},scopedSlots:e._u([{key:"file",fn:function(t){var s=t.file;return a("div",{},[a("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:e.uploadImg+s.webPath,alt:""}}),a("span",{staticClass:"el-upload-list__item-actions"},[a("span",{staticClass:"el-upload-list__item-preview",on:{click:function(t){return e.handlePictureCardPreview(s)}}},[a("i",{staticClass:"el-icon-zoom-in"})]),a("span",{staticClass:"el-upload-list__item-delete",on:{click:function(t){return e.handleRemoves(s)}}},[a("i",{staticClass:"el-icon-delete"})])])])}}],null,!1,3906420530)},[a("i",{staticClass:"el-icon-plus"}),a("el-input",{staticStyle:{"margin-left":"33px",display:"none"},on:{input:function(t){e.forms.beforeFile=e.inputRule(e.forms.beforeFile)}},model:{value:e.forms.beforeFile,callback:function(t){e.$set(e.forms,"beforeFile",t)},expression:"forms.beforeFile"}})],1)],1),a("el-form-item",{attrs:{label:"开始时间",prop:"startTime"}},[a("el-date-picker",{staticStyle:{"margin-left":"33px","max-width":"500px"},attrs:{editable:!1,clearable:!1,"picker-options":e.startPickerOptions,type:"datetime",placeholder:"开始时间",size:"small"},model:{value:e.forms.startTime,callback:function(t){e.$set(e.forms,"startTime",t)},expression:"forms.startTime"}})],1),a("el-form-item",{attrs:{label:"结束时间",prop:"endTime"}},[a("el-date-picker",{staticStyle:{"margin-left":"33px","max-width":"500px"},attrs:{editable:!1,clearable:!1,"picker-options":e.endPickerOptions,type:"datetime",placeholder:"结束时间",size:"small"},model:{value:e.forms.endTime,callback:function(t){e.$set(e.forms,"endTime",t)},expression:"forms.endTime"}})],1)],1)],1)]):e._e(),"find"===e.type&&1===e.repairTaskExeStatus?a("div",{staticClass:"content1"},[e._m(5),a("div",{staticClass:"contentBody"},[a("el-row",[a("el-col",{staticClass:"lines",attrs:{span:2}},[e._v("备品备件")]),a("el-col",{attrs:{span:12}},e._l(e.listSpare,(function(t,s){return a("el-row",{key:s,staticClass:"infoste"},[a("el-col",{attrs:{span:12}},[e._v(" 品名： "),a("el-select",{staticClass:"inputCls fontes",staticStyle:{width:"120px","margin-right":"15px"},attrs:{placeholder:"请输入品名",disabled:""},model:{value:t.machineName,callback:function(a){e.$set(t,"machineName",a)},expression:"item.machineName"}},e._l(e.stockInfoLists,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1),e._v(" 数量： "+e._s(t.num)+" ")],1),a("el-col",{staticClass:"lines",attrs:{span:12}},[a("el-radio",{staticStyle:{"margin-left":"33px"},attrs:{label:"1",disabled:""},model:{value:t.status,callback:function(a){e.$set(t,"status",a)},expression:"item.status"}},[e._v("是")]),a("el-radio",{attrs:{label:"0",disabled:""},model:{value:t.status,callback:function(a){e.$set(t,"status",a)},expression:"item.status"}},[e._v("否")])],1)],1)})),1)],1),a("el-row",[a("el-col",{attrs:{span:2}},[e._v("维修后照片：")]),a("el-col",{attrs:{span:20}},[a("div",{staticClass:"beforeMaintenanceImg"},e._l(e.afterPic,(function(t,s){return a("el-image",{key:s,staticStyle:{width:"100px",height:"100px","margin-right":"15px"},attrs:{src:t,"preview-src-list":e.afterPic}})})),1)])],1),a("el-row",[a("el-col",{attrs:{span:2}},[e._v("备注")]),a("el-col",{attrs:{span:12}},[a("span",{staticClass:"contentText"},[e._v(e._s(e.remark))])])],1),a("el-row",[a("el-col",{attrs:{span:2}},[e._v("维修开始时间：")]),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"contentText"},[e._v(e._s(e.startTime))])]),a("el-col",{attrs:{span:2}},[e._v("维修结束时间：")]),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"contentText"},[e._v(e._s(e.endTime))])])],1)],1)]):e._e(),a("div",{staticClass:"bottom"},["find"!==e.type?a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("forms")}}},[e._v("保存")]):e._e()],1),a("el-dialog",{attrs:{visible:e.dialogImgVisible},on:{"update:visible":function(t){e.dialogImgVisible=t}}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title"},[a("span",{staticClass:"ganggang"},[e._v("-")]),e._v(" 基本信息")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title"},[a("span",{staticClass:"ganggang"},[e._v("-")]),e._v(" 维修方案")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title"},[a("span",{staticClass:"ganggang"},[e._v("-")]),e._v(" 维修方案")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title"},[a("span",{staticClass:"ganggang"},[e._v("-")]),e._v(" 维修任务执行")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title"},[a("span",{staticClass:"ganggang"},[e._v("-")]),e._v(" 维修任务执行")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title"},[a("span",{staticClass:"ganggang"},[e._v("-")]),e._v(" 任务执行")])}],r=(a("a15b"),a("baa5"),a("a434"),a("b0c0"),a("ac1f"),a("1276"),a("b85c")),n=a("72c7"),o=a("6ace"),l=a("ed08"),c={name:"GoRepairMould",components:{},props:{objstr:{type:String,default:""}},data:function(){var e=this;return{dialogImgVisible:!1,dialogImageUrl:"",type:"",repairProjectStatus:0,repairTaskExeStatus:0,code:"",deviceCode:"",currentId:0,classesName:"",question:"",questionDesc:"",beforePic:[],afterPic:[],uploadImg:window.configs.api,createTime:"",productList:[],fileList:[],isDisables:{},forms:{product:[],remark:"",planHour:"",beforeFile:"",isReview:"1",startTime:"",endTime:"",cavityNumber:""},listSpare:[],endlistSpare:[],startTime:"",endTime:"",startPickerOptions:{disabledDate:function(t){return""!==e.forms.endTime&&null!==e.forms.endTime&&t.getTime()>e.forms.endTime}},endPickerOptions:{disabledDate:function(t){return""!==e.forms.startTime&&null!==e.forms.startTime&&t.getTime()<e.forms.startTime}},sparePart:[{machineName:"",status:"1",num:1}],rules:{product:[{required:!0,message:"请选择维修项目",trigger:"blur"}],planHour:[{required:!0,message:"请输入预计耗时",trigger:"blur"}],isReview:[{required:!0,message:"请选择是否评审",trigger:"blur"}],beforeFile:[{required:!0,message:"请选择维修后照片",trigger:"blur"}],startTime:[{required:!0,message:"请选择开始时间",trigger:"blur"}],endTime:[{required:!0,message:"请选择结束时间",trigger:"blur"}],cavityNumber:[{required:!0,message:"请输入型腔数",trigger:"blur"}]},devicesRepairItemName:"",planHour:"未知",isReview:"1",projectCreateUserName:"",projectCreateTime:"",addPlan:"",planFile:[],remark:"",stockInfoLists:[],repairObj:null}},computed:{},watch:{},created:function(){},mounted:function(){if(this.getProductList(),this.stockInfoListes(),this.repairObj=JSON.parse(this.objstr),this.type=this.repairObj.type,this.repairProjectStatus=this.repairObj.repairProjectStatus,this.repairTaskExeStatus=this.repairObj.repairTaskExeStatus,this.code=this.repairObj.code,this.currentId=this.repairObj.id,this.deviceCode=this.repairObj.mouldCode,this.classesName=this.repairObj.mouldName,this.question=this.repairObj.questionName,this.questionDesc=this.repairObj.questionDesc,this.beforePic=[],this.repairObj.beforeFile){var e,t=this.repairObj.beforeFile.split(","),a=Object(r["a"])(t);try{for(a.s();!(e=a.n()).done;){var s=e.value;this.beforePic.push(this.uploadImg+s)}}catch(g){a.e(g)}finally{a.f()}}if(this.afterPic=[],this.repairObj.afterFile){var i,n=this.repairObj.afterFile.split(","),o=Object(r["a"])(n);try{for(o.s();!(i=o.n()).done;){var l=i.value;this.afterPic.push(this.uploadImg+l)}}catch(g){o.e(g)}finally{o.f()}}if(this.createTime=this.repairObj.createTime,this.devicesRepairItemName=this.repairObj.repairTeamName,this.planHour=this.repairObj.planHour?this.repairObj.planHour:"-- ",this.isReview=this.repairObj.isReview+"",this.addPlan=this.repairObj.addPlan,this.projectCreateUserName=this.repairObj.projectCreateUserName,this.projectCreateTime=this.repairObj.projectCreateTime,this.remark=this.repairObj.note,this.startTime=this.repairObj.startTime,this.endTime=this.repairObj.finishTime,this.planFile=this.repairObj.planFileList,"set"===this.type&&1===this.repairProjectStatus){if(this.forms={product:this.repairObj.repairTeamIds.split(","),remark:this.repairObj.addPlan,planHour:this.repairObj.planHour,beforeFile:"",isReview:this.repairObj.isReview+"",startTime:"",endTime:""},this.sparePart=[],this.repairObj.mouldRepairSpareList){var c,u=Object(r["a"])(this.repairObj.mouldRepairSpareList);try{for(u.s();!(c=u.n()).done;){var p=c.value;this.sparePart.push({machineName:p.mouldSpareId,status:p.repairPlan+"",num:1})}}catch(g){u.e(g)}finally{u.f()}this.getDisable()}0===this.sparePart.length&&this.sparePart.push({machineName:"",status:"1",num:1})}if("go"===this.type||"task"===this.type){if(this.forms={product:this.repairObj.repairTeamIds.split(","),remark:this.repairObj.addPlan,planHour:this.repairObj.planHour,beforeFile:"",isReview:this.repairObj.isReview+"",startTime:"",endTime:""},this.listSpare=[],this.sparePart=[],this.repairObj.mouldRepairSpareList){var m,d=Object(r["a"])(this.repairObj.mouldRepairSpareList);try{for(d.s();!(m=d.n()).done;){var f=m.value;this.listSpare.push({machineName:f.mouldSpareId,status:f.repairPlan+""}),this.sparePart.push({machineName:f.mouldSpareId,status:f.repairPlan+"",num:1})}}catch(g){d.e(g)}finally{d.f()}this.getDisable()}0===this.sparePart.length&&this.sparePart.push({machineName:"",status:"1",num:1})}else if("find"===this.type&&(this.listSpare=[],this.repairObj.mouldRepairSpareList)){var h,b=Object(r["a"])(this.repairObj.mouldRepairSpareList);try{for(b.s();!(h=b.n()).done;){var v=h.value;this.listSpare.push({machineName:v.mouldSpareId,status:v.repairPlan+"",num:v.useCount})}}catch(g){b.e(g)}finally{b.f()}}console.log(this.objstr)},beforeDestroy:function(){},methods:{getDisable:function(){this.isDisables={};var e,t=Object(r["a"])(this.sparePart);try{for(t.s();!(e=t.n()).done;){var a=e.value;this.isDisables[a.machineName]=1}}catch(s){t.e(s)}finally{t.f()}},download:function(e){var t=window.configs.api+"/attachment/downByPath?path="+e.path,a=window.open(encodeURI(t));setTimeout((function(){a.close()}),1e3)},stockInfoListes:function(){var e=this;Object(n["b"])().then((function(t){0===t.code&&(e.stockInfoLists=t.data.list)}))},getProductList:function(){var e=this,t={pageNum:1,pageSize:9999999};Object(n["e"])(t).then((function(t){0===t.code&&(e.productList=t.data.list)}))},handlePictureCardPreview:function(e){this.dialogImageUrl=this.uploadImg+e.webPath,this.dialogImgVisible=!0},beforeFile:function(e){var t=e.name,a=t.substring(t.lastIndexOf(".")+1).toLowerCase();if("png"!==a&&"jpg"!==a&&"jpeg"!==a)return this.$message({type:"warning",message:"请上传png/jpg/jpeg格式图片！"}),!1;var s=e.size/1024/1024<200;return s?this.fileList.length>3?(this.$message.error("上传图片个数不能超过4个!"),!1):void 0:(this.$message.error("上传图片大小不能超过 200MB!"),!1)},handleRemoves:function(e){this.forms.beforeFile="";for(var t=0;t<this.fileList.length;t++){if(this.fileList[t].webPath===e.webPath){this.fileList.splice(t,1);break}this.forms.beforeFile?this.forms.beforeFile=this.forms.beforeFile+","+e.webPath:this.forms.beforeFile=e.webPath}},handleRemove:function(e,t){console.log(e,t),this.fileList=t,this.forms.beforeFile="";var a,s=Object(r["a"])(t);try{for(s.s();!(a=s.n()).done;){var i=a.value;this.forms.beforeFile?this.forms.beforeFile=this.forms.beforeFile+","+i.dataId:this.forms.beforeFile=i.dataId}}catch(n){s.e(n)}finally{s.f()}},uploadImage:function(e){var t=this,a=new FormData;a.append("file",e.file),a.append("isAdd",!0),Object(o["c"])(a).then((function(e){0===e.code&&(t.fileList.push(e.data),"set"===t.type?t.forms.beforeFile?t.forms.beforeFile=t.forms.beforeFile+","+e.data.dataId:t.forms.beforeFile=e.data.dataId:t.forms.beforeFile?t.forms.beforeFile=t.forms.beforeFile+","+e.data.webPath:t.forms.beforeFile=e.data.webPath,t.$message({type:"success",message:"上传成功！"}))}))},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(e)if("set"===t.type){var a,s=[],i=Object(r["a"])(t.sparePart);try{for(i.s();!(a=i.n()).done;){var o=a.value;(o.machineName+"").length>0&&s.push({mouldRepairId:t.repairObj.id,mouldSpareId:o.machineName,repairPlan:parseInt(o.status+""),useCount:0})}}catch(w){i.e(w)}finally{i.f()}var l={id:t.repairObj.id,repairTeamIds:t.forms.product.join(","),isReview:t.forms.isReview,planHour:t.forms.planHour,mouldRepairSpareList:s,addPlan:t.forms.remark,planFile:t.forms.beforeFile};Object(n["h"])(l).then((function(e){0===e.code?(t.$message({message:"操作成功!",type:"success"}),t.backClick("1")):1e3===e.code&&t.$message({message:e.msg,type:"error"})}))}else if("task"===t.type){var c,u=[],p=Object(r["a"])(t.sparePart);try{for(p.s();!(c=p.n()).done;){var m=c.value;(m.machineName+"").length>0&&u.push({mouldRepairId:t.repairObj.id,mouldSpareId:m.machineName,repairPlan:m.status,useCount:m.num})}}catch(w){p.e(w)}finally{p.f()}var d={id:t.repairObj.id,mouldRepairSpareList:u,planHour:t.forms.planHour};Object(n["g"])(d).then((function(e){0===e.code?(t.$message({message:"操作成功!",type:"success"}),t.backClick("1")):1e3===e.code&&t.$message({message:e.msg,type:"error"})}))}else{var f,h=[],b=Object(r["a"])(t.sparePart);try{for(b.s();!(f=b.n()).done;){var v=f.value;(v.machineName+"").length>0&&h.push({mouldRepairId:t.repairObj.id,mouldSpareId:v.machineName,repairPlan:parseInt(v.status+""),useCount:v.num})}}catch(w){b.e(w)}finally{b.f()}var g={id:t.repairObj.id,startTime:t.formatTimes(t.forms.startTime),finishTime:t.formatTimes(t.forms.endTime),mouldRepairSpareList:h,note:t.forms.remark,mouldId:t.repairObj.mouldId,cavityNumber:t.forms.cavityNumber,isReview:t.repairObj.isReview,afterFile:t.forms.beforeFile};Object(n["l"])(g).then((function(e){0===e.code?(t.$message({message:"操作成功!",type:"success"}),t.backClick("1")):1e3===e.code&&t.$message({message:e.msg,type:"error"})}))}}))},formatTimes:function(e){return Object(l["b"])(e,"{y}-{m}-{d} {h}:{i}:{s}")},addBP:function(){this.sparePart.push({machineName:"",status:"1",num:1})},deleteBP:function(e){this.sparePart.splice(e,1)},backClick:function(e){this.$emit("DetailCallBack",{result:e})},getList:function(){console.log("数据获取了")},readonlyTest:function(){return!1}}},u=c,p=(a("a87c"),a("2877")),m=Object(p["a"])(u,s,i,!1,null,"1628c2d6",null);t["a"]=m.exports},e58c:function(e,t,a){"use strict";var s=a("fc6a"),i=a("a691"),r=a("50c4"),n=a("a640"),o=a("ae40"),l=Math.min,c=[].lastIndexOf,u=!!c&&1/[1].lastIndexOf(1,-0)<0,p=n("lastIndexOf"),m=o("indexOf",{ACCESSORS:!0,1:0}),d=u||!p||!m;e.exports=d?function(e){if(u)return c.apply(this,arguments)||0;var t=s(this),a=r(t.length),n=a-1;for(arguments.length>1&&(n=l(n,i(arguments[1]))),n<0&&(n=a+n);n>=0;n--)if(n in t&&t[n]===e)return n||0;return-1}:c},f993:function(e,t,a){}}]);