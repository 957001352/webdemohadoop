(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-447bc178"],{"1cca":function(t,e,a){},"2ac3":function(t,e,a){"use strict";a.d(e,"e",(function(){return i})),a.d(e,"g",(function(){return r})),a.d(e,"d",(function(){return s})),a.d(e,"f",(function(){return c})),a.d(e,"a",(function(){return o})),a.d(e,"c",(function(){return l})),a.d(e,"b",(function(){return u}));var n=a("b775");function i(t){return Object(n["a"])({url:window.configs.api+"/mouldStorageHouse/findStorageList",method:"get",params:t})}function r(t){return Object(n["a"])({url:window.configs.api+"/mouldStorageHouse/saveStorage",method:"post",data:t})}function s(t){return Object(n["a"])({url:window.configs.api+"/mouldStorageHouse/findLocationList",method:"get",params:t})}function c(t){return Object(n["a"])({url:window.configs.api+"/mouldStorageHouse/saveLocation",method:"post",data:t})}function o(t){return Object(n["a"])({url:window.configs.api+"/mouldStorageHouse/deleteLocation",method:"get",params:{ids:t}})}function l(t){return Object(n["a"])({url:window.configs.api+"/mouldStorageHouse/findEmptyLocationList",method:"get",params:t})}function u(t){return Object(n["a"])({url:window.configs.api+"/logisticsProduct/getAllCode",method:"get",params:t})}},"2cb9":function(t,e,a){"use strict";var n=a("1cca"),i=a.n(n);i.a},"3fe9":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"content1"},[t._m(0),a("div",{staticClass:"contentBody"},[a("el-row",[a("el-col",{attrs:{span:6}},[a("span",{staticClass:"seachname"},[t._v(" 物料长代码: ")]),a("el-select",{staticClass:"inputCls",staticStyle:{width:"calc(100% - 120px)"},attrs:{placeholder:"物料长代码",filterable:""},on:{change:function(e){return t.handleMateriel()}},model:{value:t.searchKey.productCode,callback:function(e){t.$set(t.searchKey,"productCode",e)},expression:"searchKey.productCode"}},t._l(t.materielList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.code,value:e}})})),1)],1),a("el-col",{attrs:{span:6}},[a("span",{staticClass:"seachname"},[t._v(" 产品名称: ")]),a("el-input",{staticClass:"inputCls",staticStyle:{width:"calc(100% - 120px)"},attrs:{disabled:!0,placeholder:"产品名称"},model:{value:t.searchKey.productName,callback:function(e){t.$set(t.searchKey,"productName",e)},expression:"searchKey.productName"}})],1),a("el-col",{attrs:{span:6}},[a("span",{staticClass:"seachname"},[t._v(" 计划生产数量: ")]),a("el-input",{staticClass:"inputCls",staticStyle:{width:"calc(100% - 120px)"},attrs:{placeholder:"计划生产数量"},on:{input:function(e){t.searchKey.productNum=t.searchKey.productNum.replace(/[^0-9]/g,"")}},model:{value:t.searchKey.productNum,callback:function(e){t.$set(t.searchKey,"productNum",e)},expression:"searchKey.productNum"}})],1),a("el-col",{attrs:{span:6}},[a("span",{staticClass:"seachname"},[t._v(" 客户名称: ")]),a("el-select",{staticClass:"inputCls",staticStyle:{width:"calc(100% - 120px)"},attrs:{placeholder:"客户名称",filterable:""},model:{value:t.searchKey.customer,callback:function(e){t.$set(t.searchKey,"customer",e)},expression:"searchKey.customer"}},t._l(t.customerList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})})),1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("span",{staticClass:"seachname"},[t._v(" 发货时间: ")]),a("el-date-picker",{staticClass:"inputCls",staticStyle:{width:"calc(100% - 120px)"},attrs:{editable:!1,type:"date",placeholder:"时间"},model:{value:t.searchKey.times,callback:function(e){t.$set(t.searchKey,"times",e)},expression:"searchKey.times"}})],1),a("el-col",{attrs:{span:6}},[a("span",{staticClass:"seachname"},[t._v(" 优先级: ")]),a("el-select",{staticClass:"inputCls",staticStyle:{width:"calc(100% - 120px)"},attrs:{placeholder:"优先级"},model:{value:t.searchKey.priority,callback:function(e){t.$set(t.searchKey,"priority",e)},expression:"searchKey.priority"}},t._l(t.priorityList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-col",{attrs:{span:6}},[a("span",{staticClass:"seachname"},[t._v(" 预计耗时: ")]),a("el-input",{staticClass:"inputCls",staticStyle:{width:"calc(100% - 120px)"},attrs:{placeholder:"预计耗时(分钟)",maxlength:"5"},on:{input:function(e){t.searchKey.startTime=t.searchKey.startTime.replace(/[^0-9]/g,"")}},model:{value:t.searchKey.startTime,callback:function(e){t.$set(t.searchKey,"startTime",e)},expression:"searchKey.startTime"}})],1),a("el-col",{attrs:{span:6}},[a("span",{staticClass:"seachname"},[t._v(" 备注: ")]),a("el-input",{staticClass:"inputCls",staticStyle:{width:"calc(100% - 120px)"},attrs:{placeholder:"请输入备注"},model:{value:t.searchKey.remark,callback:function(e){t.$set(t.searchKey,"remark",e)},expression:"searchKey.remark"}})],1)],1),a("el-row",[a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:24}},[a("el-button",{staticClass:"primaryBtn",attrs:{type:"primary",disabled:!t.searchKey.productName||!t.searchKey.times||""===t.searchKey.priority||""===t.searchKey.startTime||!t.searchKey.customer||""===t.searchKey.productNum},on:{click:function(e){return t.startInstructions()}}},[a("svg-icon",{attrs:{"icon-class":"zhixing"}}),t._v(" 生成生产指令 ")],1)],1)],1)],1)]),a("div",{staticClass:"content1"},[t._m(1),a("div",{staticClass:"contentBody el-tablenew"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.list,"row-class-name":t.tableRowClassName,border:""}},[a("el-table-column",{attrs:{prop:"productCode",label:"物料长代码",align:"center","min-width":"120px"}}),a("el-table-column",{attrs:{prop:"productName",label:"零件名称",align:"center","min-width":"120px"}}),a("el-table-column",{attrs:{prop:"customerName",label:"客户名称",align:"center","min-width":"120px"}}),a("el-table-column",{attrs:{prop:"times",label:"发货时间",align:"center",width:"110px"}}),a("el-table-column",{attrs:{prop:"productNum",label:"计划生产数量",align:"center",width:"120px"}}),a("el-table-column",{attrs:{prop:"useTime",label:"开始时间",align:"center"}}),a("el-table-column",{attrs:{prop:"endTime",label:"结束时间",align:"center"}}),a("el-table-column",{attrs:{prop:"createTime",label:"优先级",align:"center",width:"80px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(0===e.row.priority?"普通":"优先")+" ")]}}])}),a("el-table-column",{attrs:{prop:"code",label:"生产指令",align:"center","min-width":"120px"}}),a("el-table-column",{attrs:{prop:"remark",label:"备注",align:"center"}})],1)],1)]),a("div",{staticClass:"bottom"},[t.list.length>0?a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm()}}},[t._v("保存")]):t._e()],1)])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"title"},[a("span",{staticClass:"ganggang"},[t._v("-")]),t._v(" 输入物料长代码与计划生产数量")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"title"},[a("span",{staticClass:"ganggang"},[t._v("-")]),t._v(" 排产指令生成")])}],r=(a("c740"),a("b0c0"),a("683d")),s=a("ed08"),c=a("6ace"),o=a("2ac3"),l=a("c24f"),u={name:"SchedulingTools",data:function(){var t=this;return{list:[],loading:!1,productList:[],obj:{startTime:"",priority:"",code:"",remark:"",id:0},priorityList:[{id:0,name:"普通"},{id:1,name:"优先"}],searchKey:{productName:"",productCode:"",productNum:"",customer:"",times:"",remark:"",startTime:"",endTime:"",priority:""},startPickerOptions:{disabledDate:function(e){return""!==t.searchKey.endTime&&null!==t.searchKey.endTime&&e.getTime()>t.searchKey.endTime}},endPickerOptions:{disabledDate:function(e){return""!==t.searchKey.startTime&&null!==t.searchKey.startTime&&e.getTime()<t.searchKey.startTime}},materielList:[],customerList:[],codeList:[]}},computed:{},watch:{},created:function(){},mounted:function(){this.findDevicesLists(),this.getAllCodeRequest(),this.getAllCustomers()},beforeDestroy:function(){},methods:{getAllCodeRequest:function(){var t=this;Object(o["b"])().then((function(e){0===e.code&&e.data.length>0&&(t.materielList=e.data)}))},findDevicesLists:function(){var t=this;Object(c["a"])({}).then((function(e){t.codeList=e.data?e.data:[]}))},handleMateriel:function(){this.searchKey.productName=this.materielList[this.searchKey.productCode].name},getAllCustomers:function(){var t=this;Object(l["a"])({pageNum:1,pageSize:99999}).then((function(e){0===e.code&&(t.customerList=e.data.list)}))},setDevices:function(){},tableRowClassName:function(t){t.row;var e=t.rowIndex;return e%2===1?"table-row":""},startInstructions:function(){var t=this;Object(r["b"])({productTime:this.searchKey.startTime}).then((function(e){if(0===e.code){console.log(e);var a=t.customerList.findIndex((function(e){return t.searchKey.customer===e.id}));t.list=[{productName:t.searchKey.productName,productCode:t.materielList[t.searchKey.productCode].code,productId:t.materielList[t.searchKey.productCode].id,productNum:t.searchKey.productNum,customer:t.searchKey.customer,customerName:t.customerList[a].name,times:Object(s["b"])(t.searchKey.times,"{y}-{m}-{d}"),useTime:e.data.startTime,endTime:e.data.endTime,productTime:t.searchKey.startTime,priority:t.searchKey.priority,code:e.data.productCode,remark:t.searchKey.remark}]}}))},submitForm:function(){var t=this;this.loading=!0;var e={customerId:this.list[0].customer,deliverTime:this.list[0].times,endTime:this.list[0].endTime,note:this.list[0].remark,planCount:this.list[0].productNum,priority:this.list[0].priority,productCode:this.list[0].code,productDevicesId:this.list[0].partCodeId,productId:this.list[0].productId,productTime:this.list[0].productTime,startTime:this.list[0].useTime};Object(r["i"])(e).then((function(e){t.loading=!1,0===e.code?(t.$message({message:"执行成功!",type:"success"}),t.productList=[],t.list=[],t.searchKey={productName:"",productCode:"",productNum:"",customer:"",times:"",remark:"",startTime:"",endTime:"",priority:""}):1e3===e.code&&t.$message({message:e.msg,type:"error"})}))},formatTimes:function(t){return Object(s["b"])(t,"{y}-{m}-{d} {h}:{i}:{s}")}}},d=u,p=(a("2cb9"),a("2877")),m=Object(p["a"])(d,n,i,!1,null,"4654a84c",null);e["default"]=m.exports},"683d":function(t,e,a){"use strict";a.d(e,"e",(function(){return i})),a.d(e,"f",(function(){return r})),a.d(e,"h",(function(){return s})),a.d(e,"k",(function(){return c})),a.d(e,"m",(function(){return o})),a.d(e,"o",(function(){return l})),a.d(e,"d",(function(){return u})),a.d(e,"c",(function(){return d})),a.d(e,"g",(function(){return p})),a.d(e,"l",(function(){return m})),a.d(e,"j",(function(){return h})),a.d(e,"n",(function(){return f})),a.d(e,"a",(function(){return g})),a.d(e,"i",(function(){return b})),a.d(e,"b",(function(){return y})),a.d(e,"p",(function(){return w}));var n=a("b775");function i(t){return Object(n["a"])({url:window.configs.api+"/injectionMolding/findList",method:"get",params:t})}function r(t){return Object(n["a"])({url:window.configs.api+"/injectionMolding/findPlanList",method:"post",data:t})}function s(t){return Object(n["a"])({url:window.configs.api+"/injectionMolding/insert",method:"post",data:t})}function c(t){return Object(n["a"])({url:window.configs.api+"/injectionMolding/moveUpDownCancel",method:"post",data:t})}function o(t){return Object(n["a"])({url:window.configs.api+"/injectionMolding/stop",method:"post",data:t})}function l(t){return Object(n["a"])({url:window.configs.api+"/injectionMolding/update",method:"post",data:t})}function u(){return Object(n["a"])({url:window.configs.e2cUrl+"/productDevices/findTreeList",method:"get"})}function d(t){return Object(n["a"])({url:window.configs.api+"/craftModel/findByProductCode",method:"get",params:t})}function p(t){return Object(n["a"])({url:window.configs.api+"/reworkInjection/findList",method:"get",params:t})}function m(t){return Object(n["a"])({url:window.configs.api+"/reworkInjection/moveUp",method:"post",data:t})}function h(t){return Object(n["a"])({url:window.configs.api+"/reworkInjection/moveDown",method:"post",data:t})}function f(t){return Object(n["a"])({url:window.configs.api+"/reworkInjection/stop",method:"post",data:t})}function g(t){return Object(n["a"])({url:window.configs.api+"/reworkInjection/cancel",method:"post",data:t})}function b(t){return Object(n["a"])({url:window.configs.api+"/reworkInjection/insert",method:"post",data:t})}function y(t){return Object(n["a"])({url:window.configs.api+"/reworkInjection/createProductCode",method:"get",params:t})}function w(t){return Object(n["a"])({url:window.configs.api+"/reworkInjection/update",method:"post",data:t})}},"6ace":function(t,e,a){"use strict";a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){return r})),a.d(e,"b",(function(){return s}));var n=a("b775");function i(t){return Object(n["a"])({url:window.configs.api+"/attachment/upload",method:"post",data:t,heards:{"Content-Type":"multipart/form-data"}})}function r(t){return Object(n["a"])({url:window.configs.e2cUrl+"/productDevices/findList",method:"get",params:t})}function s(){return Object(n["a"])({url:window.configs.e2cUrl+"/devicesClassify/findList",method:"get"})}}}]);