(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4b581fae"],{"09f4":function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),Math.easeInOutQuad=function(e,t,a,l){return e/=l/2,e<1?a/2*e*e+t:(e--,-a/2*(e*(e-2)-1)+t)};var l=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function n(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function o(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function i(e,t,a){var i=o(),s=e-i,r=20,c=0;t="undefined"===typeof t?500:t;var d=function e(){c+=r;var o=Math.easeInOutQuad(c,i,s,t);n(o),c<t?l(e):a&&"function"===typeof a&&a()};d()}},4943:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"searchInfo"},[a("span",{staticClass:"seachname"},[e._v(" 客户: ")]),a("el-input",{staticClass:"inputCls",staticStyle:{"margin-right":"15px"},attrs:{placeholder:"请输入客户",clearable:""},model:{value:e.searchKey.name,callback:function(t){e.$set(e.searchKey,"name",t)},expression:"searchKey.name"}}),a("span",{staticClass:"seachname"},[e._v(" 零件代码: ")]),a("el-input",{staticClass:"inputCls",staticStyle:{"margin-right":"15px"},attrs:{placeholder:"请输入零件代码",clearable:""},model:{value:e.searchKey.code,callback:function(t){e.$set(e.searchKey,"code",t)},expression:"searchKey.code"}}),a("el-button",{staticClass:"primaryBtn",staticStyle:{"margin-left":"7px"},attrs:{type:"primary"},on:{click:e.searchBtn}},[a("svg-icon",{attrs:{"icon-class":"search"}}),e._v(" 查询 ")],1),a("el-button",{staticClass:"resetBtn",staticStyle:{"margin-left":"7px"},attrs:{type:"default",icon:"el-icon-refresh-right"},on:{click:e.searchrestBtn}},[e._v(" 重置 ")])],1),a("div",{staticClass:"searchInfo"},[e.hasPermission("deliveryPlan/add")?a("el-button",{staticClass:"addBtn",attrs:{type:"default",icon:"el-icon-plus"},on:{click:e.addBtn}},[e._v(" 新建今日发货计划")]):e._e()],1),a("div",{staticClass:"el-tablenew"},[a("el-tabs",{staticClass:"el-tablenew",on:{"tab-click":e.handleClicks},model:{value:e.actives,callback:function(t){e.actives=t},expression:"actives"}},[a("el-tab-pane",{attrs:{label:"当天发货计划",name:"0"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.list,"row-class-name":e.tableRowClassName,border:"",height:"calc(100vh - 337px)"}},[a("el-table-column",{attrs:{prop:"date",label:"序号",width:"55",align:"center",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.$index+1)+" ")]}}])}),a("el-table-column",{attrs:{prop:"customer","min-width":"100px",label:"客户",fixed:"",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"productCode",label:"零件号",align:"center","min-width":"150px",fixed:""}}),a("el-table-column",{attrs:{prop:"productName",label:"零件名称",align:"center","min-width":"150px"}}),a("el-table-column",{attrs:{prop:"planCount",label:"数量",align:"center",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isEdit?e._e():a("span",[e._v(e._s(t.row.planCount))]),t.row.isEdit?a("el-input",{attrs:{placeholder:"数量",size:"small",maxlength:"10"},on:{input:function(e){t.row.planCount=t.row.planCount.replace(/[^0-9]/g,"")}},model:{value:t.row.planCount,callback:function(a){e.$set(t.row,"planCount",a)},expression:"scope.row.planCount"}}):e._e()]}}])}),a("el-table-column",{attrs:{prop:"storeTime",label:"入库时间",align:"center",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isEdit?e._e():a("span",[e._v(e._s(t.row.storeTime&&t.row.storeTime.length>10?t.row.storeTime.substring(0,10):t.row.storeTime))]),t.row.isEdit?a("el-date-picker",{staticStyle:{width:"100%"},attrs:{editable:!1,clearable:!1,type:"date",placeholder:"日期",size:"small"},model:{value:t.row.storeTime,callback:function(a){e.$set(t.row,"storeTime",a)},expression:"scope.row.storeTime"}}):e._e()]}}])}),a("el-table-column",{attrs:{prop:"arrivalTime",label:"到货时间",align:"center",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isEdit?e._e():a("span",[e._v(e._s(t.row.arrivalTime&&t.row.arrivalTime.length>10?t.row.arrivalTime.substring(0,10):t.row.arrivalTime))]),t.row.isEdit?a("el-date-picker",{staticStyle:{width:"100%"},attrs:{editable:!1,clearable:!1,type:"date",placeholder:"日期",size:"small"},model:{value:t.row.arrivalTime,callback:function(a){e.$set(t.row,"arrivalTime",a)},expression:"scope.row.arrivalTime"}}):e._e()]}}])}),a("el-table-column",{attrs:{prop:"joeCount",label:"托数",align:"center",width:"110px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isEdit?e._e():a("span",[e._v(e._s(t.row.joeCount))]),t.row.isEdit?a("el-input",{attrs:{placeholder:"托数",size:"small",maxlength:"10"},on:{input:function(e){t.row.joeCount=t.row.joeCount.replace(/[^0-9]/g,"")}},model:{value:t.row.joeCount,callback:function(a){e.$set(t.row,"joeCount",a)},expression:"scope.row.joeCount"}}):e._e()]}}])}),a("el-table-column",{attrs:{prop:"note",label:"备注",align:"center","min-width":"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isEdit?e._e():a("span",[e._v(e._s(t.row.note))]),t.row.isEdit?a("el-input",{attrs:{placeholder:"备注",size:"small",maxlength:"50"},model:{value:t.row.note,callback:function(a){e.$set(t.row,"note",a)},expression:"scope.row.note"}}):e._e()]}}])}),a("el-table-column",{attrs:{prop:"storageCount",label:"当前库存量",align:"center",width:"120px"}}),a("el-table-column",{attrs:{prop:"partsCount",label:"已发数量",align:"center",width:"120px"}}),a("el-table-column",{attrs:{prop:"planType",label:"类型",align:"center",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isEdit?e._e():a("span",[e._v(e._s(0===t.row.planType?"调拨":"销售"))]),t.row.isEdit?a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"类型",size:"small"},model:{value:t.row.planType,callback:function(a){e.$set(t.row,"planType",a)},expression:"scope.row.planType"}},e._l(e.priorityList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1):e._e()]}}])}),a("el-table-column",{attrs:{prop:"date",label:"操作",align:"center",width:"200px",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.status&&!t.row.isEdit&&e.hasPermission("deliveryPlan/edit")?a("el-button",{staticClass:"addTextBtn",attrs:{type:"text"},on:{click:function(a){return e.editBtn(t.$index)}}},[a("svg-icon",{attrs:{"icon-class":"edit"}}),e._v(" 编辑 ")],1):e._e(),t.row.isEdit?a("el-button",{staticClass:"addTextBtn",attrs:{type:"text"},on:{click:function(a){return e.saveBtn(t.row)}}},[a("svg-icon",{attrs:{"icon-class":"edit"}}),e._v(" 保存 ")],1):e._e(),t.row.isEdit?a("el-button",{staticClass:"defaultTextBtn",attrs:{type:"text"},on:{click:function(t){return e.fetchDate()}}},[a("svg-icon",{attrs:{"icon-class":"edit"}}),e._v(" 取消 ")],1):e._e(),0===t.row.status&&0===t.row.partsCount&&e.hasPermission("deliveryPlan/delete")?a("el-button",{staticClass:"deleteTextBtn",attrs:{type:"text"},on:{click:function(a){return e.deleteRowBtn(t.row)}}},[a("svg-icon",{attrs:{"icon-class":"delete"}}),e._v(" 删除 ")],1):e._e()]}}])})],1),a("pagination",{staticClass:"pagePadd",attrs:{total:e.total,page:e.pageIndex,limit:e.pageSize},on:{"update:page":function(t){e.pageIndex=t},"update:limit":function(t){e.pageSize=t},pagination:e.handleCurrentChange}})],1),a("el-tab-pane",{attrs:{label:"历史发货计划",name:"1"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.list,"row-class-name":e.tableRowClassName,border:"",height:"calc(100vh - 337px)"}},[a("el-table-column",{attrs:{prop:"date",label:"序号",width:"55",align:"center",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.$index+1)+" ")]}}])}),a("el-table-column",{attrs:{prop:"customer","min-width":"100px",label:"客户",align:"center",fixed:"","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"productCode",label:"零件号",align:"center","min-width":"150px",fixed:""}}),a("el-table-column",{attrs:{prop:"productName",label:"零件名称",align:"center","min-width":"150px"}}),a("el-table-column",{attrs:{prop:"planCount",label:"数量",align:"center",width:"100px"}}),a("el-table-column",{attrs:{prop:"storeTime",label:"入库时间",align:"center",width:"110px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.storeTime&&t.row.storeTime.length>10?t.row.storeTime.substring(0,10):t.row.storeTime)+" ")]}}])}),a("el-table-column",{attrs:{prop:"arrivalTime",label:"到货时间",align:"center",width:"110px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.arrivalTime&&t.row.arrivalTime.length>10?t.row.arrivalTime.substring(0,10):t.row.arrivalTime)+" ")]}}])}),a("el-table-column",{attrs:{prop:"joeCount",label:"托数",align:"center",width:"100px"}}),a("el-table-column",{attrs:{prop:"note",label:"备注",align:"center","min-width":"150px"}}),a("el-table-column",{attrs:{prop:"storageCount",label:"当前库存量",align:"center",width:"120px"}}),a("el-table-column",{attrs:{prop:"partsCount",label:"已发数量",align:"center",width:"120px"}}),a("el-table-column",{attrs:{prop:"planType",label:"类型",align:"center",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(0===t.row.planType?"调拨":"销售")+" ")]}}])})],1),a("pagination",{staticClass:"pagePadd",attrs:{total:e.total,page:e.pageIndex,limit:e.pageSize},on:{"update:page":function(t){e.pageIndex=t},"update:limit":function(t){e.pageSize=t},pagination:e.handleCurrentChange}})],1)],1)],1),a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],staticClass:"dialogs",attrs:{visible:e.infoDialogvisible,"close-on-click-modal":!1,title:"新建今日发货计划",width:"1350px"},on:{"update:visible":function(t){e.infoDialogvisible=t},close:function(t){return e.resetFrom("forms")}}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form",{ref:"forms",attrs:{model:e.forms,rules:e.rules,"label-position":"left","label-width":"70px"}},[a("el-form-item",{attrs:{label:"客户:",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入客户",size:"small",maxlength:"20"},on:{input:function(t){e.forms.name=e.inputRule(e.forms.name)}},model:{value:e.forms.name,callback:function(t){e.$set(e.forms,"name",t)},expression:"forms.name"}})],1)],1)],1)],1),a("div",{staticClass:"searchInfo"},[a("span",{staticClass:"seachname"},[e._v(" 零件代码: ")]),a("el-input",{staticStyle:{width:"815px","margin-right":"15px"},attrs:{placeholder:"零件代码逗号隔开",size:"small",clearable:""},model:{value:e.searchKeys.code,callback:function(t){e.$set(e.searchKeys,"code",t)},expression:"searchKeys.code"}}),a("el-button",{staticClass:"primaryBtn",staticStyle:{"margin-left":"7px"},attrs:{type:"primary"},on:{click:function(t){return e.findListByCodes()}}},[a("svg-icon",{attrs:{"icon-class":"search"}}),e._v(" 查询 ")],1),a("el-button",{staticClass:"addBtn",attrs:{type:"default",icon:"el-icon-plus"},on:{click:function(t){return e.importHistory()}}},[e._v(" 导入历史发货")])],1),a("div",{staticClass:"el-tablenew"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%",height:"400px"},attrs:{data:e.addList,"row-class-name":e.tableRowClassName,border:""}},[a("el-table-column",{attrs:{prop:"date",label:"序号",width:"55",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.$index+1)+" ")]}}])}),a("el-table-column",{attrs:{prop:"productCode",label:"零件号",align:"center","min-width":"150px"}}),a("el-table-column",{attrs:{prop:"productName",label:"零件名称",align:"center","min-width":"150px"}}),a("el-table-column",{attrs:{prop:"productName",label:"数量",align:"center",width:"110px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"数量",size:"small",maxlength:"10"},on:{input:function(e){t.row.planCount=t.row.planCount.replace(/[^0-9]/g,"")}},model:{value:t.row.planCount,callback:function(a){e.$set(t.row,"planCount",a)},expression:"scope.row.planCount"}})]}}])}),a("el-table-column",{attrs:{prop:"storageCount",label:"入库日期",align:"center",width:"155px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{editable:!1,clearable:!1,type:"date",placeholder:"日期",size:"small"},model:{value:t.row.storeTime,callback:function(a){e.$set(t.row,"storeTime",a)},expression:"scope.row.storeTime"}})]}}])}),a("el-table-column",{attrs:{prop:"checkCount",label:"到货日期",align:"center",width:"155px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{editable:!1,clearable:!1,type:"date",placeholder:"日期",size:"small"},model:{value:t.row.arrivalTime,callback:function(a){e.$set(t.row,"arrivalTime",a)},expression:"scope.row.arrivalTime"}})]}}])}),a("el-table-column",{attrs:{prop:"checkResult",label:"托数",align:"center",width:"110px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"托数",size:"small",maxlength:"10"},on:{input:function(e){t.row.joeCount=t.row.joeCount.replace(/[^0-9]/g,"")}},model:{value:t.row.joeCount,callback:function(a){e.$set(t.row,"joeCount",a)},expression:"scope.row.joeCount"}})]}}])}),a("el-table-column",{attrs:{prop:"checkResult",label:"类型",align:"center",width:"110px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"类型",size:"small"},model:{value:t.row.planType,callback:function(a){e.$set(t.row,"planType",a)},expression:"scope.row.planType"}},e._l(e.priorityList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)]}}])}),a("el-table-column",{attrs:{prop:"checkResult",label:"备注",align:"center",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"备注",size:"small",maxlength:"50"},model:{value:t.row.note,callback:function(a){e.$set(t.row,"note",a)},expression:"scope.row.note"}})]}}])}),a("el-table-column",{attrs:{prop:"checkResult",label:"操作",align:"center",width:"90px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"deleteTextBtn",attrs:{type:"text"},on:{click:function(a){return e.deleteBtn(t.$index)}}},[a("svg-icon",{attrs:{"icon-class":"delete"}}),e._v(" 删除 ")],1)]}}])})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"defaultBtn",staticStyle:{width:"120px","border-radius":"4px"},on:{click:function(t){e.infoDialogvisible=!1}}},[e._v("取消")]),a("el-button",{staticClass:"primaryBtn",staticStyle:{width:"120px"},attrs:{type:"primary"},on:{click:function(t){return e.submitForm()}}},[e._v("确定")])],1),a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],staticClass:"dialogs",attrs:{"append-to-body":"",visible:e.historyVidible,"close-on-click-modal":!1,title:"历史发货计划",width:"1200px"},on:{"update:visible":function(t){e.historyVidible=t}}},[a("div",{staticClass:"searchInfo"},[a("span",{staticClass:"seachname"},[e._v(" 日期: ")]),a("el-date-picker",{staticStyle:{width:"140px","margin-right":"15px"},attrs:{editable:!1,clearable:!1,type:"date",placeholder:"日期",size:"small"},model:{value:e.searchKeyDate,callback:function(t){e.searchKeyDate=t},expression:"searchKeyDate"}}),a("el-button",{staticClass:"primaryBtn",staticStyle:{"margin-left":"7px"},attrs:{type:"primary"},on:{click:function(t){return e.fetchHistoryDate()}}},[a("svg-icon",{attrs:{"icon-class":"search"}}),e._v(" 查询 ")],1)],1),a("div",{staticClass:"el-tablenew"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%",height:"400px"},attrs:{data:e.historyList,"row-class-name":e.tableRowClassName,border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{selectable:e.checkSelect,type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{prop:"date",label:"序号",width:"55",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.$index+1)+" ")]}}])}),a("el-table-column",{attrs:{prop:"deliverTime",label:"发货日期",align:"center","min-width":"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.deliverTime&&t.row.deliverTime.length>10?t.row.deliverTime.substring(0,10):t.row.deliverTime)+" ")]}}])}),a("el-table-column",{attrs:{prop:"customer",label:"客户",align:"center","min-width":"150px"}}),a("el-table-column",{attrs:{prop:"productCode",label:"零件号",align:"center","min-width":"150px"}}),a("el-table-column",{attrs:{prop:"productName",label:"零件名称",align:"center","min-width":"150px"}}),a("el-table-column",{attrs:{prop:"planCount",label:"应发数量",align:"center","min-width":"120px"}}),a("el-table-column",{attrs:{prop:"partsCount",label:"实发数量",align:"center","min-width":"120px"}}),a("el-table-column",{attrs:{prop:"planType",label:"状态",align:"center",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(0===t.row.status?"未完成":"已完成")+" ")]}}])})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"defaultBtn",staticStyle:{width:"120px","border-radius":"4px"},on:{click:function(t){e.historyVidible=!1}}},[e._v("取消")]),a("el-button",{staticClass:"primaryBtn",staticStyle:{width:"120px"},attrs:{type:"primary"},on:{click:function(t){return e.addInfo()}}},[e._v("确定")])],1)])],1)],1)},n=[],o=(a("a434"),a("b0c0"),a("b85c")),i=a("b775");function s(e){return Object(i["a"])({url:window.configs.api+"/logisticsDeliveryPlan/findList",method:"get",params:e})}function r(e){return Object(i["a"])({url:window.configs.api+"/logisticsDeliveryPlan/delete",method:"get",params:e})}function c(e){return Object(i["a"])({url:window.configs.api+"/logisticsProduct/findListByCode",method:"get",params:e})}function d(e){return Object(i["a"])({url:window.configs.api+"/logisticsDeliveryPlan/insert",method:"post",data:e})}function u(e){return Object(i["a"])({url:window.configs.api+"/logisticsDeliveryPlan/update",method:"post",data:e})}var p=a("ed08"),m=a("333d"),f=a("a888"),h={name:"DeliveryPlan",directives:{elDragDialog:f["a"]},components:{Pagination:m["a"]},data:function(){return{loading:!1,historyVidible:!1,infoDialogvisible:!1,disabled:!1,objstr:"",dialogTitle:"",newPickerOptions:{disabledDate:function(e){return e.getTime()<new Date(Object(p["b"])(new Date,"{y}-{m}-{d}")+" 00:00:00").getTime()}},searchKeyDate:"",searchKey:{name:"",code:""},forms:{name:""},searchKeys:{name:"",code:""},multipleSelection:[],total:0,pageIndex:1,pageSize:10,currentId:0,priorityList:[{id:0,name:"调拨"},{id:1,name:"销售"}],actives:"0",rules:{name:[{required:!0,message:"请输入客户",trigger:"blur"}]},historyList:[],fileList:[],list:[],addList:[]}},computed:{},mounted:function(){this.fetchDate()},methods:{handleClicks:function(e,t){this.searchrestBtn()},handleClick:function(e,t){console.log(e,t)},tableRowClassName:function(e){e.row;var t=e.rowIndex;return t%2===1?"table-row":""},handleSelectionChange:function(e){this.multipleSelection=e},fetchDate:function(){var e=this;this.list=[],this.loading=!0;var t={customer:this.searchKey.name+""?this.searchKey.name:null,productCode:this.searchKey.code+""?this.searchKey.code:null,queryType:this.actives,pageNum:this.pageIndex,pageSize:this.pageSize};s(t).then((function(t){if(e.loading=!1,0===t.code){e.list=[];var a,l=Object(o["a"])(t.data.list);try{for(l.s();!(a=l.n()).done;){var n=a.value;n.isEdit=!1,e.list.push(n)}}catch(i){l.e(i)}finally{l.f()}e.total=t.data.total}})),console.log(this.list)},searchBtn:function(){this.fetchDate()},searchrestBtn:function(){this.searchKey={name:"",code:""},this.pageIndex=1,this.pageSize=10,this.fetchDate()},handleCurrentChange:function(){this.fetchDate()},addBtn:function(){this.addList=[],this.forms={name:""},this.searchKeys={name:"",code:""},this.infoDialogvisible=!0},editBtn:function(e){this.list[e].isEdit=!0},saveBtn:function(e){var t=this;""!==e.planCount&&""!==e.storeTime&&""!==e.arrivalTime&&""!==e.joeCount&&""!==e.planType&&null!==e.planCount&&null!==e.storeTime&&null!==e.arrivalTime&&null!==e.joeCount&&null!==e.planType?u({id:e.id,arrivalTime:Object(p["b"])(e.arrivalTime,"{y}-{m}-{d}"),customer:e.customer,joeCount:e.joeCount,note:e.note,planCount:e.planCount,planType:e.planType,productId:e.productId,storeTime:Object(p["b"])(e.storeTime,"{y}-{m}-{d}")}).then((function(e){t.loading=!1,0===e.code?(t.$message({message:"操作成功!",type:"success"}),t.fetchDate()):1e3===e.code&&t.$message({message:e.msg,type:"error"})})):this.$message({message:"请填写完整的发货计划",type:"error"})},checkSelect:function(e,t){var a,l=!0,n=Object(o["a"])(this.addList);try{for(n.s();!(a=n.n()).done;){var i=a.value;if(e.productId===i.id){l=!1;break}}}catch(s){n.e(s)}finally{n.f()}return l},fetchHistoryDate:function(){var e=this;if(this.searchKeyDate){this.historyList=[],this.loading=!0;var t={deliverTime:Object(p["b"])(this.searchKeyDate,"{y}-{m}-{d}"),pageNum:1,pageSize:99999};s(t).then((function(t){if(e.loading=!1,0===t.code){e.historyList=[];var a,l=Object(o["a"])(t.data.list);try{for(l.s();!(a=l.n()).done;){var n=a.value;n.isEdit=!1,e.historyList.push(n)}}catch(i){l.e(i)}finally{l.f()}}})),console.log(this.list)}else this.$message({message:"请输入日期",type:"error"})},findListByCodes:function(){var e=this;if(this.searchKeys.code){var t={codes:this.searchKeys.code};c(t).then((function(t){if(0===t.code){var a,l=Object(o["a"])(t.data);try{for(l.s();!(a=l.n()).done;){var n,i=a.value,s=!0,r=Object(o["a"])(e.addList);try{for(r.s();!(n=r.n()).done;){var c=n.value;if(i.id===c.id){s=!1;break}}}catch(d){r.e(d)}finally{r.f()}s&&e.addList.push({id:i.id,productCode:i.code,productName:i.name,planCount:"",storeTime:"",arrivalTime:"",joeCount:"",note:"",planType:""})}}catch(d){l.e(d)}finally{l.f()}}}))}else this.$message({message:"请输入零件代码",type:"error"})},deleteBtn:function(e){this.addList.splice(e,1)},importHistory:function(){this.searchKeyDate="",this.historyList=[],this.multipleSelection=[],this.historyVidible=!0},addInfo:function(){if(0!==this.multipleSelection.length){this.historyVidible=!1;var e,t=Object(o["a"])(this.multipleSelection);try{for(t.s();!(e=t.n()).done;){var a=e.value;this.addList.push({id:a.productId,productCode:a.productCode,productName:a.productName,planCount:a.planCount,storeTime:a.storeTime,arrivalTime:a.arrivalTime,joeCount:a.joeCount,note:a.note,planType:a.planType})}}catch(l){t.e(l)}finally{t.f()}}else this.$message({message:"请选择发货计划",type:"error"})},deleteRowBtn:function(e){var t=this;this.$confirm("确定删除吗?","操作提示",{confirmButtonText:"确认删除",cancelButtonText:"取消"}).then((function(){var a={ids:e.id};r(a).then((function(e){t.loading=!1,0===e.code?(t.$message({message:"删除成功!",type:"success"}),1===t.list.length&&t.pageIndex>1&&(t.pageIndex=t.pageIndex-1),t.fetchDate()):t.$message({message:e.msg,type:"error"})}))}))},resetFrom:function(e){this.$refs[e].resetFields()},submitForm:function(){var e=this;this.$refs["forms"].validate((function(t){if(t){var a,l=[],n=!1,i=Object(o["a"])(e.addList);try{for(i.s();!(a=i.n()).done;){var s=a.value;if(""===s.planCount||""===s.storeTime||""===s.arrivalTime||""===s.joeCount||""===s.planType){n=!0;break}l.push({arrivalTime:Object(p["b"])(s.arrivalTime,"{y}-{m}-{d}"),customer:e.forms.name,joeCount:s.joeCount,note:s.note,planCount:s.planCount,planType:s.planType,productId:s.id,storeTime:Object(p["b"])(s.storeTime,"{y}-{m}-{d}")})}}catch(r){i.e(r)}finally{i.f()}if(n)return void e.$message({message:"请填写完整的发货计划",type:"error"});d(l).then((function(t){e.loading=!1,0===t.code?(e.$message({message:"操作成功!",type:"success"}),e.infoDialogvisible=!1,e.fetchDate(),e.$refs["forms"].resetFields()):1e3===t.code&&e.$message({message:t.msg,type:"error"})}))}}))}}},g=h,b=(a("bd7d"),a("2877")),w=Object(b["a"])(g,l,n,!1,null,"53d9e46e",null);t["default"]=w.exports},8061:function(e,t,a){},a888:function(e,t,a){"use strict";a("99af"),a("caad"),a("ac1f"),a("2532"),a("5319");var l={bind:function(e,t,a){var l=e.querySelector(".el-dialog__header"),n=e.querySelector(".el-dialog");l.style.cssText+=";cursor:move;",n.style.cssText+=";top:0px;";var o=function(){return window.document.currentStyle?function(e,t){return e.currentStyle[t]}:function(e,t){return getComputedStyle(e,!1)[t]}}();l.onmousedown=function(e){var t=e.clientX-l.offsetLeft,i=e.clientY-l.offsetTop,s=n.offsetWidth,r=n.offsetHeight,c=document.body.clientWidth,d=document.body.clientHeight,u=n.offsetLeft,p=c-n.offsetLeft-s,m=n.offsetTop,f=d-n.offsetTop-r,h=o(n,"left"),g=o(n,"top");h.includes("%")?(h=+document.body.clientWidth*(+h.replace(/\%/g,"")/100),g=+document.body.clientHeight*(+g.replace(/\%/g,"")/100)):(h=+h.replace(/\px/g,""),g=+g.replace(/\px/g,"")),document.onmousemove=function(e){var l=e.clientX-t,o=e.clientY-i;-l>u?l=-u:l>p&&(l=p),-o>m?o=-m:o>f&&(o=f),n.style.cssText+=";left:".concat(l+h,"px;top:").concat(o+g,"px;"),a.child.$emit("dragDialog")},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null}}}},n=function(e){e.directive("el-drag-dialog",l)};window.Vue&&(window["el-drag-dialog"]=l,Vue.use(n)),l.install=n;t["a"]=l},bd7d:function(e,t,a){"use strict";var l=a("8061"),n=a.n(l);n.a}}]);