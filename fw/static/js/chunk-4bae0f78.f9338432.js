(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4bae0f78"],{"09f4":function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),Math.easeInOutQuad=function(e,t,a,n){return e/=n/2,e<1?a/2*e*e+t:(e--,-a/2*(e*(e-2)-1)+t)};var n=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function i(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function o(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function s(e,t,a){var s=o(),l=e-s,c=20,r=0;t="undefined"===typeof t?500:t;var u=function e(){r+=c;var o=Math.easeInOutQuad(r,s,l,t);i(o),r<t?n(e):a&&"function"===typeof a&&a()};u()}},"41da":function(e,t,a){"use strict";var n=a("59e5"),i=a.n(n);i.a},"59e5":function(e,t,a){},"7cd1":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"searchInfo"},[a("span",{staticClass:"seachname"},[e._v(" 审核任务单号: ")]),a("el-input",{staticClass:"inputCls",staticStyle:{width:"200px","margin-right":"15px"},attrs:{placeholder:"请输入审核任务单号",clearable:""},model:{value:e.searchKey.name,callback:function(t){e.$set(e.searchKey,"name",t)},expression:"searchKey.name"}}),a("span",{staticClass:"seachname"},[e._v(" "+e._s("2"===e.actives?"执行人:":"审核人:")+" ")]),a("el-input",{staticClass:"inputCls",staticStyle:{width:"120px","margin-right":"15px"},attrs:{placeholder:"执行人",clearable:""},model:{value:e.searchKey.people,callback:function(t){e.$set(e.searchKey,"people",t)},expression:"searchKey.people"}}),"2"===e.actives?a("span",{staticClass:"seachname"},[e._v(" 执行日期: ")]):e._e(),"2"===e.actives?a("el-date-picker",{staticStyle:{width:"140px"},attrs:{editable:!1,clearable:!1,type:"date",placeholder:"执行日期",size:"small"},model:{value:e.searchKey.date,callback:function(t){e.$set(e.searchKey,"date",t)},expression:"searchKey.date"}}):e._e(),a("el-button",{staticClass:"primaryBtn",staticStyle:{"margin-left":"7px"},attrs:{type:"primary"},on:{click:e.searchBtn}},[a("svg-icon",{attrs:{"icon-class":"search"}}),e._v(" 查询 ")],1),a("el-button",{staticClass:"resetBtn",staticStyle:{"margin-left":"7px"},attrs:{type:"default",icon:"el-icon-refresh-right"},on:{click:e.searchrestBtn}},[e._v(" 重置 ")])],1),a("div",{staticClass:"el-tablenew"},[a("el-tabs",{staticClass:"el-tablenew",on:{"tab-click":e.handleClicks},model:{value:e.actives,callback:function(t){e.actives=t},expression:"actives"}},[a("el-tab-pane",{attrs:{label:"待办审核任务",name:"1"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.list,"row-class-name":e.tableRowClassName,border:"",height:"calc(100vh - 337px)"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{prop:"date",label:"序号",align:"center",width:"55"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.$index+1)+" ")]}}])}),a("el-table-column",{attrs:{prop:"createTime",label:"时间",align:"center",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.createTime&&t.row.createTime.length>10?t.row.createTime.substring(0,10):t.row.createTime))])]}}])}),a("el-table-column",{attrs:{prop:"taskNo",label:"分层审核任务单号",align:"center",width:"380px","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"teamName",label:"审核表单名称",align:"center"}}),a("el-table-column",{attrs:{prop:"userName",label:"审核人员",align:"center","show-overflow-tooltip":""}})],1),a("pagination",{staticClass:"pagePadd",attrs:{total:e.total,page:e.pageIndex,limit:e.pageSize},on:{"update:page":function(t){e.pageIndex=t},"update:limit":function(t){e.pageSize=t},pagination:e.handleCurrentChange}})],1),a("el-tab-pane",{attrs:{label:"历史审核任务",name:"2"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.list,"row-class-name":e.tableRowClassName,border:"",height:"calc(100vh - 337px)"}},[a("el-table-column",{attrs:{prop:"date",label:"序号",align:"center",width:"55"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.$index+1)+" ")]}}])}),a("el-table-column",{attrs:{prop:"createTime",label:"时间",align:"center",width:"110px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.createTime&&t.row.createTime.length>10?t.row.createTime.substring(0,10):t.row.createTime))])]}}])}),a("el-table-column",{attrs:{prop:"taskNo",label:"审核任务工单号",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"teamName",label:"审核表单名称",align:"center"}}),a("el-table-column",{attrs:{prop:"date",label:"执行时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.exeTime))])]}}])}),a("el-table-column",{attrs:{prop:"userName",label:"执行人",align:"center",width:"110px"}}),a("el-table-column",{attrs:{prop:"date",label:"详情",align:"center",width:"110px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.hasPermission("auditPlanImplement/find")?a("el-button",{staticClass:"defaultTextBtn",attrs:{type:"text"},on:{click:function(a){return e.findInfo(t.row)}}},[a("svg-icon",{attrs:{"icon-class":"search"}}),e._v(" 查看 ")],1):e._e()]}}])})],1),a("pagination",{staticClass:"pagePadd",attrs:{total:e.total,page:e.pageIndex,limit:e.pageSize},on:{"update:page":function(t){e.pageIndex=t},"update:limit":function(t){e.pageSize=t},pagination:e.handleCurrentChange}})],1)],1)],1),e.infoDailogVisible?a("maintailPlanLog",{attrs:{"info-obj":e.objInfo},on:{callbackFunc:e.callbackFunc}}):e._e()],1)},i=[],o=(a("b0c0"),a("b85c")),s=a("a03c"),l=a("ed08"),c=a("333d"),r=a("a888"),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"dialogs",attrs:{visible:e.infoDailogVisible,"close-on-click-modal":!1,title:"审核表单详情",width:"1000px"},on:{"update:visible":function(t){e.infoDailogVisible=t},closed:function(t){return e.closeDialog()}}},[a("el-row",[a("el-col",{staticClass:"titsty",attrs:{span:12}},[a("span",[e._v("审核工单号:")]),e._v(" "+e._s(e.objInfo.taskNo)+" ")]),a("el-col",{staticClass:"titsty",attrs:{span:12}},[a("span",[e._v("审核表单名称:")]),e._v(" "+e._s(e.objInfo.teamName)+" ")]),a("el-col",{staticClass:"titsty",attrs:{span:4}},[a("span",[e._v("执行人员:")]),e._v(" "+e._s(e.objInfo.userName)+" ")]),a("el-col",{staticClass:"titsty",attrs:{span:4}},[a("span",[e._v("任务状态:")]),e._v(" 已执行 ")]),a("el-col",{staticClass:"titsty",attrs:{span:8}},[a("span",[e._v("执行时间:")]),e._v(" "+e._s(e.objInfo.exeTime)+" ")])],1),a("el-tabs",{staticClass:"el-tablenew",model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"审核记录",name:"first"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.planExecuteRecords,"row-class-name":e.tableRowClassName,border:"",height:"500px"}},[a("el-table-column",{attrs:{prop:"date",label:"序号",align:"center",width:"55px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.$index+1)+" ")]}}])}),a("el-table-column",{attrs:{prop:"itemName",label:"项目名称",align:"center",width:"320px"}}),a("el-table-column",{attrs:{label:"选项",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(""===t.row.reason?"合格":"不合格")+e._s(t.row.reason))])]}}])})],1)],1)],1)],1)},d=[],p={props:{infoObj:{type:Object,required:!0}},data:function(){return{infoDailogVisible:!1,logList:[],planExecuteRecords:[],activeName:"first",objInfo:{exeTime:"",exeUser:"",id:"",itemIds:"",itemNames:"",taskNo:"",taskStatus:"",teamName:"",userName:""}}},created:function(){var e=this;this.infoDailogVisible=!0,this.objInfo=this.infoObj,this.planExecuteRecords=[],Object(s["e"])({id:this.objInfo.id,status:1}).then((function(t){if(e.loading=!1,0===t.code){var a,n=Object(o["a"])(t.data);try{for(n.s();!(a=n.n()).done;){var i=a.value,s={id:i.id,itemId:i.itemId,itemName:i.itemName,reason:i.reason?i.reason:"",result:null===i.result||void 0===i.result?"":i.result,taskNo:i.taskNo,checked:null===i.result||void 0===i.result||1===i.result};e.planExecuteRecords.push(s)}}catch(l){n.e(l)}finally{n.f()}}}))},methods:{tableRowClassName:function(e){e.row;var t=e.rowIndex;return t%2===1?"table-row":""},closeDialog:function(){this.$emit("callbackFunc",{})}}},f=p,m=(a("41da"),a("2877")),h=Object(m["a"])(f,u,d,!1,null,"eab97e9a",null),g=h.exports,b={name:"MaintainPlanImplement",directives:{elDragDialog:r["a"]},components:{Pagination:c["a"],maintailPlanLog:g},data:function(){return{loading:!1,dialogVisible:!1,infoDailogVisible:!1,disabled:!1,dialogTitle:"",activeName:"first",actives:"1",searchKey:{name:"",code:"",people:"",date:"",status:"",examine:""},total:0,pageIndex:1,pageSize:10,currentId:0,multipleSelection:[],maintainObjList:[],forms:{name:"",day:"",delayreason:"",closreason:""},list:[],maintainList:[],objInfo:{exeTime:"",exeUser:"",id:"",itemIds:"",itemNames:"",taskNo:"",taskStatus:"",teamName:"",userName:""}}},computed:{},mounted:function(){this.fetchDate()},methods:{findInfo:function(e){this.activeName="first",this.infoDailogVisible=!0,this.objInfo=e},callbackFunc:function(){this.infoDailogVisible=!1},handleClicks:function(e,t){this.searchrestBtn()},handleClick:function(e,t){console.log(e,t)},tableRowClassName:function(e){e.row;var t=e.rowIndex;return t%2===1?"table-row":""},handleSelectionChange:function(e){this.multipleSelection=e},fetchDate:function(){var e=this;this.list=[],this.multipleSelection=[],this.loading=!0;var t={taskNo:this.searchKey.name+""?this.searchKey.name:null,exeUser:this.searchKey.people+""?this.searchKey.people:null,executeTime:this.searchKey.date+""?Object(l["b"])(this.searchKey.date,"{y}-{m}-{d}"):null,status:"1"===this.actives?0:1,pageNum:this.pageIndex,pageSize:this.pageSize};Object(s["g"])(t).then((function(t){e.loading=!1,0===t.code&&(e.list=t.data.list,e.total=t.data.total)}))},searchBtn:function(){this.fetchDate()},searchrestBtn:function(){this.searchKey={name:"",code:"",people:"",date:"",status:"",examine:""},this.pageIndex=1,this.pageSize=10,this.fetchDate()},handleCurrentChange:function(){this.fetchDate()},addBtn:function(e){if(0===this.multipleSelection.length)return this.$message({message:"请选择需要操作的行!",type:"warning"}),!1;var t,a=!1,n="",i=Object(o["a"])(this.multipleSelection);try{for(i.s();!(t=i.n()).done;){var s=t.value;if("0"!==s.status&&2!==s.auditResult){a=!0;break}n=n?n+","+s.keepOrder:s.keepOrder}}catch(l){i.e(l)}finally{i.f()}if(a)return this.$message({message:"选中行状态无法操作!",type:"warning"}),!1;this.dialogTitle=1===e?"申请延后工单":"申请强制关闭工单",this.forms={name:n,day:0,delayreason:"",closreason:""},this.dialogVisible=!0},deleteBtn:function(e){var t=this;this.$confirm("确定删除吗?","操作提示",{confirmButtonText:"确认删除",cancelButtonText:"取消"}).then((function(){1===t.list.length&&t.pageIndex>1&&(t.pageIndex=t.pageIndex-1),t.fetchDate()}))}}},w=b,v=(a("94aa"),Object(m["a"])(w,n,i,!1,null,"0d284eca",null));t["default"]=v.exports},"94aa":function(e,t,a){"use strict";var n=a("d69e"),i=a.n(n);i.a},a03c:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"i",(function(){return o})),a.d(t,"b",(function(){return s})),a.d(t,"d",(function(){return l})),a.d(t,"k",(function(){return c})),a.d(t,"h",(function(){return r})),a.d(t,"f",(function(){return u})),a.d(t,"c",(function(){return d})),a.d(t,"j",(function(){return p})),a.d(t,"g",(function(){return f})),a.d(t,"e",(function(){return m}));var n=a("b775");function i(e){return Object(n["a"])({url:window.configs.api+"/auditItem/findList",method:"get",params:e})}function o(e){return Object(n["a"])({url:window.configs.api+"/auditItem/save",method:"post",data:e})}function s(e){return Object(n["a"])({url:window.configs.api+"/auditItem/delete",method:"get",params:e})}function l(e){return Object(n["a"])({url:window.configs.api+"/auditTeam/delete",method:"get",params:e})}function c(e){return Object(n["a"])({url:window.configs.api+"/auditTeam/save",method:"post",data:e})}function r(e){return Object(n["a"])({url:window.configs.api+"/auditTeam/findList",method:"get",params:e})}function u(e){return Object(n["a"])({url:window.configs.api+"/auditPlan/findList",method:"get",params:e})}function d(e){return Object(n["a"])({url:window.configs.api+"/auditPlan/delete",method:"get",params:e})}function p(e){return Object(n["a"])({url:window.configs.api+"/auditPlan/save",method:"post",data:e})}function f(e){return Object(n["a"])({url:window.configs.api+"/auditTask/findList",method:"get",params:e})}function m(e){return Object(n["a"])({url:window.configs.api+"/auditTask/findTaskDetailsById",method:"get",params:e})}},a888:function(e,t,a){"use strict";a("99af"),a("caad"),a("ac1f"),a("2532"),a("5319");var n={bind:function(e,t,a){var n=e.querySelector(".el-dialog__header"),i=e.querySelector(".el-dialog");n.style.cssText+=";cursor:move;",i.style.cssText+=";top:0px;";var o=function(){return window.document.currentStyle?function(e,t){return e.currentStyle[t]}:function(e,t){return getComputedStyle(e,!1)[t]}}();n.onmousedown=function(e){var t=e.clientX-n.offsetLeft,s=e.clientY-n.offsetTop,l=i.offsetWidth,c=i.offsetHeight,r=document.body.clientWidth,u=document.body.clientHeight,d=i.offsetLeft,p=r-i.offsetLeft-l,f=i.offsetTop,m=u-i.offsetTop-c,h=o(i,"left"),g=o(i,"top");h.includes("%")?(h=+document.body.clientWidth*(+h.replace(/\%/g,"")/100),g=+document.body.clientHeight*(+g.replace(/\%/g,"")/100)):(h=+h.replace(/\px/g,""),g=+g.replace(/\px/g,"")),document.onmousemove=function(e){var n=e.clientX-t,o=e.clientY-s;-n>d?n=-d:n>p&&(n=p),-o>f?o=-f:o>m&&(o=m),i.style.cssText+=";left:".concat(n+h,"px;top:").concat(o+g,"px;"),a.child.$emit("dragDialog")},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null}}}},i=function(e){e.directive("el-drag-dialog",n)};window.Vue&&(window["el-drag-dialog"]=n,Vue.use(i)),n.install=i;t["a"]=n},d69e:function(e,t,a){}}]);