(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f1de4cd"],{"0ad9":function(t,e,a){"use strict";var s=a("7b9a"),i=a.n(s);i.a},"7b9a":function(t,e,a){},a919:function(t,e,a){"use strict";var s=a("d2db"),i=a.n(s);i.a},bc4c:function(t,e,a){"use strict";var s=a("f580"),i=a.n(s);i.a},c500:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("i",{staticClass:"isFullScreen el-icon-top-right",attrs:{title:"全屏"},on:{click:t.fullscreenClick}}),t.dialogFormVisible?t._e():a("overview-content"),t.dialogFormVisible?a("el-dialog",{staticClass:"dialogs",attrs:{visible:t.dialogFormVisible,fullscreen:t.isFullscreen,"show-close":!1},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("i",{staticClass:"isFullScreen el-icon-bottom-left",attrs:{title:"缩小"},on:{click:t.fullscreenClick}}),a("overview-content")],1):t._e()],1)},i=[],n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contentBox",attrs:{id:"contentBox"}},[t.isDevicesStatus?t._e():a("div",[a("div",{staticClass:"header"},[a("div",{staticClass:"header-module"},[a("p",[a("svg-icon",{staticStyle:{color:"#70b3ff"},attrs:{"icon-class":"producting"}}),a("span",[t._v("正在生产")])],1),a("label",[t._v("In production")]),a("h3",[t._v(t._s(t.headerInfo.load))])]),a("div",{staticClass:"header-module"},[a("p",[a("svg-icon",{staticStyle:{color:"#ffcf20"},attrs:{"icon-class":"standBy"}}),a("span",[t._v("待机")])],1),a("label",[t._v("Stand by")]),a("h3",[t._v(t._s(t.headerInfo.standBy))])]),a("div",{staticClass:"header-module"},[a("p",[a("svg-icon",{staticStyle:{color:"#5f76ce"},attrs:{"icon-class":"shutdown"}}),a("span",[t._v("正常停机")])],1),a("label",[t._v("Standby normal shutdown")]),a("h3",[t._v(t._s(t.headerInfo.closeDown))])]),a("div",{staticClass:"header-module"},[a("p",[a("svg-icon",{attrs:{"icon-class":"onlineMaintain"}}),a("span",[t._v("在线保养")])],1),a("label",[t._v("Online maintenance")]),a("h3",[t._v(t._s(t.headerInfo.onlineMaintain))])]),a("div",{staticClass:"header-module"},[a("p",[a("svg-icon",{attrs:{"icon-class":"maintain"}}),a("span",[t._v("维修")])],1),a("label",[t._v("Repair")]),a("h3",[t._v(t._s(t.headerInfo.maintain))])]),a("div",{staticClass:"header-module"},[a("p",[a("svg-icon",{attrs:{"icon-class":"downMaintain"}}),a("span",[t._v("停机保养")])],1),a("label",[t._v("Shutdown maintenance")]),a("h3",[t._v(t._s(t.headerInfo.downMaintain))])]),a("div",{staticClass:"header-module"},[a("p",[a("svg-icon",{attrs:{"icon-class":"aberrant"}}),a("span",[t._v("异常待处理")])],1),a("label",[t._v("Exception to be handled ")]),a("h3",[t._v(t._s(t.headerInfo.aberrant))])])]),a("div",{staticClass:"content"},t._l(t.devices,(function(e,s){return a("div",{key:e.var2+s,staticClass:"content-module",on:{click:function(a){return t.detailsClick(e)},deviceDetailCall:t.deviceDetailCall}},[a("img",{attrs:{src:e.var1,alt:"设备图片"}}),0==e.runStatus?a("p",{staticClass:"color1"},[t._v(t._s(e.deviceName)),a("span",[t._v("（生产）")])]):1==e.runStatus?a("p",{staticClass:"color2"},[t._v(t._s(e.deviceName)),a("span",[t._v("（待机）")])]):2==e.runStatus?a("p",{staticClass:"color3"},[t._v(t._s(e.deviceName)),a("span",[t._v("（正常停机）")])]):3==e.runStatus?a("p",{staticClass:"color4"},[t._v(t._s(e.deviceName)),a("span",[t._v("（在线保养）")])]):4==e.runStatus?a("p",{staticClass:"color5"},[t._v(t._s(e.deviceName)),a("span",[t._v("（维修）")])]):5==e.runStatus?a("p",{staticClass:"color6"},[t._v(t._s(e.deviceName)),a("span",[t._v("（停机保养）")])]):6==e.runStatus?a("p",{staticClass:"color7"},[t._v(t._s(e.deviceName)),a("span",[t._v("（异常待处理）")])]):t._e(),a("el-row",[a("el-col",{attrs:{span:12}},[a("span",[t._v("生产工单")])]),a("el-col",{attrs:{span:12}},[a("span",{attrs:{title:e.workOrder}},[t._v(t._s(e.workOrder))])])],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("span",[t._v("产品编号")])]),a("el-col",{attrs:{span:12}},[a("span",{staticClass:"devicesCode",attrs:{title:e.code}},[t._v(t._s(e.code))])])],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("span",[t._v("产品名称")])]),a("el-col",{attrs:{span:12}},[a("span",{attrs:{title:e.name}},[t._v(t._s(e.name))])])],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("span",[t._v("计划/生产")])]),a("el-col",{attrs:{span:12}},[a("span",{attrs:{title:e.planYield+"/"+e.realYield}},[t._v(t._s(e.planYield)+"/"+t._s(e.realYield))])])],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("span",[t._v("标准/实际周期")])]),a("el-col",{attrs:{span:12}},[a("span",{attrs:{title:e.normCycle+"/"+e.realCycle}},[t._v(t._s(e.normCycle)+"/"+t._s(e.realCycle))])])],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("span",[t._v("预计完工时间")])]),a("el-col",{attrs:{span:12}},[a("span",{attrs:{title:e.completionTime}},[t._v(t._s(e.completionTime))])])],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("span",[t._v("生产进度")])]),a("el-col",{attrs:{span:12}},[a("span",[t._v(t._s(e.progress))])])],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("span",[t._v("设备运行状态")])]),a("el-col",{attrs:{span:12}},[a("span",{attrs:{title:e.status}},[t._v(t._s(e.status))])])],1)],1)})),0)]),t.isDevicesStatus?a("deviceDetail",{attrs:{"device-info":t.deviceInfo},on:{deviceDetailCall:t.deviceDetailCall}}):t._e()],1)},o=[],l=(a("4160"),a("b0c0"),a("d3b7"),a("159b"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"header"},[a("el-button",{attrs:{icon:"el-icon-arrow-left",size:"mini"},on:{click:t.handleBack}},[t._v("返回")])],1),t._l(t.attrCodeList,(function(e){return a("div",{key:e.code,staticClass:"chartModule"},[a("p",[t._v(t._s(e.attr)+"监测图")]),a("div",{attrs:{id:e.code}})])}))],2)}),r=[],c=(a("ddb0"),a("b775"));function d(){return Object(c["a"])({url:window.configs.tbUrl+"/productDevices/findList",method:"get"})}function v(t){return Object(c["a"])({url:window.configs.api+"/borad/overView",method:"post",data:{codes:t}})}function u(t){return Object(c["a"])({url:window.configs.tbUrl+"/productDevices/findAttrByClassifyById",method:"get",params:{classifyId:t}})}function f(t){return Object(c["a"])({url:window.configs.tbUrl+"/telemetry/getTimeseries",method:"post",data:{agg:t.agg,deviceId:t.deviceId,endTs:t.endTs,interval:t.interval,keys:t.keys,limit:t.limit,startTs:t.startTs}})}var p={name:"DeviceDetail",props:{deviceInfo:{type:Object,required:!0}},data:function(){return{timer:null,baseSetChart1:null,lineColor:"#006fe6",attrCodes:"",chartObj:{},attrCodeList:[],codeList:{}}},mounted:function(){this.baseSetChart1=this.initBaseSetChart(),this.getAttrs(),this.intervalGetChart()},beforeDestroy:function(){clearInterval(this.timer)},methods:{initBaseSetChart:function(){var t={backgroundColor:"#ffffff",title:{text:"",left:"18px",top:"25px",textStyle:{color:"#595959",fontSize:12,fontWeight:"400"}},grid:{left:"17",right:"17",bottom:"30",top:"65",containLabel:!0},tooltip:{trigger:"axis",backgroundColor:"#006fe6",padding:12,axisPointer:{type:"line",crossStyle:{color:"#7079cb"},lineStyle:{color:"#006FE6",type:"solid"}}},yAxis:[{type:"value",position:"right",splitLine:{show:!1},axisLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!1}},{type:"value",position:"left",splitLine:{lineStyle:{type:"solid",color:"#d2d2d2"}},axisLine:{show:!1},axisTick:{show:!1},axisLabel:{formatter:"{value}",color:"#595959",fontSize:14}}],xAxis:[{type:"category",boundaryGap:!0,axisTick:{show:!1},axisLine:{lineStyle:{color:"#d2d2d2"}},axisLabel:{inside:!1,textStyle:{color:"#595959",fontWeight:"normal",fontSize:14,lineHeight:22}},data:[]}],series:[]};return t},initChart:function(){var t=this;this.attrCodeList.forEach((function(e){t.$nextTick((function(){t.$set(t.chartObj,e.code,t.$echarts.init(document.getElementById(e.code))),t.chartObj[e.code].setOption(t.baseSetChart1)}))}))},setChart:function(t,e,a){var s={type:"line",symbolSize:8,smooth:0,showSymbol:1,yAxisIndex:1,data:t,itemStyle:{normal:{color:this.lineColor}}};this.chartObj[a].setOption({xAxis:{data:e},series:s})},handleBack:function(){clearInterval(this.timer),this.$emit("deviceDetailCall")},getAttrs:function(){var t=this;u(this.deviceInfo.classifyId).then((function(e){var a=e.data;t.attrCodeList=a;var s=[];a.length>0&&a.forEach((function(t,e){s.push(t.code)})),t.attrCodes=s.toString(),t.initChart(),t.getCharts(t.attrCodes)}))},getCharts:function(t){var e=this,a=(new Date).getTime(),s=a-6e5,i={agg:"NONE",deviceId:this.deviceInfo.deviceId,interval:6e4,keys:t,limit:24,startTs:s,endTs:a};f(i).then((function(t){var a=t.data,s=function(t){var s=a[t],i=[],n=[];s.forEach((function(t){var e=new Date(t.ts),a=e.getHours()+":"+e.getMinutes();n.push(a),i.push(t.value)})),e.setChart(i,n,t)};for(var i in a)s(i)}))},intervalGetChart:function(){var t=this;this.timer=window.setInterval((function(){t.getCharts(t.attrCodes)}),6e4)}}},h=p,_=(a("bc4c"),a("2877")),m=Object(_["a"])(h,l,r,!1,null,"d9c7ad68",null),b=m.exports,C={components:{deviceDetail:b},data:function(){return{isDevicesStatus:!1,devices:[],codes:"",deviceInfo:{deviceId:"",classifyId:""},headerInfo:{},timer:""}},computed:{},watch:{},created:function(){},mounted:function(){this.getDevicesAttr()},beforeDestroy:function(){clearInterval(this.timer)},methods:{detailsClick:function(t){this.isDevicesStatus=!0,this.deviceInfo.deviceId=t.id,this.deviceInfo.classifyId=t.classifyId},deviceDetailCall:function(){this.isDevicesStatus=!1},getDevicesAttr:function(){var t=this,e=[];d().then((function(a){if(0===a.code){var s=[];e=a.data,a.data.forEach((function(t,a){a,s.push(t.code),e[a].var1=window.configs.tbUrl+t.classifySet.imagePath,e[a].var2=t.code,e[a].deviceName=t.name})),t.codes=s.toString(),v(t.codes).then((function(a){if(0===a.code){t.headerInfo=a.data;var s=a.data;e.forEach((function(t,a){var i=s[t.code].productParam;for(var n in i)e[a][n]=i[n];e[a]["runStatus"]=s[t.var2].runStatus})),t.devices=e,t.timer=setTimeout((function(){t.getDevicesAttr()}),6e4)}else t.$message({type:"error",message:"查询失败"})}))}else t.$message({type:"error",message:"查询失败"})}))}}},g=C,w=(a("a919"),Object(_["a"])(g,n,o,!1,null,"d8077aa0",null)),y=w.exports,S={name:"Overview",components:{overviewContent:y},data:function(){return{isFullscreen:!0,dialogFormVisible:!1}},created:function(){},methods:{fullscreenClick:function(){this.dialogFormVisible=!this.dialogFormVisible},closeDetail:function(){this.dialogFormVisible=!1}}},I=S,x=(a("0ad9"),Object(_["a"])(I,s,i,!1,null,"65da796b",null));e["default"]=x.exports},d2db:function(t,e,a){},f580:function(t,e,a){}}]);