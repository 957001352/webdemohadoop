(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a25e22f0"],{"09f4":function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),Math.easeInOutQuad=function(e,t,i,n){return e/=n/2,e<1?i/2*e*e+t:(e--,-i/2*(e*(e-2)-1)+t)};var n=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function s(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function o(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function a(e,t,i){var a=o(),r=e-a,l=20,c=0;t="undefined"===typeof t?500:t;var u=function e(){c+=l;var o=Math.easeInOutQuad(c,a,r,t);s(o),c<t?n(e):i&&"function"===typeof i&&i()};u()}},2423:function(e,t,i){"use strict";i.d(t,"p",(function(){return s})),i.d(t,"h",(function(){return o})),i.d(t,"l",(function(){return a})),i.d(t,"c",(function(){return r})),i.d(t,"t",(function(){return l})),i.d(t,"k",(function(){return c})),i.d(t,"u",(function(){return u})),i.d(t,"j",(function(){return d})),i.d(t,"o",(function(){return m})),i.d(t,"g",(function(){return f})),i.d(t,"n",(function(){return p})),i.d(t,"f",(function(){return h})),i.d(t,"q",(function(){return g})),i.d(t,"b",(function(){return v})),i.d(t,"e",(function(){return y})),i.d(t,"r",(function(){return b})),i.d(t,"a",(function(){return w})),i.d(t,"d",(function(){return k})),i.d(t,"m",(function(){return C})),i.d(t,"i",(function(){return F})),i.d(t,"s",(function(){return I})),i.d(t,"v",(function(){return _}));var n=i("b775");function s(e){return Object(n["a"])({url:window.configs.api+"/jbpmDeployment/findList",method:"get",params:e})}function o(e){return Object(n["a"])({url:window.configs.api+"/jbpmDeployment/save",method:"post",data:e})}function a(){return Object(n["a"])({url:window.configs.api+"/jbpmDeployment/findJbpmFormList",method:"get"})}function r(e){return Object(n["a"])({url:window.configs.api+"/jbpmDeployment/delete",method:"get",params:{ids:e}})}function l(){return Object(n["a"])({url:window.configs.e2cUrl+"/user/findList",method:"get"})}function c(e){return Object(n["a"])({url:window.configs.api+"/jbpmExecution/findWaitTaskList",method:"get",params:e})}function u(e){return Object(n["a"])({url:window.configs.api+"/jbpmExecution/findHistTaskList",method:"get",params:e})}function d(e,t){return Object(n["a"])({url:window.configs.api+"/devicesRepai/findList",method:"get",params:{id:e}})}function m(e){return Object(n["a"])({url:window.configs.api+"/jbpmExecution/findHistTaskDeatilList",method:"get",params:e})}function f(e){return Object(n["a"])({url:window.configs.api+"/jbpmExecution/doTask",method:"post",data:e})}function p(e){return Object(n["a"])({url:window.configs.api+"/devicesKeepTask/getDevicesKeepTask",method:"get",params:{id:e}})}function h(e){return Object(n["a"])({url:window.configs.api+"/devicesScrap/findList",method:"get",params:{devicesScrapId:e}})}function g(e){return Object(n["a"])({url:window.configs.api+"/devicesCheckTeam/findList",method:"get",params:e})}function v(e){return Object(n["a"])({url:window.configs.api+"/devicesCheckTeam/save",method:"post",data:e})}function y(e){return Object(n["a"])({url:window.configs.api+"/devicesCheckTeam/delete",method:"get",params:{ids:e}})}function b(e){return Object(n["a"])({url:window.configs.api+"/devicesCheckItem/findList",method:"get",params:e})}function w(e){return Object(n["a"])({url:window.configs.api+"/devicesCheckItem/save",method:"post",data:e})}function k(e){return Object(n["a"])({url:window.configs.api+"/devicesCheckItem/delete",method:"get",params:{ids:e}})}function C(){return Object(n["a"])({url:window.configs.e2cUrl+"/devicesClassify/findList",method:"get"})}function F(e){return Object(n["a"])({url:window.configs.e2cUrl+"/productDevices/findList",method:"get",param:e})}function I(e){return Object(n["a"])({url:window.configs.api+"/devicesCheck/findList",method:"get",params:e})}function _(e){return Object(n["a"])({url:window.configs.api+"/mouldDevices/findOneById",method:"get",params:{id:e}})}},"719a":function(e,t,i){},7530:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"filter-container"},[i("span",[e._v("点检表单名称：")]),i("el-input",{staticClass:"filter-item",staticStyle:{width:"160px"},attrs:{placeholder:"请输入项目名称",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter(t)}},model:{value:e.listQuery.name,callback:function(t){e.$set(e.listQuery,"name",t)},expression:"listQuery.name"}}),i("span",[e._v("设备类型：")]),i("el-select",{staticClass:"filter-item",staticStyle:{width:"160px"},attrs:{placeholder:"请选择设备类型",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter(t)}},model:{value:e.listQuery.devicesClassify,callback:function(t){e.$set(e.listQuery,"devicesClassify",t)},expression:"listQuery.devicesClassify"}},e._l(e.options,(function(e){return i("el-option",{key:e.id,attrs:{label:e.classifyName,value:e.id}})})),1),i("span",[e._v("设备编号：")]),i("el-input",{staticClass:"filter-item",staticStyle:{width:"160px"},attrs:{placeholder:"请输入设备编号",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter(t)}},model:{value:e.listQuery.devicesCode,callback:function(t){e.$set(e.listQuery,"devicesCode",t)},expression:"listQuery.devicesCode"}}),i("el-button",{staticClass:"primaryBtn",attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.handleFilter}},[e._v(" 查询 ")]),i("el-button",{staticClass:"resetBtn",attrs:{icon:"el-icon-refresh-right",size:"mini"},on:{click:e.resetSearch}},[e._v(" 重置 ")])],1),i("div",{staticClass:"opt-container"},[e.hasPermission("spotCheckGroup/add")?i("el-button",{staticClass:"filter-item el-icon-plus addBtn",attrs:{size:"small"},on:{click:function(t){return e.auditClick("新增","")}}},[e._v(" 新增 ")]):e._e(),e.hasPermission("spotCheckGroup/delete")?i("el-button",{staticClass:"filter-item el-icon-delete deleteBtn",attrs:{size:"small"},on:{click:e.handleDelte}},[e._v(" 删除 ")]):e._e()],1),i("el-table",{key:e.tableKey,staticStyle:{width:"100%"},attrs:{stripe:"",data:e.list,border:"",fit:"","highlight-current-row":"",height:"calc(100vh - 355px)","header-cell-style":e.headerClassName},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),i("el-table-column",{attrs:{type:"index",label:"序号",width:"55"}}),i("el-table-column",{attrs:{label:"点检表单名称",prop:"id",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[i("span",[e._v(e._s(n.name))])]}}])}),i("el-table-column",{attrs:{label:"点检项目",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[i("span",[e._v(e._s(n.checkItemNames))])]}}])}),i("el-table-column",{attrs:{label:"设备类型",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[i("span",[e._v(e._s(n.classifyName))])]}}])}),i("el-table-column",{attrs:{label:"设备编号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[i("span",[e._v(e._s(n.productDevices))])]}}])}),i("el-table-column",{attrs:{label:"申请时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[i("span",[e._v(e._s(n.createTime))])]}}])}),i("el-table-column",{attrs:{label:"操作",align:"center",width:"100","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e.hasPermission("spotCheckGroup/edit")?i("el-button",{staticClass:"filter-item",attrs:{type:"text",size:"small"},on:{click:function(t){return e.auditClick("编辑",n)}}},[i("svg-icon",{attrs:{"icon-class":"edit"}}),e._v(" 编辑 ")],1):e._e()]}}])})],1),i("pagination",{attrs:{total:e.total,page:e.listQuery.pageNum,limit:e.listQuery.pageSize},on:{"update:page":function(t){return e.$set(e.listQuery,"pageNum",t)},"update:limit":function(t){return e.$set(e.listQuery,"pageSize",t)},pagination:e.getList}}),e.dialogFormVisible?i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],staticClass:"dialogs",attrs:{title:e.dialogTitle,visible:e.dialogFormVisible,"close-on-click-modal":!1,width:"480px",disabled:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",class:1==e.readonly?"lookoverForm":"",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"120px"}},[i("el-form-item",{attrs:{label:"点检表单名称：",prop:"name"}},[i("el-input",{attrs:{readonly:e.readonly,placeholder:"请输入点检表单名称"},on:{input:function(t){e.ruleForm.name=e.inputRule(e.ruleForm.name)}},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),i("el-form-item",{attrs:{label:"设备类型：",prop:"devicesClassify"}},["查看点检表单"!==e.dialogTitle?i("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini",placeholder:"请选择设备类型"},model:{value:e.ruleForm.devicesClassify,callback:function(t){e.$set(e.ruleForm,"devicesClassify",t)},expression:"ruleForm.devicesClassify"}},e._l(e.options,(function(e){return i("el-option",{key:e.id,attrs:{label:e.classifyName,value:e.id}})})),1):e._e(),"查看点检表单"==e.dialogTitle?i("el-input",{attrs:{size:"mini",readonly:""},model:{value:e.ruleForm.classifyName,callback:function(t){e.$set(e.ruleForm,"classifyName",t)},expression:"ruleForm.classifyName"}}):e._e()],1),i("el-form-item",{attrs:{label:"设备编号：",prop:"productDevicesIds"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini",multiple:"","collapse-tags":"",placeholder:"请选择（可多选）",disabled:e.selectionDisabled},on:{change:e.productDevicesIds},model:{value:e.ruleForm.productDevicesIds,callback:function(t){e.$set(e.ruleForm,"productDevicesIds",t)},expression:"ruleForm.productDevicesIds"}},e._l(e.optionsCode,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id+""}})})),1)],1),i("el-form-item",{attrs:{label:"点检项目：",prop:"checkItemIds"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini",multiple:"","collapse-tags":"",placeholder:"请选择（可多选）",disabled:e.selectionDisabled},on:{change:e.checkItemIds},model:{value:e.ruleForm.checkItemIds,callback:function(t){e.$set(e.ruleForm,"checkItemIds",t)},expression:"ruleForm.checkItemIds"}},e._l(e.spotCheckList,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id+""}})})),1)],1),i("el-form-item",{staticStyle:{"text-align":"right"}},[i("el-button",{staticClass:"cancalBtn",attrs:{size:"small"},on:{click:e.calcelSave}},[e._v("取消")]),"查看点检表单"!==e.dialogTitle?i("el-button",{staticClass:"sumbitBtn",attrs:{type:"primary",size:"small"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确定 ")]):e._e()],1)],1)],1):e._e()],1)},s=[],o=(i("4160"),i("b0c0"),i("d3b7"),i("ac1f"),i("25f0"),i("1276"),i("159b"),i("2423")),a=i("333d"),r=i("a888"),l={name:"SpotCheckGroup",components:{Pagination:a["a"]},directives:{elDragDialog:r["a"]},data:function(){return{timeValue:"",pageStatus:0,tableKey:0,list:[],total:0,dialogTitle:"",listQuery:{pageNum:1,pageSize:20,name:void 0,devicesClassify:void 0,devicesCode:void 0},multipleSelection:[],dialogFormVisible:!1,ruleForm:{checkItemIds:[],devicesClassify:"",name:"",productDevicesIds:[]},rules:{name:[{required:!0,message:"请输入",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}],devicesClassify:[{required:!0,message:"请选择",trigger:"change"}],checkItemIds:[{type:"array",required:!0,message:"请选择",trigger:"change"}],productDevicesIds:[{type:"array",required:!0,message:"请选择",trigger:"change"}]},downloadLoading:!1,ruleFormParams:{checkItemIds:"",devicesClassify:"",name:"",productDevicesIds:"",id:""},readonly:!1,options:[],selectionDisabled:!1,ids:"",optionsCode:[{name:"asdasdasda",id:"as1"},{name:"asdasdasda",id:"asdasda2sdasd"},{name:"asdasdasda",id:"asda3sdasdasd"},{name:"asdasdasda",id:"asdas4dasdasd"}],spotCheckList:[]}},created:function(){},mounted:function(){this.getList(),this.getSpotCheckListRequest()},methods:{getList:function(){var e=this;console.log("获取数据"),Object(o["q"])(this.listQuery).then((function(t){0===t.code?(console.log(t),e.list=t.data.list,e.total=t.data.total):e.$message({type:"error",message:"查询失败"})}))},handleFilter:function(){this.listQuery.page=1,this.getList()},resetSearch:function(){this.listQuery={pageNum:this.listQuery.pageNum,pageSize:this.listQuery.pageSize,name:void 0,devicesClassify:void 0,devicesCode:void 0},this.getList()},auditClick:function(e,t){this.getDevicesClassifyRequest(),this.getDevicesCodeRequest(),this.dialogFormVisible=!0,this.dialogTitle=e+"点检表单",console.log(this.ruleForm),"编辑"===e?(console.log(t),this.readonly=!1,this.selectionDisabled=!1,this.ruleForm=t,this.ruleFormParams.id=t.id,this.ruleFormParams.checkItemIds=t.checkItemIds,this.ruleFormParams.productDevicesIds=t.productDevicesIds,this.ruleForm.checkItemIds=t.checkItemIds.split(","),this.ruleForm.productDevicesIds=t.productDevicesIds.split(",")):"新增"===e&&(this.readonly=!1,this.selectionDisabled=!1,delete this.ruleFormParams.id)},calcelSave:function(){this.ruleForm={checkItemIds:[],devicesClassify:"",name:"",productDevicesIds:[]},this.dialogFormVisible=!1},handleSelectionChange:function(e){this.multipleSelection=e;var t=[];this.multipleSelection.forEach((function(e,i){t.push(e.id)})),this.ids=t.toString()},headerClassName:function(e){e.row,e.rowIndex;return"background-color: #FAFAFA"},handleDelte:function(){var e=this;0!==this.multipleSelection.length?this.$confirm("确定删除吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.handleDelete()})):this.$message({message:"您还没有选择数据!",type:"warning"})},handleDelete:function(){var e=this;Object(o["e"])(this.ids).then((function(t){0===t.code?e.getList():e.$message({type:"error",message:"删除失败"})}))},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){e&&(t.ruleFormParams.name=t.ruleForm.name,t.ruleFormParams.devicesClassify=t.ruleForm.devicesClassify,console.log(t.ruleFormParams),Object(o["b"])(t.ruleFormParams).then((function(e){0===e.code?(t.$message({type:"success",message:"操作成功"}),t.ruleForm={checkItemIds:[],devicesClassify:"",name:"",productDevicesIds:[]},t.dialogFormVisible=!1,t.getList()):t.$message({type:"error",message:e.msg})})))}))},getDevicesClassifyRequest:function(){var e=this;Object(o["m"])().then((function(t){0===t.code&&(e.options=t.data)}))},getDevicesCodeRequest:function(){var e=this;Object(o["i"])().then((function(t){0===t.code&&(e.optionsCode=t.data)}))},getSpotCheckListRequest:function(){var e=this;Object(o["r"])(this.listQuery).then((function(t){0===t.code?e.spotCheckList=t.data.list:e.$message({type:"error",message:"查询失败"})}))},productDevicesIds:function(e){console.log(this.ruleForm.productDevicesIds),this.ruleFormParams.productDevicesIds=e.toString(),console.log(e)},checkItemIds:function(e){this.ruleFormParams.checkItemIds=e.toString(),console.log(e)}}},c=l,u=(i("a93c"),i("2877")),d=Object(u["a"])(c,n,s,!1,null,"923ce782",null);t["default"]=d.exports},a888:function(e,t,i){"use strict";i("99af"),i("caad"),i("ac1f"),i("2532"),i("5319");var n={bind:function(e,t,i){var n=e.querySelector(".el-dialog__header"),s=e.querySelector(".el-dialog");n.style.cssText+=";cursor:move;",s.style.cssText+=";top:0px;";var o=function(){return window.document.currentStyle?function(e,t){return e.currentStyle[t]}:function(e,t){return getComputedStyle(e,!1)[t]}}();n.onmousedown=function(e){var t=e.clientX-n.offsetLeft,a=e.clientY-n.offsetTop,r=s.offsetWidth,l=s.offsetHeight,c=document.body.clientWidth,u=document.body.clientHeight,d=s.offsetLeft,m=c-s.offsetLeft-r,f=s.offsetTop,p=u-s.offsetTop-l,h=o(s,"left"),g=o(s,"top");h.includes("%")?(h=+document.body.clientWidth*(+h.replace(/\%/g,"")/100),g=+document.body.clientHeight*(+g.replace(/\%/g,"")/100)):(h=+h.replace(/\px/g,""),g=+g.replace(/\px/g,"")),document.onmousemove=function(e){var n=e.clientX-t,o=e.clientY-a;-n>d?n=-d:n>m&&(n=m),-o>f?o=-f:o>p&&(o=p),s.style.cssText+=";left:".concat(n+h,"px;top:").concat(o+g,"px;"),i.child.$emit("dragDialog")},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null}}}},s=function(e){e.directive("el-drag-dialog",n)};window.Vue&&(window["el-drag-dialog"]=n,Vue.use(s)),n.install=s;t["a"]=n},a93c:function(e,t,i){"use strict";var n=i("719a"),s=i.n(n);s.a}}]);