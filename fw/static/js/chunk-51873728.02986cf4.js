(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-51873728"],{"09f4":function(e,t,i){"use strict";i.d(t,"a",(function(){return o})),Math.easeInOutQuad=function(e,t,i,n){return e/=n/2,e<1?i/2*e*e+t:(e--,-i/2*(e*(e-2)-1)+t)};var n=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function a(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function s(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function o(e,t,i){var o=s(),r=e-o,c=20,l=0;t="undefined"===typeof t?500:t;var u=function e(){l+=c;var s=Math.easeInOutQuad(l,o,r,t);a(s),l<t?n(e):i&&"function"===typeof i&&i()};u()}},"11aa":function(e,t,i){},2423:function(e,t,i){"use strict";i.d(t,"p",(function(){return a})),i.d(t,"h",(function(){return s})),i.d(t,"l",(function(){return o})),i.d(t,"c",(function(){return r})),i.d(t,"t",(function(){return c})),i.d(t,"k",(function(){return l})),i.d(t,"u",(function(){return u})),i.d(t,"j",(function(){return d})),i.d(t,"o",(function(){return f})),i.d(t,"g",(function(){return p})),i.d(t,"n",(function(){return m})),i.d(t,"f",(function(){return h})),i.d(t,"q",(function(){return g})),i.d(t,"b",(function(){return b})),i.d(t,"e",(function(){return w})),i.d(t,"r",(function(){return v})),i.d(t,"a",(function(){return y})),i.d(t,"d",(function(){return j})),i.d(t,"m",(function(){return C})),i.d(t,"i",(function(){return L})),i.d(t,"s",(function(){return x})),i.d(t,"v",(function(){return D}));var n=i("b775");function a(e){return Object(n["a"])({url:window.configs.api+"/jbpmDeployment/findList",method:"get",params:e})}function s(e){return Object(n["a"])({url:window.configs.api+"/jbpmDeployment/save",method:"post",data:e})}function o(){return Object(n["a"])({url:window.configs.api+"/jbpmDeployment/findJbpmFormList",method:"get"})}function r(e){return Object(n["a"])({url:window.configs.api+"/jbpmDeployment/delete",method:"get",params:{ids:e}})}function c(){return Object(n["a"])({url:window.configs.e2cUrl+"/user/findList",method:"get"})}function l(e){return Object(n["a"])({url:window.configs.api+"/jbpmExecution/findWaitTaskList",method:"get",params:e})}function u(e){return Object(n["a"])({url:window.configs.api+"/jbpmExecution/findHistTaskList",method:"get",params:e})}function d(e,t){return Object(n["a"])({url:window.configs.api+"/devicesRepai/findList",method:"get",params:{id:e}})}function f(e){return Object(n["a"])({url:window.configs.api+"/jbpmExecution/findHistTaskDeatilList",method:"get",params:e})}function p(e){return Object(n["a"])({url:window.configs.api+"/jbpmExecution/doTask",method:"post",data:e})}function m(e){return Object(n["a"])({url:window.configs.api+"/devicesKeepTask/getDevicesKeepTask",method:"get",params:{id:e}})}function h(e){return Object(n["a"])({url:window.configs.api+"/devicesScrap/findList",method:"get",params:{devicesScrapId:e}})}function g(e){return Object(n["a"])({url:window.configs.api+"/devicesCheckTeam/findList",method:"get",params:e})}function b(e){return Object(n["a"])({url:window.configs.api+"/devicesCheckTeam/save",method:"post",data:e})}function w(e){return Object(n["a"])({url:window.configs.api+"/devicesCheckTeam/delete",method:"get",params:{ids:e}})}function v(e){return Object(n["a"])({url:window.configs.api+"/devicesCheckItem/findList",method:"get",params:e})}function y(e){return Object(n["a"])({url:window.configs.api+"/devicesCheckItem/save",method:"post",data:e})}function j(e){return Object(n["a"])({url:window.configs.api+"/devicesCheckItem/delete",method:"get",params:{ids:e}})}function C(){return Object(n["a"])({url:window.configs.e2cUrl+"/devicesClassify/findList",method:"get"})}function L(e){return Object(n["a"])({url:window.configs.e2cUrl+"/productDevices/findList",method:"get",param:e})}function x(e){return Object(n["a"])({url:window.configs.api+"/devicesCheck/findList",method:"get",params:e})}function D(e){return Object(n["a"])({url:window.configs.api+"/mouldDevices/findOneById",method:"get",params:{id:e}})}},3789:function(e,t,i){"use strict";var n=i("11aa"),a=i.n(n);a.a},"3fc4":function(e,t,i){},4766:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("el-form",{ref:"scrapsApplyForm",attrs:{model:e.scrapsDetailForm,"label-width":"90px"}},[i("el-form-item",{attrs:{label:"设备编号"}},[i("span",[e._v(e._s(e.scrapsDetailForm.devicesItemVo.name))])]),i("el-form-item",{attrs:{label:"设备类型"}},[i("span",[e._v(e._s(e.scrapsDetailForm.devicesItemVo.classifyName))])]),i("el-form-item",{attrs:{label:"报废原因"}},[i("span",[e._v(e._s(e.scrapsDetailForm.reason))])]),i("el-form-item",{attrs:{label:"报废时间"}},[i("span",[e._v(e._s(e.scrapsDetailForm.createTime))])]),i("el-form-item",{attrs:{label:"附件"}},e._l(e.fileList,(function(t,n){return i("el-link",{key:n,on:{click:function(i){return e.handleDownFile(t.path)}}},[e._v(e._s(t.name)+"."+e._s(t.suffix))])})),1),i("el-form-item",{attrs:{label:"审核信息"}})],1),i("el-table",{attrs:{stripe:"",data:e.deviceScrapRecordList,border:"",fit:"","highlight-current-row":"",height:"250px","header-cell-style":e.headerClassName}},[i("el-table-column",{attrs:{label:"审批人",prop:"auditUserName",width:"100px",align:"center"}}),i("el-table-column",{attrs:{label:"审批结果",prop:"auditNode",width:"140px",align:"center"}}),i("el-table-column",{attrs:{label:"审核时间",prop:"auditTime",width:"160px",align:"center"}}),i("el-table-column",{attrs:{label:"审核意见",prop:"auditIdea","min-width":"150px",align:"center"}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowfooter,expression:"isShowfooter"}],staticClass:"footer"},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.handleBack}},[e._v("返回")])],1)],1)},a=[],s=i("5530"),o=i("2423"),r={name:"ScrapsDetail",props:{scrapsObj:{type:Object,required:!0},isShowBackBtn:{type:Boolean,required:!1}},data:function(){return{scrapsDetailForm:{},isShowfooter:!0,fileList:[{name:"",url:""}],deviceScrapRecordList:[]}},created:function(){void 0!==this.isShowBackBtn&&"boolean"===typeof this.isShowBackBtn&&(this.isShowfooter=this.isShowBackBtn),this.scrapsDetailForm=Object(s["a"])({},this.scrapsObj);var e=[];this.scrapsDetailForm.baseFiles.length>0&&(e=this.scrapsDetailForm.baseFiles),this.fileList=e,this.getDevicesClassifyList()},methods:{headerClassName:function(e){e.row,e.rowIndex;return"background-color: #FAFAFA"},handleBack:function(){this.$emit("ScrapsDetailCall",!1)},getDevicesClassifyList:function(){var e=this,t={executionId:this.scrapsDetailForm.executionId};Object(o["o"])(t).then((function(t){0===t.code&&(e.deviceScrapRecordList=t.data)}))},handleDownFile:function(e){var t=window.configs.api+"/attachment/downByPath?path="+e,i=window.open(encodeURI(t));setTimeout((function(){i.close()}),3e3)}}},c=r,l=(i("78c9"),i("2877")),u=Object(l["a"])(c,n,a,!1,null,"1a4499af",null);t["a"]=u.exports},5471:function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"a",(function(){return s}));var n=i("b775");function a(e){return Object(n["a"])({url:window.configs.api+"/devicesScrap/findList",method:"get",params:e})}function s(e){return Object(n["a"])({url:window.configs.api+"/devicesScrap/save",method:"post",data:e})}},"6ace":function(e,t,i){"use strict";i.d(t,"c",(function(){return a})),i.d(t,"a",(function(){return s})),i.d(t,"b",(function(){return o}));var n=i("b775");function a(e){return Object(n["a"])({url:window.configs.api+"/attachment/upload",method:"post",data:e,heards:{"Content-Type":"multipart/form-data"}})}function s(e){return Object(n["a"])({url:window.configs.e2cUrl+"/productDevices/findList",method:"get",params:e})}function o(){return Object(n["a"])({url:window.configs.e2cUrl+"/devicesClassify/findList",method:"get"})}},"78c9":function(e,t,i){"use strict";var n=i("3fc4"),a=i.n(n);a.a},a888:function(e,t,i){"use strict";i("99af"),i("caad"),i("ac1f"),i("2532"),i("5319");var n={bind:function(e,t,i){var n=e.querySelector(".el-dialog__header"),a=e.querySelector(".el-dialog");n.style.cssText+=";cursor:move;",a.style.cssText+=";top:0px;";var s=function(){return window.document.currentStyle?function(e,t){return e.currentStyle[t]}:function(e,t){return getComputedStyle(e,!1)[t]}}();n.onmousedown=function(e){var t=e.clientX-n.offsetLeft,o=e.clientY-n.offsetTop,r=a.offsetWidth,c=a.offsetHeight,l=document.body.clientWidth,u=document.body.clientHeight,d=a.offsetLeft,f=l-a.offsetLeft-r,p=a.offsetTop,m=u-a.offsetTop-c,h=s(a,"left"),g=s(a,"top");h.includes("%")?(h=+document.body.clientWidth*(+h.replace(/\%/g,"")/100),g=+document.body.clientHeight*(+g.replace(/\%/g,"")/100)):(h=+h.replace(/\px/g,""),g=+g.replace(/\px/g,"")),document.onmousemove=function(e){var n=e.clientX-t,s=e.clientY-o;-n>d?n=-d:n>f&&(n=f),-s>p?s=-p:s>m&&(s=m),a.style.cssText+=";left:".concat(n+h,"px;top:").concat(s+g,"px;"),i.child.$emit("dragDialog")},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null}}}},a=function(e){e.directive("el-drag-dialog",n)};window.Vue&&(window["el-drag-dialog"]=n,Vue.use(a)),n.install=a;t["a"]=n},d385:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"filter-container"},[i("span",{staticClass:"seachname"},[e._v("设备编号:")]),i("el-input",{staticClass:"filter-item",attrs:{size:"small",placeholder:"输入设备编号"},model:{value:e.listQuery.devicesCode,callback:function(t){e.$set(e.listQuery,"devicesCode",t)},expression:"listQuery.devicesCode"}}),i("span",{staticClass:"seachname"},[e._v("设备类型:")]),i("el-select",{attrs:{size:"small",clearable:"",placeholder:"请选择设备类型"},model:{value:e.listQuery.devicesClassify,callback:function(t){e.$set(e.listQuery,"devicesClassify",t)},expression:"listQuery.devicesClassify"}},e._l(e.devicesClassifys,(function(e){return i("el-option",{key:e.classifyId,attrs:{label:e.classifyName,value:e.classifyId}})})),1),i("el-button",{staticClass:"primaryBtn",attrs:{type:"primary",size:"mini",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v("查询")]),i("el-button",{staticClass:"resetBtn",attrs:{type:"default",size:"mini",icon:"el-icon-refresh-right"},on:{click:e.handleReset}},[e._v("重置")])],1),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],key:e.tableKey,ref:"tableRef",attrs:{stripe:"",data:e.deviceScrapRecordList,border:"",fit:"","highlight-current-row":"","header-cell-style":e.headerClassName,height:e.tableHeight}},[i("el-table-column",{attrs:{label:"序号",type:"index",align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s((e.listQuery.page-1)*e.listQuery.limit+t.$index+1)+" ")]}}])}),i("el-table-column",{attrs:{label:"设备编号",prop:"devicesItemVo.name",width:"200px",align:"center"}}),i("el-table-column",{attrs:{label:"设备类型",prop:"devicesItemVo.classifyName",width:"200px",align:"center"}}),i("el-table-column",{attrs:{label:"申请人",prop:"applyUser.name",width:"150px",align:"center"}}),i("el-table-column",{attrs:{label:"申请报废时间",prop:"createTime",width:"160px",align:"center"}}),i("el-table-column",{attrs:{label:"审批结果",prop:"auditStatus","min-width":"150px",align:"center"}}),i("el-table-column",{attrs:{label:"操作",width:"100px",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e.hasPermission("scraps/find")?i("el-button",{staticClass:"defaultTextBtn",attrs:{type:"text"},on:{click:function(t){return e.handleDetail(n)}}},[i("svg-icon",{attrs:{"icon-class":"search"}}),e._v(" 查看 ")],1):e._e()]}}])})],1),i("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.listQuery.page,limit:e.listQuery.limit},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"update:limit":function(t){return e.$set(e.listQuery,"limit",t)},pagination:e.getResumeList}}),e.detailDialogVisible?i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],staticClass:"dialogs",attrs:{title:"报废记录详情",visible:e.detailDialogVisible,"close-on-click-modal":!1,width:"600px"},on:{"update:visible":function(t){e.detailDialogVisible=t}}},[i("scraps-detail",{attrs:{"is-show-back-btn":!0,"scraps-obj":e.oScrap},on:{ScrapsDetailCall:e.scrapsDetailCall}})],1):e._e()],1)},a=[],s=i("5530"),o=i("6ace"),r=i("5471"),c=i("4766"),l=i("333d"),u=i("a888"),d={name:"Scraps",directives:{elDragDialog:u["a"]},components:{Pagination:l["a"],ScrapsDetail:c["a"]},data:function(){return{total:0,listQuery:{page:1,limit:10,devicesCode:"",devicesClassify:""},devicesClassifys:[],tableHeight:0,tableKey:Math.random(),tableLoading:!0,deviceScrapRecordList:[],oScrap:{},detailDialogVisible:!1}},created:function(){this.getDevicesClassifyList(),this.getResumeList()},methods:{scrapsDetailCall:function(){this.detailDialogVisible=!1},handleFilter:function(){this.listQuery.page=1,this.getResumeList()},headerClassName:function(e){e.row,e.rowIndex;return"background-color: #FAFAFA"},handleReset:function(){this.listQuery.page=1,this.listQuery.devicesCode=void 0,this.listQuery.devicesClassify=void 0,this.getResumeList()},handleDetail:function(e){this.oScrap=Object(s["a"])({},e),this.detailDialogVisible=!0},getResumeList:function(){var e=this;this.tableLoading=!0,Object(r["b"])(this.listQuery).then((function(t){0===t.code&&(e.deviceScrapRecordList=t.data.list,e.total=t.data.total),e.tableHeight=window.screen.availHeight-390,e.tableLoading=!1}))},getDevicesClassifyList:function(){var e=this;this.tableLoading=!0,Object(o["b"])().then((function(t){0===t.code&&(e.devicesClassifys=t.data)}))}}},f=d,p=(i("3789"),i("2877")),m=Object(p["a"])(f,n,a,!1,null,"cfe7174e",null);t["default"]=m.exports}}]);